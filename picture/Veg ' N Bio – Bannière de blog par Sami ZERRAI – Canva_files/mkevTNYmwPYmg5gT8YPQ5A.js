(function() {var e,aa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,da={};function l(a,b){(da[a]=da[a]||[]).push(b);var c=aa;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))}
function ea(){ea=function(){};if(!aa.Symbol){aa.Symbol=fa;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var f=[],g=0,h=d.length;g<h;g++){var m;a:if(m=d[g],14>m.length)m=!1;else{for(var k=0;14>k;k++)if(m[k]!="jscomp_symbol_"[k]){m=!1;break a}m=!0}m?a.push(d[g]):f.push(d[g])}return f}};l("Object.keys",b);l("Object.getOwnPropertyNames",b);l("Object.getOwnPropertySymbols",function(c){return function(d){b.yl=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}}var ha=0;
function fa(a){return"jscomp_symbol_"+a+ha++}function ia(){ea();aa.Symbol.iterator||(aa.Symbol.iterator=aa.Symbol("iterator"));ia=function(){}}function n(a){ia();ea();ia();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}function ja(a){if(!(a instanceof Array)){a=n(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]}function ka(a,b){ia();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}
var la="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function q(a,b){if(b){for(var c=aa,d=a.split("."),f=0;f<d.length-1;f++){var g=d[f];g in c||(c[g]={});c=c[g]}d=d[d.length-1];f=c[d];b=b(f);if(b!=f){a=da[a]||[];for(f=0;f<a.length;f++)b=a[f](b);la(c,d,{configurable:!0,writable:!0,value:b})}}}
q("Array.prototype.keys",function(a){return a?a:function(){return ka(this,function(a){return a})}});function t(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
q("WeakMap",function(a){function b(a){this.jd=(m+=Math.random()+1).toString();if(a){ea();ia();a=n(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){if(!t(a,g)){var b={};b[g]=h;la(a,g,{value:b})}}function d(a){return function(b){var c=a(b);if(t(b,g)&&t(b[g],g)&&b[g][g]===h)for(b=0;b<c.length;b++)if(c[b]==g){c.splice(b,1);break}return c}}function f(a){return function(b){c(b);return a(b)}}if(function(){if(!a||!Object.seal)return!1;var b=Object.seal({}),c=Object.seal({}),d=
new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}())return a;var g="$jscomp_hidden_"+Math.random().toString().substring(2),h={};l("Object.getOwnPropertyNames",d);l("Object.keys",d);l("Reflect.enumerate",d);l("Reflect.ownKeys",d);l("Object.freeze",f);l("Object.preventExtensions",f);l("Object.seal",f);var m=0;b.prototype.set=function(a,b){c(a);if(!t(a,g))throw Error("WeakMap key fail: "+a);a[g][this.jd]=b;return this};b.prototype.get=function(a){return t(a,
g)?a[g][this.jd]:void 0};b.prototype.has=function(a){return t(a,g)&&t(a[g],this.jd)};b.prototype.delete=function(a){return t(a,g)&&t(a[g],this.jd)?delete a[g][this.jd]:!1};return b});
q("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.Ya,d={next:function(){if(c){for(;c.head!=a.Ya;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d}function d(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?g.has(b)?c=g.get(b):(c=""+ ++h,g.set(b,c)):c="p_"+b;var d=a.Vc[c];if(d&&t(a.Vc,c))for(a=0;a<d.length;a++){var f=d[a];if(b!==b&&f.key!==
f.key||b===f.key)return{id:c,list:d,index:a,ea:f}}return{id:c,list:d,index:-1,ea:void 0}}function f(a){this.Vc={};this.Ya=b();this.size=0;if(a){a=n(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(n([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),f=d.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;
f=d.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!d.next().done?!1:!0}catch(g){return!1}}())return a;ea();ia();var g=new WeakMap;f.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.Vc[c.id]=[]);c.ea?c.ea.value=b:(c.ea={next:this.Ya,previous:this.Ya.previous,head:this.Ya,key:a,value:b},c.list.push(c.ea),this.Ya.previous.next=c.ea,this.Ya.previous=c.ea,this.size++);return this};f.prototype.delete=function(a){a=d(this,a);return a.ea&&a.list?(a.list.splice(a.index,1),a.list.length||
delete this.Vc[a.id],a.ea.previous.next=a.ea.next,a.ea.next.previous=a.ea.previous,a.ea.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.Vc={};this.Ya=this.Ya.previous=b();this.size=0};f.prototype.has=function(a){return!!d(this,a).ea};f.prototype.get=function(a){return(a=d(this,a).ea)&&a.value};f.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return c(this,function(a){return a.key})};f.prototype.values=function(){return c(this,
function(a){return a.value})};f.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var h=0;return f});q("Object.assign",function(a){return a?a:function(a,c){for(var d=1;d<arguments.length;d++){var f=arguments[d];if(f)for(var g in f)t(f,g)&&(a[g]=f[g])}return a}});q("Array.prototype.values",function(a){return a?a:function(){return ka(this,function(a,c){return c})}});
q("Array.prototype.fill",function(a){return a?a:function(a,c,d){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==d||d>f)d=f;d=Number(d);0>d&&(d=Math.max(0,f+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});q("Array.prototype.find",function(a){return a?a:function(a,c){a:{var d=this;d instanceof String&&(d=String(d));for(var f=d.length,g=0;g<f;g++){var h=d[g];if(a.call(c,h,g,d)){a=h;break a}}a=void 0}return a}});
q("Array.prototype.entries",function(a){return a?a:function(){return ka(this,function(a,c){return[a,c]})}});q("Array.from",function(a){return a?a:function(a,c,d){ia();c=null!=c?c:function(a){return a};var f=[],g=a[Symbol.iterator];if("function"==typeof g)for(a=g.call(a);!(g=a.next()).done;)f.push(c.call(d,g.value));else for(var g=a.length,h=0;h<g;h++)f.push(c.call(d,a[h]));return f}});function ma(){}
function u(a,b,c){for(var d=[],f=2;f<arguments.length;++f)d[f-2]=arguments[f];if(!a)throw Error(2>arguments.length?"invalid argument":na.apply(ma,[].concat([b],ja(d))));}function oa(a,b,c){for(var d=[],f=2;f<arguments.length;++f)d[f-2]=arguments[f];if(!a)throw Error(2>arguments.length?"invalid state":na.apply(ma,[].concat([b],ja(d))));}
function qa(a,b,c){for(var d=[],f=2;f<arguments.length;++f)d[f-2]=arguments[f];if(null==a)throw Error(2>arguments.length?"argument is null":na.apply(ma,[].concat([b],ja(d))));return a}function na(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];var f=0;return a.replace(/\{}/g,function(){return f<c.length?c[f++]:"{}"})};function v(a,b){if(!a)throw new TypeError("Cannot adopt constructor "+a);if("object"!==typeof b)throw new TypeError("Cannot adopt non-object value "+b);if(null===b)throw new TypeError("Cannot adopt null value");return Object.create(a.prototype,ra(b))}function ra(a){var b=Object.create(null);Object.keys(a).forEach(function(c){b[c]={value:a[c],writable:!0,enumerable:!0,configurable:!0}});return b};function sa(a){this.type=a}sa.prototype.required=function(a,b){b=b[a];if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};sa.prototype.optional=function(a,b){b=b[a];if(null!=b&&typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
sa.prototype.ca=function(a,b){b=b[a];if(null!=b)if(Array.isArray(b))for(a=0;a<b.length;a++)this.required(String(a),b);else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var w=new sa("string"),ta=new sa("boolean"),ua=new sa("number"),va=new sa("object");function wa(a){if(null==a||"object"!=typeof a)throw new TypeError("expected an object, found: "+a);return a}function x(a,b){return ua.optional(a,b)||0}
function y(a,b){return ua.optional(a,b)}function z(a,b){return w.required(a,b)}function B(a,b){return w.optional(a,b)}function D(a,b){return ta.optional(a,b)||!1}function E(a,b){return ta.optional(a,b)}function F(a,b,c){return a(va.required(b,c))}function G(a,b,c){return(b=va.optional(b,c))?a(b):b}function H(a,b,c){return(b=va.ca(b,c))?b.map(a):b}function I(a,b,c){return a(b,w.required(b,c))}function J(a,b,c){c=w.optional(b,c);return null!=c?a(b,c):c}
function xa(a,b,c){c=w.ca(b,c);return null!=c?c.map(a.bind(null,b)):c}function ya(a,b,c,d){d=d[c];if(null==d)return d;if("object"!==typeof d)throw new TypeError('expected map for property "'+c+'", found: '+JSON.stringify(d));for(var f=new Map,g=n(Object.keys(d)),h=g.next();!h.done;h=g.next())h=h.value,f.set(a(c,h),b(c,h,d));return f}function za(a,b){return b}
function Aa(a,b,c,d){c=d[c];if(null==c||"object"!==typeof c)throw new TypeError('expected object value in property "'+b+'", found: '+JSON.stringify(c));return a(c)}function Ba(a,b,c){b=c[b];if("string"!==typeof b)throw new TypeError('expected string value in property "'+a+'", found: '+JSON.stringify(b));return b}function Da(a){this.type=a}
Da.prototype.required=function(a,b){if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};Da.prototype.optional=function(a,b){if(null!=b){if(typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b}};
Da.prototype.ca=function(a,b){if(Array.isArray(b)){if(0==b.length)return;for(var c=0;c<b.length;c++)this.required(a+"["+String(c)+"]",b[c])}else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var K=new Da("string"),Ea=new Da("boolean"),L=new Da("number"),M=new Da("object");function N(a,b){return 0!==b?L.required(a,b):void 0}function O(a,b){return K.optional(a,b)}function Fa(a,b,c){return M.optional(b,c?a(c):null)}
function Ga(a,b,c){return K.required(b,a(b,c))}function Ha(a,b){return K.optional("status",b?a("status",b):null)}function Ia(a,b,c){if(null==c||"object"!==typeof c)throw new TypeError('expected object value in property "'+b+'", found: '+JSON.stringify(c));return a(c)};function Ja(a,b){switch(b){case "THUMBNAIL":return"THUMBNAIL";case "THUMBNAIL_LARGE":return"THUMBNAIL_LARGE";case "SCREEN":return"SCREEN";case "PRINT":return"PRINT";case "ORIGINAL":return"ORIGINAL";default:throw new TypeError('expected MediaQuality for property "'+a+'", found: '+JSON.stringify(b));}}
function Ka(a,b){switch(b){case "RECOLORABLE":return"RECOLORABLE";case "BACKGROUND_R":return"BACKGROUND_R";case "BACKGROUND_G":return"BACKGROUND_G";case "BACKGROUND_B":return"BACKGROUND_B";case "BACKGROUND_A":return"BACKGROUND_A";default:throw new TypeError('expected SpritesheetLayerType for property "'+a+'", found: '+JSON.stringify(b));}}function La(a){this.id=a.id;this.version=a.version}La.prototype.j=function(){return this.id};La.prototype.getVersion=function(){return this.version};
function Ma(a){return new La({id:z("id",a),version:x("version",a)})}function Na(a){this.Hi=a.Hi;this.Gi=a.Gi;this.Fh=a.Fh;this.ai=a.ai||[]}function Oa(a){return new Na({Hi:x("spritesWide",a),Gi:x("spritesHigh",a),Fh:D("fullyRecolorable",a),ai:H(Pa,"layers",a)})}function Qa(a){this.type=a.type;this.$h=a.$h;this.color=a.color}Qa.prototype.fa=function(){return this.type};function Pa(a){return new Qa({type:I(Ka,"type",a),$h:y("layerIndex",a),color:B("color",a)})};function Ra(a,b){switch(b){case "MEMBER":return"MEMBER";case "DESIGNER":return"DESIGNER";case "ADMIN":return"ADMIN";case "OWNER":return"OWNER";default:throw new TypeError('expected BrandUserRole for property "'+a+'", found: '+JSON.stringify(b));}}function Sa(a,b){switch(b){case "PENDING":return"PENDING";case "SUCCEEDED":return"SUCCEEDED";case "FAILED":return"FAILED";default:throw new TypeError('expected AvatarBundleStatus for property "'+a+'", found: '+JSON.stringify(b));}}
function Ta(a,b){switch(b){case "PENDING":return"PENDING";case "SUCCEEDED":return"SUCCEEDED";case "FAILED":return"FAILED";default:throw new TypeError('expected AvatarBundleStatus for property "'+a+'", found: '+JSON.stringify(b));}}
function Ua(a,b){switch(b){case "AD":return"AD";case "AE":return"AE";case "AF":return"AF";case "AG":return"AG";case "AI":return"AI";case "AL":return"AL";case "AM":return"AM";case "AO":return"AO";case "AQ":return"AQ";case "AR":return"AR";case "AS":return"AS";case "AT":return"AT";case "AU":return"AU";case "AW":return"AW";case "AX":return"AX";case "AZ":return"AZ";case "BA":return"BA";case "BB":return"BB";case "BD":return"BD";case "BE":return"BE";case "BF":return"BF";case "BG":return"BG";case "BH":return"BH";
case "BI":return"BI";case "BJ":return"BJ";case "BL":return"BL";case "BM":return"BM";case "BN":return"BN";case "BO":return"BO";case "BQ":return"BQ";case "BR":return"BR";case "BS":return"BS";case "BT":return"BT";case "BV":return"BV";case "BW":return"BW";case "BY":return"BY";case "BZ":return"BZ";case "CA":return"CA";case "CC":return"CC";case "CD":return"CD";case "CF":return"CF";case "CG":return"CG";case "CH":return"CH";case "CI":return"CI";case "CK":return"CK";case "CL":return"CL";case "CM":return"CM";
case "CN":return"CN";case "CO":return"CO";case "CR":return"CR";case "CU":return"CU";case "CV":return"CV";case "CW":return"CW";case "CX":return"CX";case "CY":return"CY";case "CZ":return"CZ";case "DE":return"DE";case "DJ":return"DJ";case "DK":return"DK";case "DM":return"DM";case "DO":return"DO";case "DZ":return"DZ";case "EC":return"EC";case "EE":return"EE";case "EG":return"EG";case "EH":return"EH";case "ER":return"ER";case "ES":return"ES";case "ET":return"ET";case "FI":return"FI";case "FJ":return"FJ";
case "FK":return"FK";case "FM":return"FM";case "FO":return"FO";case "FR":return"FR";case "GA":return"GA";case "GB":return"GB";case "GD":return"GD";case "GE":return"GE";case "GF":return"GF";case "GG":return"GG";case "GH":return"GH";case "GI":return"GI";case "GL":return"GL";case "GM":return"GM";case "GN":return"GN";case "GP":return"GP";case "GQ":return"GQ";case "GR":return"GR";case "GS":return"GS";case "GT":return"GT";case "GU":return"GU";case "GW":return"GW";case "GY":return"GY";case "HK":return"HK";
case "HM":return"HM";case "HN":return"HN";case "HR":return"HR";case "HT":return"HT";case "HU":return"HU";case "ID":return"ID";case "IE":return"IE";case "IL":return"IL";case "IM":return"IM";case "IN":return"IN";case "IO":return"IO";case "IQ":return"IQ";case "IR":return"IR";case "IS":return"IS";case "IT":return"IT";case "JE":return"JE";case "JM":return"JM";case "JO":return"JO";case "JP":return"JP";case "KE":return"KE";case "KG":return"KG";case "KH":return"KH";case "KI":return"KI";case "KM":return"KM";
case "KN":return"KN";case "KP":return"KP";case "KR":return"KR";case "KW":return"KW";case "KY":return"KY";case "KZ":return"KZ";case "LA":return"LA";case "LB":return"LB";case "LC":return"LC";case "LI":return"LI";case "LK":return"LK";case "LR":return"LR";case "LS":return"LS";case "LT":return"LT";case "LU":return"LU";case "LV":return"LV";case "LY":return"LY";case "MA":return"MA";case "MC":return"MC";case "MD":return"MD";case "ME":return"ME";case "MF":return"MF";case "MG":return"MG";case "MH":return"MH";
case "MK":return"MK";case "ML":return"ML";case "MM":return"MM";case "MN":return"MN";case "MO":return"MO";case "MP":return"MP";case "MQ":return"MQ";case "MR":return"MR";case "MS":return"MS";case "MT":return"MT";case "MU":return"MU";case "MV":return"MV";case "MW":return"MW";case "MX":return"MX";case "MY":return"MY";case "MZ":return"MZ";case "NA":return"NA";case "NC":return"NC";case "NE":return"NE";case "NF":return"NF";case "NG":return"NG";case "NI":return"NI";case "NL":return"NL";case "NO":return"NO";
case "NP":return"NP";case "NR":return"NR";case "NU":return"NU";case "NZ":return"NZ";case "OM":return"OM";case "PA":return"PA";case "PE":return"PE";case "PF":return"PF";case "PG":return"PG";case "PH":return"PH";case "PK":return"PK";case "PL":return"PL";case "PM":return"PM";case "PN":return"PN";case "PR":return"PR";case "PS":return"PS";case "PT":return"PT";case "PW":return"PW";case "PY":return"PY";case "QA":return"QA";case "RE":return"RE";case "RO":return"RO";case "RS":return"RS";case "RU":return"RU";
case "RW":return"RW";case "SA":return"SA";case "SB":return"SB";case "SC":return"SC";case "SD":return"SD";case "SE":return"SE";case "SG":return"SG";case "SH":return"SH";case "SI":return"SI";case "SJ":return"SJ";case "SK":return"SK";case "SL":return"SL";case "SM":return"SM";case "SN":return"SN";case "SO":return"SO";case "SR":return"SR";case "SS":return"SS";case "ST":return"ST";case "SV":return"SV";case "SX":return"SX";case "SY":return"SY";case "SZ":return"SZ";case "TC":return"TC";case "TD":return"TD";
case "TF":return"TF";case "TG":return"TG";case "TH":return"TH";case "TJ":return"TJ";case "TK":return"TK";case "TL":return"TL";case "TM":return"TM";case "TN":return"TN";case "TO":return"TO";case "TR":return"TR";case "TT":return"TT";case "TV":return"TV";case "TW":return"TW";case "TZ":return"TZ";case "UA":return"UA";case "UG":return"UG";case "UM":return"UM";case "US":return"US";case "UY":return"UY";case "UZ":return"UZ";case "VA":return"VA";case "VC":return"VC";case "VE":return"VE";case "VG":return"VG";
case "VI":return"VI";case "VN":return"VN";case "VU":return"VU";case "WF":return"WF";case "WS":return"WS";case "YE":return"YE";case "YT":return"YT";case "ZA":return"ZA";case "ZM":return"ZM";case "ZW":return"ZW";case "ZZ":return"ZZ";default:throw new TypeError('expected CountryCode for property "'+a+'", found: '+JSON.stringify(b));}}
function Va(a,b){switch(b){case "ROOT":return"ROOT";case "USER":return"USER";case "REVIEWER":return"REVIEWER";case "ETCHER":return"ETCHER";case "SUPPORT":return"SUPPORT";case "THIRD_PARTY":return"THIRD_PARTY";case "FUSION":return"FUSION";case "MARKETPLACE_ADMIN":return"MARKETPLACE_ADMIN";default:throw new TypeError('expected UserRole for property "'+a+'", found: '+JSON.stringify(b));}}function Wa(a){this.version=a.version;this.sizes=a.sizes||new Map;this.status=a.status}Wa.prototype.getVersion=function(){return this.version};
function Xa(a){var b=N("version",a.version),c=a.sizes,d=Ia.bind(null,Ya);if(!(c instanceof Map))throw new TypeError('expected Map for property "sizes", found: '+JSON.stringify(c));for(var f={},g=n(c.keys()),h=g.next();!h.done;h=g.next()){h=h.value;if("string"!==typeof h)throw new TypeError('expected string key in property "sizes", found: '+JSON.stringify(h));f[h]=d("sizes",c.get(h))}return{version:b,sizes:f,status:Ha(Sa,a.status)}}
function Za(a){var b=x("version",a),c;c=ya(za,Aa.bind(null,$a),"sizes",a);return new Wa({version:b,sizes:c,status:J(Ta,"status",a)})}function ab(a){this.size=a.size;this.width=a.width;this.height=a.height;this.url=a.url}ab.prototype.pa=function(){return this.url};function Ya(a){return{size:N("size",a.size),width:N("width",a.width),height:N("height",a.height),url:K.required("url",a.url)}}function $a(a){return new ab({size:x("size",a),width:x("width",a),height:x("height",a),url:z("url",a)})}
function bb(a){this.id=a.id;this.username=a.username;this.yc=a.yc;this.displayName=a.displayName;this.Hf=a.Hf;this.Eb=a.Eb;this.O=a.O;this.Rb=a.Rb;this.Ke=a.Ke||[];this.locale=a.locale;this.sf=a.sf}e=bb.prototype;e.j=function(){return this.id};e.he=function(){return this.username};e.Ff=function(){return this.yc};e.Oa=function(){return this.displayName};e.Ih=function(){return this.Rb};e.Gf=function(){return this.Ke};e.Lh=function(){return this.locale};
function cb(a){return new bb({id:z("id",a),username:B("username",a),yc:B("personalBrand",a),displayName:B("displayName",a),Hf:B("homepage",a),Eb:B("city",a),O:J(Ua,"countryCode",a),Rb:F(Za,"avatar",a),Ke:xa(Va,"roles",a),locale:z("locale",a),sf:D("deactivated",a)})}e.Oh=function(){var a=this.Rb&&this.Rb.sizes.get("50");return a&&a.url||null};function db(a){a=void 0===a?{}:a;this.id=a.id||"";this.displayName=a.displayName||null;this.brandname=a.ll||null;this.personal=a.Lb||!1;this.contributor=a.ml||!1;this.layoutContributor=a.sl||!1;this.thirdParty=a.xl||!1;this.brandColor=a.Cb||null}db.prototype.j=function(){return this.id};db.prototype.Oa=function(){return this.displayName};function eb(a){return a?v(db,a):null}
function fb(a){a=void 0===a?{}:a;this.id=a.id||"UNKNOWN_USER_ID";this.username=a.username||"";this.personalBrand=a.yc||"";this.displayName=a.displayName||"";this.homepage=a.Hf||null;this.city=a.Eb||null;this.countryCode=a.O||null;this.avatar=a.Rb||null;this.roles=a.Ke||[];this.deactivated=a.sf||!1;this.locale=a.locale||"en"}e=fb.prototype;e.j=function(){return this.id};e.he=function(){return this.username};e.Ff=function(){return this.personalBrand};e.Oa=function(){return this.displayName};e.Gf=function(){return this.roles};
function gb(a){if(!a)return null;a=v(fb,a);a.avatar&&(a.avatar=Za(a.avatar));return a}function hb(a){return gb(a)}e.Ui=function(){return cb(Object.assign({},this,{avatar:this.avatar&&Xa(this.avatar)}))};e.ee=function(a){var b=this.avatar;return b&&(a=b.sizes.get(a))?a.pa():null};e.Oh=function(){return this.ee("50")};Za({version:0,sizes:{50:{size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"},200:{size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"}}});
function ib(){}function jb(a){return Object.freeze(v(ib,a))}function kb(){}kb.prototype.va=function(){return this.continuation};kb.prototype.getCount=function(){return this.count};function lb(a){return Object.freeze(v(kb,a))}function mb(a){a=void 0===a?{}:a;this.user=a.user;this.email=a.email;this.role=a.Je}mb.prototype.ha=function(){return this.user};function nb(a){a=v(mb,a);a.user=gb(a.user);return Object.freeze(a)}function ob(){}e=ob.prototype;e.Cg=function(a){this.brand=a;return this};e.K=function(){return this.brand};
e.gj=function(a){this.continuation=a;return this};e.va=function(){return this.continuation};e.hj=function(a){this.limit=a;return this};e.kc=function(){return this.limit};function pb(){var a=new ob;a.countOnly=!0;return a}function qb(a){a=void 0===a?{}:a;this.members=a.tl}qb.prototype.va=function(){return this.continuation};qb.prototype.getCount=function(){return this.count};function rb(a){a=v(qb,a);a.members&&(a.members=a.members.map(nb));return Object.freeze(a)}function sb(){}sb.prototype.K=function(){return this.brand};
function tb(a){a=v(sb,a);a.members&&(a.members=a.members.map(nb));return Object.freeze(a)}function ub(){}function vb(a){return Object.freeze(v(ub,a))};function wb(a){this.Xc=a.Xc;this.Yc=a.Yc;this.user=a.user;this.i=a.i;this.Lb=a.Lb;this.Wb=a.Wb;this.ib=a.ib;this.O=a.O;this.Nc=a.Nc}function xb(a){var b=z("experience",a),c;c=ya(za,Ba,"experiments",a);return new wb({Xc:b,Yc:c||new Map,user:B("user",a)||null,i:B("brand",a)||null,Lb:E("personal",a)||null,Wb:y("cohort",a)||null,ib:B("tier",a)||null,O:B("countryCode",a)||null,Nc:B("userLocale",a)||null})};function yb(a){this.config=a;this.nl=this.nh=null;this.Be=[];this.ready=!1}function zb(a,b){var c=Object.assign({},b);a.nh&&(c.design=a.nh);c.experience=a.config.Xc;a.config.Yc.forEach(function(a,b){c["Experiment:"+b]=a});a.config.i&&(c.brand=a.config.i);null!=a.config.Lb&&(c.personal=a.config.Lb);null!=a.config.Wb&&(c.cohort=a.config.Wb);a.config.ib&&(c.tier=a.config.ib);null!=a.config.O&&(c.country_code=a.config.O);null!=a.config.Nc&&(c.locale=a.config.Nc);Ab(c);return c}
function Ab(a){try{var b=window.crypto||window.msCrypto,c=new Uint8Array(16);b.getRandomValues(c);a.insert_id=btoa(String.fromCharCode.apply(null,c))}catch(d){}}
function Bb(a,b){var c=window.lastUserTraits||Cb(new Db),d=Fb(new Db,"__user",a);a=a!==c.get("__user");if(b&&Gb(b)){for(var f=n(b),g=f.next();!g.done;g=f.next()){var h=n(g.value),g=h.next().value,h=h.next().value;a=a||h!==c.get(g)}c=n(b.keys());for(f=c.next();!f.done;f=c.next())f=f.value,Fb(d,f,b.get(f))}a&&(window.lastUserTraits=Cb(d));return a}
function Hb(a,b){var c=window.lastUserTraits||Cb(new Db);a=Fb(new Db,"__user",a);if(c&&Gb(c))for(var d=n(c.keys()),f=d.next();!f.done;f=d.next())f=f.value,"__user"!==f&&Fb(a,f,c.get(f));if(b&&Gb(b))for(c=n(b.keys()),f=c.next();!f.done;f=c.next())d=f.value,Fb(a,d,b.get(d));window.lastUserTraits=Cb(a)}function Gb(a){u(a instanceof Map,"Could not convert traits to an object; traits value not considered a Map instance");return!0}
function Ib(a,b,c,d,f,g){var h={};h.type=b;h.section=c;h.subsection=d;h.location=f;g&&Object.assign(h,g);a.track("button_click",h)}yb.prototype.zoom=function(a,b,c,d,f){this.track("zoom",{type:a,section:b,subsection:c,location:d,value:f})};function Jb(a,b){a.track(b.name,b.$f)}function Kb(a){this.name=a;this.$f={}}function Q(a,b,c){if(a.$f[b])throw Error("duplicated property");a.$f[b]=c;return a}function Db(){this.items=[]}function Fb(a,b,c){a.items.push({key:b,value:c});return a}
function Cb(a){return new Map(a.items.map(function(a){return[a.key,a.value]}))};function Lb(a,b){this.name=a;this.defaultValue=b};function Mb(a){this.values=a||{}}function Nb(){return new Mb(wa(window.cflags))}Mb.prototype.get=function(a){var b;if({}.hasOwnProperty.call(this.values,a.name)){b=this.values[a.name];var c=typeof b;a=typeof a.defaultValue;u(c===a,"Type mismatch: Configured value ({}) deviates from default value type ({})",c,a)}else b=a.defaultValue;return b};function Ob(a){this.F=a}var Pb=new Lb("bg",!1),Qb=new Lb("cd",!1),Rb=new Lb("cf",10),Sb=new Lb("dc",-1),Tb=new Lb("ek",!1),Ub=new Lb("em","NONE");Ob.prototype.vf=function(){return this.F.get(Ub)};function R(a){this.Aj=a.fallback;this.di=a.localePrecedence;this.Pf={};this.u=a.messages;this.wk=this.di[0];this.Ek=!!a.returnKeys}R.prototype.format=function(a,b){if(this.Ek)return[].join.call(arguments,":");var c=Vb(this,a);return c.format.call(c,[].slice.call(arguments,1))};
R.prototype.Hb=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];c=this.format.apply(this,[].concat([a],ja(c.map(function(a){return"number"===typeof a?a:soydata.SanitizedHtml.from(a).getContent()}))));return soydata.VERY_UNSAFE.ordainSanitizedHtml(c)};
function Vb(a,b){if(a.Pf.hasOwnProperty(b))return a.Pf[b];var c=a.wk,d;a.di.some(function(c){d=a.u[c]&&a.u[c][b];return void 0!==d});d||(c=a.Aj,d=a.u[c]&&a.u[c][b]);if(!d)throw Error("Unknown message: "+b);c=new IntlMessageFormat(d,c,Wb);return a.Pf[b]=c}var Wb={number:{currency:{style:"currency",currency:"USD"},integer:{maximumFractionDigits:0},fixed2:{minimumFractionDigits:2,maximumFractionDigits:2}}};function Xb(){this.config=window.cmsg;this.Ca=this.pg=this.D=this.uf=this.Rf=this.v=this.w=this.Ib=this.Sc=this.wf=null}function Yb(a){a.wf||(a.wf=new Zb(a.config));return a.wf}function $b(a){a.Sc||(a.Sc=new ac(a.config));return a.Sc}function bc(a){a.w||(a.w=new cc(a.config));return a.w}function dc(a){a.uf||(a.uf=new ec(a.config));return a.uf}function fc(a){a.D||(a.D=new gc(a.config));return a.D}function hc(a){a.Ca||(a.Ca=new ic(a.config));return a.Ca}function cc(a){R.apply(this,arguments)}p(cc,R);
e=cc.prototype;e.Yb=function(){return this.format("creditCardCreditCardLabel")};e.Tb=function(){return this.format("creditCardBillingAddressLabel")};e.La=function(){return this.format("creditCardCardNumberPlaceholder")};e.Pa=function(){return this.format("creditCardMonthPlaceholder")};e.Qa=function(){return this.format("creditCardYearPlaceholder")};e.Ma=function(){return this.format("creditCardCvcPlaceholder")};function jc(a){return a.format("creditCardRegionPlaceholder")}e.kb=function(){return this.format("creditCardZipCodePlaceholder")};
e.save=function(){return this.format("creditCardSave")};function Zb(a){R.apply(this,arguments)}p(Zb,R);Zb.prototype.qa=function(){return this.format("documentPlaceholderText")};Zb.prototype.Ue=function(){return this.format("documentUntitledDesign")};function kc(a){R.apply(this,arguments)}p(kc,R);kc.prototype.Sd=function(){return this.format("homeSideBarCreateFolder")};function ac(a){R.apply(this,arguments)}p(ac,R);ac.prototype.tc=function(){return this.format("canvaForWorkUpgradeMemberLabel")};
function lc(a){return a.format("canvaForWorkFeatureUpgradePlusIncreaseProductivity")}function mc(a){return a.format("canvaForWorkFeatureUpgradeTemplatesBenefit")}function nc(a){return a.format("canvaForWorkFeatureUpgradeResizeBenefit")}function oc(a){return a.format("canvaForWorkFeatureUpgradeBrandKitBenefit")}function pc(a){return a.format("canvaForWorkFeatureUpgradeFoldersBenefit")}function qc(a){return a.format("canvaForWorkFeatureUpgradeFreeContentBenefit",3E5)}
function rc(a){return a.format("canvaForWorkBundleFeaturePhotoFolders")}function sc(a){return a.format("canvaForWorkBundleFeatureFreePhotos",3E5)}function tc(a){return a.format("canvaForWorkBundleFeatureSaveTemplates")}function uc(a){return a.format("canvaForWorkBundleFeatureMagicResize")}function vc(a){return a.format("canvaForWorkBundleFeatureUploadFonts")}function wc(a){return a.format("canvaForWorkBundleFeatureBrandKit")}
function xc(a){return a.format("canvaForWorkBundleFeatureTransparentBackgrounds")}function yc(a){return a.format("canvaForWorkBundleUpgradeButton")}function zc(a){R.apply(this,arguments)}p(zc,R);e=zc.prototype;e.Mk=function(){return this.format("userMenuSettings")};e.bl=function(){return this.format("userMenuViewProfile")};e.yc=function(){return this.format("userMenuPersonalBrand")};e.signOut=function(){return this.format("userMenuSignOut")};e.Bg=function(){return this.format("userMenuUpgrade")};
function Ac(a){R.apply(this,arguments)}p(Ac,R);Ac.prototype.Ue=function(){return this.format("notificationPopOverUntitledDesign")};function ec(a){R.apply(this,arguments)}p(ec,R);function Bc(a,b){return a.format("designSearchResultCount",b)}function gc(a){R.apply(this,arguments)}p(gc,R);e=gc.prototype;e.Wa=function(){return this.format("designFolderListDefaultName")};e.vc=function(){return this.format("designFolderListNewFolder")};e.lc=function(){return this.format("designFolderListGetMoreFolders")};
e.jc=function(a){return this.format("designFolderListFolderQuotaHint",a)};e.fc=function(){return this.format("designFolderListErrorMessageHtml")};e.Cc=function(){return this.format("designFolderListRetry")};e.rc=function(){return this.format("designFolderListLoadFolders")};function Cc(a){R.apply(this,arguments)}p(Cc,R);function ic(a){R.apply(this,arguments)}p(ic,R);e=ic.prototype;e.Bg=function(a){return this.format("teamBillingSignupUpgrade",a)};e.Kc=function(){return this.format("teamBillingSignupStartTrial")};
e.Dc=function(){return this.format("teamBillingSignupRevertCard")};e.pc=function(){return this.format("teamBillingSignupItemsTitle")};e.Ub=function(){return this.format("teamBillingSignupBillingError")};e.Mc=function(){return this.format("teamBillingSignupTryAgain")};e.ec=function(){return this.format("teamBillingSignupEncryption")};function Dc(a,b){switch(b){case "USER":return"USER";case "BRAND":return"BRAND";case "EXTENSION":return"EXTENSION";case "DEFAULT":return"DEFAULT";default:throw new TypeError('expected AccessControlListActorType for property "'+a+'", found: '+JSON.stringify(b));}}
function Ec(a,b){switch(b){case "USER":return"USER";case "BRAND":return"BRAND";case "EXTENSION":return"EXTENSION";case "DEFAULT":return"DEFAULT";default:throw new TypeError('expected AccessControlListActorType for property "'+a+'", found: '+JSON.stringify(b));}}
function Fc(a,b){switch(b){case "NONE":return"NONE";case "OWNER":return"OWNER";case "VIEWER":return"VIEWER";case "REMIXER":return"REMIXER";case "EDITOR":return"EDITOR";default:throw new TypeError('expected AccessControlListRole for property "'+a+'", found: '+JSON.stringify(b));}}
function Gc(a,b){switch(b){case "NONE":return"NONE";case "OWNER":return"OWNER";case "VIEWER":return"VIEWER";case "REMIXER":return"REMIXER";case "EDITOR":return"EDITOR";default:throw new TypeError('expected AccessControlListRole for property "'+a+'", found: '+JSON.stringify(b));}}function Hc(a,b){switch(b){case "MANUAL":return"MANUAL";case "FOLDER":return"FOLDER";default:throw new TypeError('expected AccessControlListOriginType for property "'+a+'", found: '+JSON.stringify(b));}}
function Ic(a,b){switch(b){case "MANUAL":return"MANUAL";case "FOLDER":return"FOLDER";default:throw new TypeError('expected AccessControlListOriginType for property "'+a+'", found: '+JSON.stringify(b));}}function Jc(a,b){switch(b){case "CENTIMETERS":return"CENTIMETERS";case "INCHES":return"INCHES";case "MILLIMETERS":return"MILLIMETERS";case "PIXELS":return"PIXELS";default:throw new TypeError('expected Units for property "'+a+'", found: '+JSON.stringify(b));}}
function Kc(a,b){switch(b){case "CENTIMETERS":return"CENTIMETERS";case "INCHES":return"INCHES";case "MILLIMETERS":return"MILLIMETERS";case "PIXELS":return"PIXELS";default:throw new TypeError('expected Units for property "'+a+'", found: '+JSON.stringify(b));}}
function Lc(a,b){switch(b){case "EDITING_AFFECTED":return"EDITING_AFFECTED";case "RENDERING_AFFECTED":return"RENDERING_AFFECTED";case "UNREPRESENTABLE":return"UNREPRESENTABLE";default:throw new TypeError('expected ConversionLoss for property "'+a+'", found: '+JSON.stringify(b));}}function Mc(a){this.rules=a.rules||[];this.version=a.version;this.Uf=a.Uf}Mc.prototype.getVersion=function(){return this.version};
function Nc(a){return{rules:M.ca("rules",a.rules.map(Oc)),version:N("version",a.version),owner:M.required("owner",Pc(a.Uf))}}function Qc(a){return new Mc({rules:H(Rc,"rules",a),version:x("version",a),Uf:F(Sc,"owner",a)})}function Tc(a){this.type=a.type;this.Zf=a.Zf;this.Je=a.Je;this.origin=a.origin;this.timestamp=a.timestamp}Tc.prototype.fa=function(){return this.type};
function Oc(a){return{type:Ga(Dc,"type",a.type),principal:Fa(Pc,"principal",a.Zf),role:Ga(Fc,"role",a.Je),origin:Fa(Uc,"origin",a.origin),timestamp:L.optional("timestamp",a.timestamp)}}function Rc(a){return new Tc({type:I(Ec,"type",a),Zf:G(Sc,"principal",a),Je:I(Gc,"role",a),origin:G(Vc,"origin",a),timestamp:y("timestamp",a)})}function Wc(a){this.i=a.i;this.user=a.user}Wc.prototype.K=function(){return this.i};Wc.prototype.ha=function(){return this.user};
function Pc(a){return{brand:K.required("brand",a.i),user:O("user",a.user)}}function Sc(a){return new Wc({i:z("brand",a),user:B("user",a)})}function Xc(a){this.type=a.type;this.id=a.id}Xc.prototype.fa=function(){return this.type};Xc.prototype.j=function(){return this.id};function Uc(a){return{type:Ga(Hc,"type",a.type),id:O("id",a.id)}}function Vc(a){return new Xc({type:I(Ic,"type",a),id:B("id",a)})}function Yc(a){this.default=a.default;this.view=a.view;this.ag=a.ag;this.yf=a.yf}
function Zc(a){return{"default":O("default",a.default),view:O("view",a.view),remix:O("remix",a.ag),edit:O("edit",a.yf)}}function $c(a){return new Yc({default:B("default",a),view:B("view",a),ag:B("remix",a),yf:B("edit",a)})}function ad(a){this.type=a.type}
function bd(a){switch(a.type){case "REFERENCE":return{type:"REFERENCE",id:K.required("id",a.id),version:N("version",a.version)};case "INLINE":return{type:"INLINE",width:N("width",a.width),height:N("height",a.height),units:Ga(Jc,"units",a.units)};default:throw Error();}}
function cd(a){switch(a.type){case "REFERENCE":return u("REFERENCE"===a.type),new dd({id:z("id",a),version:x("version",a)});case "INLINE":return u("INLINE"===a.type),new ed({width:x("width",a),height:x("height",a),units:I(Kc,"units",a)});default:throw Error("unknown case: "+a.type);}}function dd(a){this.type="REFERENCE";this.id=a.id;this.version=a.version}p(dd,ad);dd.prototype.j=function(){return this.id};dd.prototype.getVersion=function(){return this.version};
function ed(a){this.type="INLINE";this.width=a.width;this.height=a.height;this.units=a.units}p(ed,ad);function fd(a){this.id=a.id;this.version=a.version}fd.prototype.j=function(){return this.id};fd.prototype.getVersion=function(){return this.version};function hd(a){return{id:K.required("id",a.id),version:N("version",a.version)}}function id(a){return new fd({id:z("id",a),version:x("version",a)})}
function jd(a){this.id=a.id;this.Ba=a.Ba;this.Ta=a.Ta;this.origin=a.origin;this.ic=a.ic;this.tags=a.tags||[];this.Ra=a.Ra;this.ac=a.ac;this.version=a.version;this.timestamp=a.timestamp}jd.prototype.j=function(){return this.id};jd.prototype.cd=function(){return this.Ra};jd.prototype.getVersion=function(){return this.version};
function kd(a){return{id:K.required("id",a.id),owningBrand:K.required("owningBrand",a.Ba),creationDate:N("creationDate",a.Ta),origin:Fa(hd,"origin",a.origin),extensions:M.required("extensions",Zc(a.ic)),tags:K.ca("tags",a.tags),acl:Fa(Nc,"acl",a.Ra),draft:M.required("draft",ld(a.ac)),version:N("version",a.version),timestamp:L.optional("timestamp",a.timestamp)}}
function md(a){return new jd({id:z("id",a),Ba:z("owningBrand",a),Ta:x("creationDate",a),origin:G(id,"origin",a),ic:F($c,"extensions",a),tags:w.ca("tags",a),Ra:G(Qc,"acl",a),ac:F(nd,"draft",a),version:x("version",a),timestamp:y("timestamp",a)})}function od(a){this.content=a.content;this.version=a.version;this.timestamp=a.timestamp;this.da=a.da;this.xc=a.xc;this.nc=a.nc;this.Qb=a.Qb}od.prototype.getContent=function(){return this.content};od.prototype.getVersion=function(){return this.version};
od.prototype.getSession=function(){return this.da};function ld(a){return{content:M.required("content",pd(a.content)),version:N("version",a.version),timestamp:N("timestamp",a.timestamp),session:L.optional("session",a.da),pageCount:N("pageCount",a.xc),imageSets:M.required("imageSets",qd(a.nc)),associatedMedia:O("associatedMedia",a.Qb)}}
function nd(a){return new od({content:F(rd,"content",a),version:x("version",a),timestamp:x("timestamp",a),da:y("session",a),xc:x("pageCount",a),nc:F(sd,"imageSets",a),Qb:B("associatedMedia",a)})}function td(a){this.sb=a.sb;this.title=a.title;this.description=a.description;this.qc=a.qc||[];this.doctype=a.doctype}td.prototype.ob=function(){return this.title};
function pd(a){return{layout:O("layout",a.sb),title:O("title",a.title),description:O("description",a.description),keywords:K.ca("keywords",a.qc),doctype:M.required("doctype",bd(a.doctype))}}function rd(a){return new td({sb:B("layout",a),title:B("title",a),description:B("description",a),qc:w.ca("keywords",a),doctype:F(cd,"doctype",a)})}function ud(a){this.hb=a.hb;this.Yf=a.Yf}ud.prototype.ge=function(){return this.hb};
function qd(a){return{thumbnail:M.required("thumbnail",vd(a.hb)),preview:Fa(vd,"preview",a.Yf)}}function sd(a){return new ud({hb:F(wd,"thumbnail",a),Yf:G(wd,"preview",a)})}function xd(a){this.height=a.height;this.width=a.width;this.version=a.version;this.images=a.images||[]}xd.prototype.getVersion=function(){return this.version};function vd(a){return{height:N("height",a.height),width:N("width",a.width),version:N("version",a.version),images:M.ca("images",a.images.map(yd))}}
function wd(a){return new xd({height:x("height",a),width:x("width",a),version:x("version",a),images:H(zd,"images",a)})}function Ad(a){this.bucket=a.bucket;this.key=a.key;this.page=a.page;this.url=a.url}Ad.prototype.getKey=function(){return this.key};Ad.prototype.pa=function(){return this.url};function yd(a){return{bucket:K.required("bucket",a.bucket),key:K.required("key",a.key),page:N("page",a.page),url:O("url",a.url)}}
function zd(a){return new Ad({bucket:z("bucket",a),key:z("key",a),page:x("page",a),url:B("url",a)})}function Bd(a){this.width=a.width;this.height=a.height;this.url=a.url}Bd.prototype.pa=function(){return this.url};function Cd(a){return new Bd({width:y("width",a),height:y("height",a),url:z("url",a)})}function S(a){this.type=a.type;this.id=a.id;this.version=a.version}S.prototype.j=function(){return this.id};S.prototype.getVersion=function(){return this.version};
function Dd(a){switch(a.type){case "RASTER":return u("RASTER"===a.type),new Ed({id:z("id",a),version:x("version",a),files:H(Fd,"files",a)});case "VECTOR":return u("VECTOR"===a.type),new Gd({id:z("id",a),version:x("version",a),files:H(Fd,"files",a)});case "DESIGN":return u("DESIGN"===a.type),new Hd({id:z("id",a),version:x("version",a),files:H(Fd,"files",a)});case "FONT":return u("FONT"===a.type),new Id({id:z("id",a),version:x("version",a),files:H(Jd,"files",a)});case "ELEMENT_GROUP":return u("ELEMENT_GROUP"===
a.type),new Kd({id:z("id",a),version:x("version",a),files:H(Fd,"files",a)});case "UNKNOWN":return u("UNKNOWN"===a.type),new Ld({id:z("id",a),version:x("version",a),files:H(Md,"files",a)});default:throw Error("unknown case: "+a.type);}}function Ed(a){S.call(this,{type:"RASTER",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Ed,S);function Gd(a){S.call(this,{type:"VECTOR",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Gd,S);
function Hd(a){S.call(this,{type:"DESIGN",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Hd,S);function Id(a){S.call(this,{type:"FONT",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Id,S);function Kd(a){S.call(this,{type:"ELEMENT_GROUP",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Kd,S);function Ld(a){S.call(this,{type:"UNKNOWN",id:a.id,version:a.version,files:a.files});this.files=a.files||[]}p(Ld,S);
function Nd(a){this.url=a.url;this.width=a.width;this.height=a.height;this.Md=a.Md;this.Ad=a.Ad}Nd.prototype.pa=function(){return this.url};function Fd(a){return new Nd({url:z("url",a),width:x("width",a),height:x("height",a),Md:D("watermarked",a),Ad:J(Ja,"quality",a)})}function Od(a){this.url=a.url}Od.prototype.pa=function(){return this.url};function Jd(a){return new Od({url:z("url",a)})}function Pd(a){this.url=a.url;this.width=a.width;this.height=a.height;this.Md=a.Md;this.Ad=a.Ad}
Pd.prototype.pa=function(){return this.url};function Md(a){return new Pd({url:z("url",a),width:y("width",a),height:y("height",a),Md:E("watermarked",a),Ad:J(Ja,"quality",a)})}function Qd(a){this.query=a.query}function Rd(a){this.id=a.id;this.Wi=a.Wi;this.xb=a.xb||[];this.Fa=a.Fa}Rd.prototype.j=function(){return this.id};Rd.prototype.Nh=function(){return this.xb};Rd.prototype.va=function(){return this.Fa};
function Sd(a){return new Rd({id:z("id",a),Wi:x("totalHits",a),xb:H(Td,"results",a),Fa:B("continuation",a)})}function Ud(a){this.Ci=a.Ci;this.zi=a.zi;this.id=a.id;this.title=a.title;this.description=a.description;this.Ba=a.Ba;this.Ta=a.Ta;this.Yi=a.Yi;this.hb=a.hb;this.$b=a.$b}Ud.prototype.j=function(){return this.id};Ud.prototype.ob=function(){return this.title};Ud.prototype.ge=function(){return this.hb};Ud.prototype.Ef=function(){return this.$b};
function Td(a){return new Ud({Ci:z("searchId",a),zi:x("rank",a),id:z("id",a),title:z("title",a),description:B("description",a),Ba:z("owningBrand",a),Ta:x("creationDate",a),Yi:D("trashed",a),hb:F(Cd,"thumbnail",a),$b:z("designTypeDisplayName",a)})};function Vd(a,b){switch(b){case "MINIMIZE_HEIGHT":return"MINIMIZE_HEIGHT";case "MAXIMIZE_FONT_SIZE":return"MAXIMIZE_FONT_SIZE";default:throw new TypeError('expected ReflowMode for property "'+a+'", found: '+JSON.stringify(b));}}function Wd(a,b){switch(b){case "rows":return"COLUMN";case "columns":return"ROW";case "item":return"ITEM";default:throw new TypeError('expected GridStructureType for property "'+a+'", found: '+JSON.stringify(b));}}
function Xd(a,b){switch(b){case "NON_ZERO":return"NON_ZERO";case "EVEN_ODD":return"EVEN_ODD";default:throw new TypeError('expected ShapeElementPathFillRule for property "'+a+'", found: '+JSON.stringify(b));}}function Yd(a,b){switch(b){case "CHART":return"CHART";default:throw new TypeError('expected GroupGeneratorType for property "'+a+'", found: '+JSON.stringify(b));}}
function Zd(a,b){switch(b){case "BAR":return"BAR";case "PIE":return"PIE";case "LINE":return"LINE";case "DONUT":return"DONUT";default:throw new TypeError('expected ChartType for property "'+a+'", found: '+JSON.stringify(b));}}function $d(a,b){switch(b){case "INTERPOLATE":return"INTERPOLATE";case "PALETTE":return"PALETTE";default:throw new TypeError('expected ColoringType for property "'+a+'", found: '+JSON.stringify(b));}}
function ae(a,b){switch(b){case "RGB":return"RGB";case "HSV":return"HSV";case "HSL":return"HSL";case "LAB":return"LAB";case "HCL":return"HCL";default:throw new TypeError('expected ColorSpace for property "'+a+'", found: '+JSON.stringify(b));}}function be(a,b){switch(b){case "CANVA":return"CANVA";case "FACEBOOK":return"FACEBOOK";case "LAYOUT":return"LAYOUT";case "DOCUMENT":return"DOCUMENT";default:throw new TypeError('expected ElementOriginType for property "'+a+'", found: '+JSON.stringify(b));}}
function ce(a){this.fontFamily=a.fontFamily;this.fontSize=a.fontSize;this.bold=a.bold;this.italic=a.italic;this.rb=a.rb;this.letterSpacing=a.letterSpacing;this.lineHeight=a.lineHeight;this.color=a.color}function de(a){return new ce({fontFamily:B("fontFamily",a),fontSize:y("fontSize",a),bold:E("bold",a),italic:E("italic",a),rb:B("justification",a),letterSpacing:y("letterSpacing",a),lineHeight:y("lineHeight",a),color:B("color",a)})}function ee(a){this.title=a.title;this.Mi=a.Mi;this.body=a.body}
ee.prototype.ob=function(){return this.title};function fe(a){return new ee({title:G(de,"title",a),Mi:G(de,"subtitle",a),body:G(de,"body",a)})}function ge(a){this.sb=a.sb;this.title=a.title;this.description=a.description;this.qc=a.qc||[];this.Rg=a.Rg;this.kh=a.kh;this.Ha=a.Ha||[];this.doctype=a.doctype}ge.prototype.ob=function(){return this.title};
function he(a){return new ge({sb:z("layout",a),title:B("title",a),description:B("description",a),qc:w.ca("keywords",a),Rg:G(fe,"canvaDefaultFonts",a),kh:G(fe,"defaultFonts",a),Ha:H(ie,"pages",a),doctype:F(cd,"doctype",a)})}function je(a){this.height=a.height;this.width=a.width;this.rh=a.rh;this.elements=a.elements||[];this.type=a.type}je.prototype.fa=function(){return this.type};
function ie(a){return new je({height:x("height",a),width:x("width",a),rh:y("dpi",a),elements:H(ke,"elements",a),type:B("type",a)})}
function le(a){this.type=a.type;this.top=a.top;this.left=a.left;this.height=a.height;this.width=a.width;this.Xi=a.Xi;this.rotation=a.rotation;this.$c=a.$c;this.Sh=a.Sh;this.Vh=a.Vh;this.Th=a.Th;this.Uh=a.Uh;this.backgroundColor=a.backgroundColor;this.kd=a.kd;this.od=a.od;this.pd=a.pd;this.nd=a.nd;this.filter=a.filter;this.style=a.style;this.html=a.html;this.fontFamily=a.fontFamily;this.fontSize=a.fontSize;this.color=a.color;this.bold=a.bold;this.italic=a.italic;this.bd=a.bd;this.rb=a.rb;this.letterSpacing=
a.letterSpacing;this.lineHeight=a.lineHeight;this.md=a.md||[];this.padding=a.padding;this.textTransform=a.textTransform;this.border=a.border;this.Wh=a.Wh||[];this.Ai=a.Ai;this.link=a.link;this.spacing=a.spacing;this.items=a.items||[];this.contents=a.contents||[];this.scale=a.scale;this.Ch=a.Ch||[];this.Ni=a.Ni;this.index=a.index;this.wh=a.wh;this.Ph=a.Ph;this.viewBox=a.viewBox;this.ni=a.ni||[];this.Xg=a.Xg||[];this.Gh=a.Gh;this.Vg=a.Vg;this.Ii=a.Ii;this.origin=a.origin}le.prototype.fa=function(){return this.type};
function ke(a){return new le({type:z("type",a),top:x("top",a),left:x("left",a),height:x("height",a),width:x("width",a),Xi:y("transparency",a),rotation:y("rotation",a),$c:y("flipOrientation",a),Sh:E("isBackground",a),Vh:E("isRecolorable",a),Th:E("isCutout",a),Uh:E("isDark",a),backgroundColor:B("backgroundColor",a),kd:G(me,"imageBox",a),od:B("mediaId",a),pd:y("mediaVersion",a),nd:E("mediaApproved",a),filter:G(ne,"filter",a),style:B("style",a),html:B("html",a),fontFamily:B("fontFamily",a),fontSize:y("fontSize",
a),color:B("color",a),bold:E("bold",a),italic:E("italic",a),bd:G(Ma,"fontMedia",a),rb:B("justification",a),letterSpacing:y("letterSpacing",a),lineHeight:y("lineHeight",a),md:ua.ca("lineLengths",a),padding:y("padding",a),textTransform:B("textTransform",a),border:G(oe,"border",a),Wh:H(pe,"kerning",a),Ai:J(Vd,"reflowMode",a),link:B("link",a),spacing:y("spacing",a),items:H(qe,"items",a),contents:H(re,"contents",a),scale:y("scale",a),Ch:H(se,"fillColors",a),Ni:G(te,"svgMetadata",a),index:y("index",a),
wh:y("elementIndex",a),Ph:y("groupIndex",a),viewBox:G(me,"viewBox",a),ni:H(ue,"paths",a),Xg:ua.ca("childRange",a),Gh:J(Yd,"generatorType",a),Vg:G(ve,"chart",a),Ii:G(Oa,"spritesheetMetadata",a),origin:G(we,"origin",a)})}
function xe(a){this.type=a.type;this.top=a.top;this.left=a.left;this.height=a.height;this.width=a.width;this.$c=a.$c;this.backgroundColor=a.backgroundColor;this.kd=a.kd;this.od=a.od;this.pd=a.pd;this.nd=a.nd;this.filter=a.filter;this.html=a.html;this.fontFamily=a.fontFamily;this.fontSize=a.fontSize;this.color=a.color;this.bold=a.bold;this.italic=a.italic;this.bd=a.bd;this.rb=a.rb;this.letterSpacing=a.letterSpacing;this.lineHeight=a.lineHeight;this.md=a.md||[];this.textTransform=a.textTransform;this.index=
a.index}xe.prototype.fa=function(){return this.type};
function re(a){return new xe({type:z("type",a),top:y("top",a),left:y("left",a),height:y("height",a),width:y("width",a),$c:y("flipOrientation",a),backgroundColor:B("backgroundColor",a),kd:G(me,"imageBox",a),od:B("mediaId",a),pd:y("mediaVersion",a),nd:E("mediaApproved",a),filter:G(ne,"filter",a),html:B("html",a),fontFamily:B("fontFamily",a),fontSize:y("fontSize",a),color:B("color",a),bold:E("bold",a),italic:E("italic",a),bd:G(Ma,"fontMedia",a),rb:B("justification",a),letterSpacing:y("letterSpacing",
a),lineHeight:y("lineHeight",a),md:ua.ca("lineLengths",a),textTransform:B("textTransform",a),index:x("index",a)})}function ye(a){this.width=a.width}function oe(a){return new ye({width:x("width",a)})}function ze(a){this.li=a.li;this.Hg=a.Hg}function pe(a){return new ze({li:z("pair",a),Hg:x("adjustment",a)})}function Ae(a){this.type=a.type;this.width=a.width;this.height=a.height;this.children=a.children||[]}Ae.prototype.fa=function(){return this.type};Ae.prototype.getChildren=function(){return this.children};
function qe(a){return new Ae({type:J(Wd,"type",a),width:y("width",a),height:y("height",a),children:H(qe,"children",a)})}function Be(a){this.top=a.top;this.left=a.left;this.width=a.width;this.height=a.height}function me(a){return new Be({top:x("top",a),left:x("left",a),width:x("width",a),height:x("height",a)})}function Ce(a){this.index=a.index;this.color=a.color}function se(a){return new Ce({index:x("index",a),color:z("color",a)})}
function De(a){this.viewBox=a.viewBox;this.Pi=a.Pi||[];this.ri=a.ri||[];this.Ug=a.Ug;this.Ri=a.Ri}function te(a){return new De({viewBox:F(me,"viewBox",a),Pi:H(me,"textHolderBoxes",a),ri:H(me,"photoHolderBoxes",a),Ug:G(me,"centerBox",a),Ri:E("tile",a)})}function Ee(a){this.blur=a.blur;this.brightness=a.brightness;this.contrast=a.contrast;this.saturation=a.saturation;this.Si=a.Si;this.vignette=a.vignette;this.jj=a.jj;this.Ti=a.Ti;this.name=a.name}Ee.prototype.Jh=function(){return this.brightness};
Ee.prototype.getName=function(){return this.name};function ne(a){return new Ee({blur:y("blur",a),brightness:y("brightness",a),contrast:y("contrast",a),saturation:y("saturation",a),Si:y("tint",a),vignette:y("vignette",a),jj:y("xpro",a),Ti:y("tintAmount",a),name:B("name",a)})}function Fe(a){this.fill=a.fill;this.Dh=a.Dh;this.d=a.d}function ue(a){return new Fe({fill:z("fill",a),Dh:J(Xd,"fillRule",a),d:z("d",a)})}function Ge(a){this.name=a.name;this.cells=a.cells||[]}Ge.prototype.getName=function(){return this.name};
function He(a){return new Ge({name:B("name",a),cells:w.ca("cells",a)})}function Ie(a){this.ah=a.ah||[]}function Je(a){return new Ie({ah:H(He,"columns",a)})}function Ke(a){this.data=a.data;this.Xh=a.Xh;this.Zh=a.Zh;this.Yh=a.Yh;this.Zg=a.Zg;this.Rh=a.Rh;this.mi=a.mi;this.Wg=a.Wg;this.si=a.si;this.Lg=a.Lg;this.ci=a.ci;this.qh=a.qh}Ke.prototype.getData=function(){return this.data};
function ve(a){return new Ke({data:F(Je,"data",a),Xh:y("labelColumn",a),Zh:F(de,"labelTextStyle",a),Yh:G(Ma,"labelFontMedia",a),Zg:I($d,"coloringType",a),Rh:G(Le,"interpolation",a),mi:G(Me,"palette",a),Wg:I(Zd,"chartType",a),si:G(Ne,"pie",a),Lg:G(Oe,"bar",a),ci:G(Pe,"line",a),qh:G(Qe,"donut",a)})}function Re(a){this.spacing=a.spacing;this.padding=a.padding}function Ne(a){return new Re({spacing:y("spacing",a),padding:y("padding",a)})}function Se(a){this.spacing=a.spacing;this.padding=a.padding}
function Oe(a){return new Se({spacing:y("spacing",a),padding:y("padding",a)})}function Te(a){this.spacing=a.spacing;this.padding=a.padding}function Pe(a){return new Te({spacing:y("spacing",a),padding:y("padding",a)})}function Ue(a){this.spacing=a.spacing;this.padding=a.padding}function Qe(a){return new Ue({spacing:y("spacing",a),padding:y("padding",a)})}function Ve(a){this.Yg=a.Yg;this.from=a.from;this.to=a.to}function Le(a){return new Ve({Yg:I(ae,"colorSpace",a),from:z("from",a),to:z("to",a)})}
function We(a){this.$g=a.$g||[]}function Me(a){return new We({$g:w.ca("colors",a)})}function Xe(a){this.id=a.id;this.version=a.version;this.type=a.type}Xe.prototype.j=function(){return this.id};Xe.prototype.getVersion=function(){return this.version};Xe.prototype.fa=function(){return this.type};function we(a){return new Xe({id:z("id",a),version:x("version",a),type:I(be,"type",a)})};function Ye(a){this.id=a.id;this.Ba=a.Ba;this.Ta=a.Ta;this.origin=a.origin;this.ic=a.ic;this.tags=a.tags||[];this.Ra=a.Ra;this.ac=a.ac;this.version=a.version;this.timestamp=a.timestamp}Ye.prototype.j=function(){return this.id};Ye.prototype.cd=function(){return this.Ra};Ye.prototype.getVersion=function(){return this.version};
function Ze(a){return new Ye({id:z("id",a),Ba:z("owningBrand",a),Ta:x("creationDate",a),origin:G(id,"origin",a),ic:F($c,"extensions",a),tags:w.ca("tags",a),Ra:G(Qc,"acl",a),ac:F($e,"draft",a),version:x("version",a),timestamp:y("timestamp",a)})}function af(a){this.content=a.content;this.version=a.version;this.timestamp=a.timestamp;this.da=a.da;this.xc=a.xc;this.media=a.media||[];this.nc=a.nc;this.Qb=a.Qb}af.prototype.getContent=function(){return this.content};af.prototype.getVersion=function(){return this.version};
af.prototype.getSession=function(){return this.da};function $e(a){return new af({content:F(he,"content",a),version:x("version",a),timestamp:x("timestamp",a),da:y("session",a),xc:x("pageCount",a),media:H(Ma,"media",a),nc:F(sd,"imageSets",a),Qb:B("associatedMedia",a)})}function bf(a){this.document=a.document;this.da=a.da}bf.prototype.getDocument=function(){return this.document};bf.prototype.getSession=function(){return this.da};
function cf(a){return new bf({document:F(Ze,"document",a),da:x("session",a)})}function df(a){this.document=a.document;this.fi=a.fi||[];this.da=a.da;this.Eg=a.Eg;this.eh=a.eh}df.prototype.getDocument=function(){return this.document};df.prototype.getSession=function(){return this.da};function ef(a){return new df({document:F(Ze,"document",a),fi:H(Dd,"mediaMap",a),da:y("session",a),Eg:I(Gc,"accessRole",a),eh:J(Lc,"conversionLoss",a)})};function ff(){this.remix=this.edit=this.view=this["default"]=null}function gf(a){this.width=a.width;this.height=a.height;this.url=a.url}function hf(){}function jf(a){return Object.freeze(v(hf,a))}hf.prototype.getDocument=function(){return kf(this.document)};hf.prototype.getSession=function(){return this.session};function lf(){}function mf(a){return Object.freeze(v(lf,a))}lf.prototype.getDocument=function(){return kf(this.document)};function nf(){}function of(a){return Object.freeze(v(nf,a))}
nf.prototype.Nh=function(){return this.results?this.results.map(pf):[]};function qf(){}function pf(a){return Object.freeze(v(qf,a))}qf.prototype.ob=function(){return this.title};qf.prototype.j=function(){return this.id};qf.prototype.ge=function(){var a=this.thumbnail;return new gf({width:y("width",a),height:y("height",a),url:z("url",a)})};qf.prototype.Ef=function(){return this.designTypeDisplayName};function rf(){}rf.prototype.j=function(){return this.id};
rf.prototype.ob=function(){try{return this.draft.content.title.trim()||null}catch(a){return null}};rf.prototype.getVersion=function(){var a=this.draft;return a?a.version:-1};function kf(a){var b=new rf;$.extend(b,a);a=a.extensions;var c=new ff;a&&$.extend(c,a);b.extensions=c;return b};function sf(a){this.identifier=a.identifier;this.Vi=a.Vi;this.timestamp=a.timestamp;this.type=a.type;this.event=a.event}sf.prototype.fa=function(){return this.type};function tf(a){return new sf({identifier:z("identifier",a),Vi:z("topic",a),timestamp:x("timestamp",a),type:I(uf,"type",a),event:F(vf,"event",a)})}
function uf(a,b){switch(b){case "SOCIAL":return"SOCIAL";case "COMMENT":return"COMMENT";default:throw new TypeError('expected CanvaNotificationType for property "'+a+'", found: '+JSON.stringify(b));}}function wf(a){this.kf=a.kf;this.mg=a.mg}function vf(a){return new wf({kf:G(xf,"comment",a),mg:G(yf,"social",a)})}function zf(a){this.type=a.type;this.user=a.user;this.document=a.document}zf.prototype.fa=function(){return this.type};zf.prototype.ha=function(){return this.user};
zf.prototype.getDocument=function(){return this.document};function xf(a){return new zf({type:I(Af,"type",a),user:F(cb,"user",a),document:F(md,"document",a)})}function Af(a,b){switch(b){case "COMMENT":return"COMMENT";case "REPLY":return"REPLY";case "MENTION":return"MENTION";default:throw new TypeError('expected CommentNotificationEventType for property "'+a+'", found: '+JSON.stringify(b));}}function Bf(a){this.type=a.type;this.user=a.user;this.object=a.object}Bf.prototype.fa=function(){return this.type};
Bf.prototype.ha=function(){return this.user};function yf(a){return new Bf({type:I(Cf,"type",a),user:F(cb,"user",a),object:F(Df,"object",a)})}function Cf(a,b){switch(b){case "FOLLOW":return"FOLLOW";case "LIKE":return"LIKE";case "PUBLICIFY":return"PUBLICIFY";default:throw new TypeError('expected SocialNotificationEventType for property "'+a+'", found: '+JSON.stringify(b));}}function Ef(a){this.type=a.type;this.id=a.id;this.document=a.document;this.user=a.user}Ef.prototype.fa=function(){return this.type};
Ef.prototype.j=function(){return this.id};Ef.prototype.getDocument=function(){return this.document};Ef.prototype.ha=function(){return this.user};function Df(a){return new Ef({type:I(Ff,"type",a),id:z("id",a),document:G(md,"document",a),user:G(cb,"user",a)})}function Ff(a,b){switch(b){case "DOCUMENT":return"DOCUMENT";case "USER":return"USER";default:throw new TypeError('expected ActorType for property "'+a+'", found: '+JSON.stringify(b));}}
function Gf(a){this.user=a.user;this.wg=a.wg;this.limit=a.limit;this.Fa=a.Fa}Gf.prototype.ha=function(){return this.user};Gf.prototype.kc=function(){return this.limit};Gf.prototype.va=function(){return this.Fa};function Hf(a){this.events=a.events||[];this.read=a.read;this.Fa=a.Fa;this.throttle=a.throttle}Hf.prototype.va=function(){return this.Fa};function If(a){return new Hf({events:H(tf,"events",a),read:y("read",a),Fa:B("continuation",a),throttle:E("throttle",a)})}
function Jf(a){this.user=a.user;this.read=a.read}Jf.prototype.ha=function(){return this.user};function Kf(a){return{user:O("user",a.user),read:N("read",a.read)}}function Lf(){}function Mf(){return new Lf};function Nf(){}Nf.prototype.now=function(){return Date.now()};var Of=new Nf;var Qf=new Pf;function Pf(){}e=Pf.prototype;e.setInterval=function(a,b){return window.setInterval(a,b)};e.clearInterval=function(a){window.clearInterval(a)};e.setTimeout=function(a,b){return window.setTimeout(a,b)};e.clearTimeout=function(a){window.clearTimeout(a)};e.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)};e.cancelAnimationFrame=function(a){window.cancelAnimationFrame(a)};function Rf(a){window.requestAnimationFrame(function(){window.requestAnimationFrame(a)})};function Sf(a){this.H=a.H;this.element=$(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"modalContent"\x3e\x3cdiv class\x3d"modalContentMask"\x3e\x3c/div\x3e\x3c/div\x3e').toString());this.element.addClass(Tf(a.style));this.element.on("click",".modalContentMask",function(a){this.trigger("maskClick",a)}.bind(this));this.style=a.style;this.Pd=""}e=Sf.prototype;e.off=Backbone.Events.off;e.on=Backbone.Events.on;e.trigger=Backbone.Events.trigger;
function Tf(a){switch(a){case Uf:return"modalContentBlurAndDarken";case Vf:return"modalContentDarken";case Wf:return"modalContentClear";case Xf:return"modalContentNone";default:throw Error();}}e.hide=function(){$("body").removeClass(this.Pd).attr("data-modal-levels",$("body").attr("data-modal-levels")-1);"0"===$("body").attr("data-modal-levels")&&$("body").css("margin-right","");this.element.removeClass("modalContentOn");this.H.setTimeout(function(){this.element.detach()}.bind(this),300)};
e.show=function(a){this.element.children(":not(.modalContentMask)").remove();this.element.append(a).appendTo("body");Rf(function(){var a=this,c=parseInt($("body").attr("data-modal-levels"),10)||0,d=window.innerWidth-$(window).width();$("body").attr("data-modal-levels",c+1);0===c&&$("body").css("margin-right",d);this.element.addClass("modalContentOn");["modalContentVisible",Tf(this.style)+"Visible"].forEach(function(c){$("body").hasClass(c)||(a.Pd+=c+" ")});$("body").addClass(this.Pd)}.bind(this))};
var Uf="BLUR_AND_DARKEN",Vf="DARKEN",Wf="CLEAR",Xf="NONE";function Yf(){}Yf=Backbone.View.extend();Yf.prototype.initialize=function(a){a=_.defaults({},a,{jf:!0,content:$(),jg:!0,Ne:!0});this.H=a.H;this.jf=!!a.jf;this.content=a.content;this.uc=new Sf({style:this.Mh(),H:this.H});this.listenTo(this.uc,"maskClick",this.blur);this.result=1;this.jg=!!a.jg;this.ra=!!a.ra;this.Ne=!!a.Ne;this.title=a.Ne?a.title:""};Yf.kj=300;e=Yf.prototype;e.blur=function(){this.jf&&(this.result=0,this.remove())};e.cancel=function(){this.result=1;this.remove()};
e.fail=function(){this.result=3;this.remove()};e.events=function(){return{"click .close":this.hi,"click .dialogMaskCloseButton":this.hi,"click button.done":this.ok}};e.Mh=function(){return Uf};e.ok=function(){this.result=2;this.remove()};e.hi=function(a){a.preventDefault();this.cancel()};
e.remove=function(){var a=this;this.$el.children(".dialog").addClass("disappearing");this.uc.hide();this.trigger("hide",this.result);this.H.setTimeout(function(){a.trigger("remove",a);Backbone.View.prototype.remove.call(a)},Yf.kj);return this};e.render=function(){this.$el.html(this.template({showCloseButton:this.jg,showDialogMaskCloseButton:this.ra,showTitle:this.Ne,title:this.title}));this.$(".content").append(this.content);this.$(".dialog").data("Canva_Views_Dialog",this);return this};
function Zf(a,b){a.$("h2").text(b);a.title=b}e.show=function(){function a(d){d.target===d.currentTarget&&(b.off("animationend transitionend",a),c.trigger("showTransitionEnd",c))}var b,c=this;this.render();b=this.$el.children(".dialog");this.uc.show(this.$el);this.trigger("show",this);Rf(function(){b.removeClass("preparing");b.on("animationend transitionend",a)});return this};e.template=_.template('\x3c% if (showDialogMaskCloseButton) { %\x3e\x3ca class\x3d"dialogMaskCloseButton"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3cdiv class\x3d"dialog preparing"\x3e\x3c% if (showTitle) { %\x3e\x3ch2 class\x3d"dialog__title"\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3c% } %\x3e\x3cdiv class\x3d"content"\x3e\x3c/div\x3e\x3c% if (showCloseButton) { %\x3e\x3ca class\x3d"close" href\x3d"#" title\x3d"Close this dialog"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3c/div\x3e');
var $f=Yf;var ag={LEFT:"left",cl:"leftTop",fl:"top",gl:"topLeft",dl:"rightTop"};function bg(){}bg=$f.extend();e=bg.prototype;e.initialize=function(a){$f.prototype.initialize.call(this,_.extend({H:Qf},a));this.ph=a.ph||"Done";this.kg=void 0!==a.kg?a.kg:!0;this.Pc=null;this.vi=a.position instanceof Array?a.position:[a.position||"top"];this.position=null;this.ba=_.defaults({},a.ba,{left:0,top:0});this.De=a.De||!1;this.on("hide",this.jh);this.keydown=this.keydown.bind(this)};
function cg(a){$(document).on("keydown",a.keydown)}e.Bk=function(){$(document).off("keydown",this.keydown)};e.Mh=function(){return Vf};e.getCurrentPosition=function(){return this.position};
e.render=function(){$f.prototype.render.call(this);this.$(".dialog").addClass("popover").addClass(this.De?"paddingLess":"").prepend('\x3cdiv class\x3d"pointer"\x3e\x3c/div\x3e');this.kg&&this.$(".content").append('\x3cp class\x3d"buttonContainer"\x3e\x3cbutton class\x3d"button buttonBlock done"\x3e'+this.ph+"\x3c/button\x3e\x3c/p\x3e");return this};
function dg(a,b){if(!a.Pc){var c=_.debounce(a.Kd.bind(a),300);window.addEventListener("resize",c,!1);a.on("remove",function(){window.removeEventListener("resize",c,!1)})}a.show();cg(a);a.on("remove",a.Bk);eg(a,b);a.Kd()}function fg(){this.Xf=this.Wf=this.dialogLeft=this.dialogTop=null}
e.Kd=function(){for(var a,b,c=0;c<this.vi.length;c++){a=b=this.vi[c];var d=this.De?5:13,f=this.De?20:40,g=this.Pc,h=g.offset(),m=h.top-$(document).scrollTop(),k=g.outerWidth(),r=g.outerHeight(),A=this.$(".dialog").outerHeight(),C=this.$(".dialog").outerWidth(),W=this.$el.width(),g=new fg,ba=Math.round(h.left+k/2-C/2);switch(a){case "top":g.dialogLeft=ba+C+10>W?W-C-10:ba;g.dialogLeft+=this.ba.left;g.dialogTop=Math.round(m)+r+d+this.ba.top;a=ba-g.dialogLeft;g.Wf="calc(50% - 7px + "+a+"px)";break;case "topLeft":g.dialogLeft=
h.left+C+10>W?W-C-10:h.left;g.dialogLeft+=this.ba.left;g.dialogTop=Math.round(m)+r+d+this.ba.top;g.Wf=g.dialogLeft+d;break;case "left":g.dialogLeft=h.left+k+this.ba.left;g.dialogTop=m-A/2+d+this.ba.top;break;case "leftTop":g.dialogLeft=h.left+k+this.ba.left+d;g.dialogTop=m+r/2-f+this.ba.top;10>g.dialogTop&&(g.Xf=g.dialogTop-10,g.dialogTop=10);break;case "rightTop":g.dialogLeft=h.left-C+this.ba.left-d,g.dialogTop=m+r/2-f+this.ba.top,10>g.dialogTop&&(g.Xf=g.dialogTop-10,g.dialogTop=10)}d=a=g;f=this.$(".dialog");
if(!(d.dialogLeft+f.outerWidth()>$(window).width()||d.dialogTop+f.outerHeight()>$(window).height()))break}this.position=b;this.$(".dialog").css("top",a.dialogTop).css("left",a.dialogLeft);c=this.$(".pointer");c.removeClass(_.values(ag).join(" ")).addClass(b);c.css("left",a.Wf||"");c.css("margin-top",a.Xf||"");return this};function eg(a,b){a.jh();a.Pc=b;b.addClass("on");b.blur()}e.jh=function(){this.Pc&&this.Pc.removeClass("on")};
e.keydown=function(a){27===a.which&&(this.cancel(),a.stopPropagation(),a.preventDefault())};var T=bg;function gg(a,b){return location.protocol+"//"+location.host+"/design/"+encodeURIComponent(a)+""+(b?"/"+encodeURIComponent(b):"")};var hg=new function(){this.lj="undefined"!==typeof window&&1<window.devicePixelRatio;"undefined"!==typeof window&&window.navigator.userAgent.match(/Macintosh/)};function ig(a){soy.asserts.assertType(goog.isBoolean(a.read)||1===a.read||0===a.read,"read",a.read,"boolean");var b=!!a.read;soy.asserts.assertType(a.url instanceof soydata.SanitizedUri||a.url instanceof soydata.UnsanitizedText||goog.isString(a.url),"url",a.url,"soydata.SanitizedUri");var c=a.url;soy.asserts.assertType(a.Pb instanceof soydata.SanitizedUri||a.Pb instanceof soydata.UnsanitizedText||goog.isString(a.Pb),"actorAvatarUrl",a.Pb,"soydata.SanitizedUri");var d=a.Pb;soy.asserts.assertType(a.Xb instanceof
soydata.SanitizedHtml||a.Xb instanceof soydata.UnsanitizedText||goog.isString(a.Xb),"contentHtml",a.Xb,"soydata.SanitizedHtml");var f=a.Xb;soy.asserts.assertType(goog.isNumber(a.timestamp),"timestamp",a.timestamp,"number");a=a.timestamp;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"notification '+soy.$$escapeHtmlAttribute(b?"read":"unread")+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(c))+'"\x3e\x3cimg src\x3d"'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(d))+
'" class\x3d"avatar"\x3e'+soy.$$escapeHtml(f)+' \x3cspan class\x3d"autoformat date" data-timestamp\x3d"'+soy.$$escapeHtmlAttribute(a)+'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e')}
function jg(a){soy.asserts.assertType(goog.isString(a.name)||a.name instanceof goog.soy.data.SanitizedContent,"name",a.name,"string|goog.soy.data.SanitizedContent");var b=a.name;soy.asserts.assertType(goog.isBoolean(a.object)||1===a.object||0===a.object,"object",a.object,"boolean");return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"'+soy.$$escapeHtmlAttribute(a.object?"object":"subject")+'"\x3e'+soy.$$escapeHtml(b)+"\x3c/span\x3e")}
function kg(a){soy.asserts.assertType(goog.isString(a.message)||a.message instanceof goog.soy.data.SanitizedContent,"message",a.message,"string|goog.soy.data.SanitizedContent");var b=a.message;soy.asserts.assertType(goog.isString(a.He)||a.He instanceof goog.soy.data.SanitizedContent,"quip",a.He,"string|goog.soy.data.SanitizedContent");var c=a.He;soy.asserts.assertType(goog.isString(a.fb)||a.fb instanceof goog.soy.data.SanitizedContent,"retryButtonLabel",a.fb,"string|goog.soy.data.SanitizedContent");
a=a.fb;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"notification empty message"\x3e'+soy.$$escapeHtml(b)+'\x3cbr\x3e\x3cspan class\x3d"aside"\x3e'+soy.$$escapeHtml(c)+'\x3c/span\x3e\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e'+soy.$$escapeHtml(a)+"\x3c/button\x3e\x3c/li\x3e")}
function lg(a){soy.asserts.assertType(goog.isString(a.message)||a.message instanceof goog.soy.data.SanitizedContent,"message",a.message,"string|goog.soy.data.SanitizedContent");var b=a.message;soy.asserts.assertType(goog.isString(a.fb)||a.fb instanceof goog.soy.data.SanitizedContent,"retryButtonLabel",a.fb,"string|goog.soy.data.SanitizedContent");a=a.fb;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"notification error message"\x3e'+soy.$$escapeHtml(b)+'\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e'+
soy.$$escapeHtml(a)+"\x3c/button\x3e\x3c/div\x3e")}function mg(a){soy.asserts.assertType(goog.isString(a.message)||a.message instanceof goog.soy.data.SanitizedContent,"message",a.message,"string|goog.soy.data.SanitizedContent");return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"notification loading message"\x3e'+soy.$$escapeHtml(a.message)+"\x3c/div\x3e")};var ng=new Wa({version:0,sizes:new Map([["50",new ab({size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"})],["200",new ab({size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"})]])});function og(){}og=T.extend({className:"notificationsPopover"});e=og.prototype;e.events=function(){return{"click .button.retry":this.Tj}};e.initialize=function(a){T.prototype.initialize.call(this,a);this.rf=a.rf;this.X=a.X};e.render=function(){T.prototype.render.call(this);this.$("h2, .buttonContainer").remove();this.$(".content").append(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3col class\x3d"notifications"\x3e\x3c/ol\x3e').toString());return this};
function pg(a){qg(a).removeClass("loading");a.$(".loading.message").remove()}
function rg(a,b,c,d){function f(a){var b=moment(a);return 0<moment().diff(a,"years")?b.format("[on] ll"):b.format("[on] MMM D")}function g(a){return a.timestamp>c}function h(a){a:{var b=m,c=!g(a);switch(a.type){case "COMMENT":var d=qa(a.event.kf),f=d.user,h=kf(kd(d.document));switch(d.type){case "COMMENT":var d=sg(f),k=tg(b,h),d=b.X.format("notificationPopOverCommented",d,k);break;case "REPLY":d=sg(f);k=tg(b,h);d=b.X.format("notificationPopOverReplied",d,k);break;case "MENTION":d=sg(f);k=tg(b,h);
d=b.X.format("notificationPopOverMentioned",d,k);break;default:throw Error("Unknown CommentNotificationEventType: "+d.type);}a=ig({Pb:b.ee(f),read:c,Xb:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),timestamp:a.timestamp,url:gg(h.j(),"view")}).toString();break a;case "SOCIAL":h=qa(a.event.mg);f=h.user;switch(h.type){case "FOLLOW":k=qa(h.object.user);k.id===b.rf?(h="/"+encodeURIComponent(f.username||""),d=sg(f),d=b.X.format("notificationPopOverFollowedMe",d)):(h="/"+encodeURIComponent(k.username||""),
d=sg(f),k=sg(k,!0),d=b.X.format("notificationPopOverFollowed",d,k));break;case "LIKE":k=kf(kd(qa(h.object.document)));h=gg(k.j(),"view");d=sg(f);k=tg(b,k);d=b.X.format("notificationPopOverLiked",d,k);break;case "PUBLICIFY":k=kf(kd(qa(h.object.document)));h=gg(k.j(),"view");d=sg(f);k=tg(b,k);d=b.X.format("notificationPopOverPublished",d,k);break;default:throw Error("Unknown SocialNotificationEventType: "+h.type);}a=ig({Pb:b.ee(f),read:c,Xb:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),timestamp:a.timestamp,
url:h}).toString();break a;default:throw Error("Unknown CanvaNotificationType: "+a.type);}}return a}var m=a,k=b.filter(g).length,r=qg(a);a.$el.toggleClass("loading",d);0<b.length?(r.html(b.map(h).join("")),r.find(".autoformat.date").each(function(){var a=$(this).data("timestamp");$(this).text(f(a))})):d||r.html(kg({message:a.X.format("notificationPopOverEmptyListMessage"),He:a.X.format("notificationPopOverEmptyListQuip"),fb:a.X.format("notificationPopOverEmptyListButtonLabel")}).toString());d&&(0===
k?0===b.length?r.before(mg({message:a.X.format("notificationPopOverLoading")}).toString()):r.before(mg({message:a.X.format("notificationPopOverLoadingNewer")}).toString()):r.after(mg({message:a.X.format("notificationPopOverLoadingOlder")}).toString()));ug(a)}e.Kd=function(){T.prototype.Kd.call(this);ug(this);return this};e.Tj=function(){this.trigger("retry")};function ug(a){var b=$(window).height(),c=parseInt(a.$(".dialog.popover").css("top"),10),b=Math.max(50,b-c-30);qg(a).css("max-height",b)}
function sg(a,b){return jg({name:a.displayName||a.username||"",object:!!b}).toString()}e.ee=function(a){return a.Oh()||ng.sizes.get("50").url};function tg(a,b){var c;a=b.ob()||a.X.Ue();a=a.trim();if(60>=a.length)c=a;else{void 0===c&&(c="…");b=a.substr(0,60-c.length);var d=a.substr(60-c.length).match(/^\S+/),f=b.match(/\S+$/);f&&d&&(b=b.substr(0,b.length-f[0].length));b=b.trim();""===b&&(b=a.substr(0,60-c.length));c=b=b.trim()+c}return jg({name:c,object:!0}).toString()}
function qg(a){return a.$(".notifications")}var vg=og;function wg(){this.xhr=null}wg.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};wg.prototype.finish=function(){this.xhr=null};function xg(a){this.Ig=a&&a.analyticsContext||null;this.cf=a&&a.authToken||null;this.df=a&&a.authzToken||null;this.Ng=a&&a.brandRestriction||null;this.Og=a&&a.buildName||null;this.Pg=a&&a.buildSha||null;this.Zb=a&&a.csrfTokens||{};this.hg=a&&a.serverRoot||null;this.Hk=!!this.hg;this.Ik=this.hg?this.hg+"/_ajax":"/_ajax"}
function yg(a){var b=a.indexOf("/",1);return-1==b?a:a.substring(0,b)}xg.prototype.get=function(a,b){var c=new wg;this.send("GET",a,null,!0,null,c,b);return c};function U(a,b){var c;return(new P(function(d,f){c=a.get(b,function(a,b){200<=a&&300>a?d([b,a]):f([b,a])})})).cancellable().catch(P.CancellationError,function(a){c.cancel();throw a;})}xg.prototype.post=function(a,b,c){var d=new wg;zg(this,"POST",a,b,!0,0,d,c);return d};
function V(a,b,c){var d;return(new P(function(f,g){d=a.post(b,c,function(a,b){200<=a&&300>a?f([b,a]):g([b,a])})})).cancellable().catch(P.CancellationError,function(a){d.cancel();throw a;})}function Ag(a){var b=Array.isArray(a)&&2===a.length&&"number"===typeof a[1];if(a instanceof Error)throw a;if(b&&Array.isArray(a))throw b=n(a),a=b.next().value,b=b.next().value,a=Bg(a,b),a.Pk=b,a;throw Error("unable to parse error or response tuple. HttpServiceError or [?, statusCode] required.");}
function zg(a,b,c,d,f,g,h,m){var k=yg(c);if(k in a.Zb){var r=a.Zb[k];a.send(b,c,d,f,r,h,function(A,C){418==A&&1>g?(a.Zb[k]==r&&delete a.Zb[k],zg(a,b,c,d,f,g+1,h,m)):(m&&m(A,C),h.finish())})}else a.send("GET","/csrf"+k,null,f,null,h,function(r,C){200==r?(k in a.Zb||(a.Zb[k]=String(C)),zg(a,b,c,d,f,g,h,m)):(m(r,null),h.finish())})}
xg.prototype.send=function(a,b,c,d,f,g,h){function m(){4==r.readyState&&k()}function k(){var a,b,c;try{a=r.status;var d,f;try{d=r.getResponseHeader("X-Canva-Auth")}catch(k){}try{f=r.getResponseHeader("X-Canva-Authz")}catch(k){}d&&(A.cf="!"!=d?d:null);f&&(A.df="!"!=f?f:null);b=r.responseText}catch(k){if(k.message&&k.message.match(/c00c023f/))a=0,b="";else throw g.finish(),k;}b=b&&b.trim?b.trim():"";d=b.substring(0,20);if(0<d.length){if("'\"])}while(1);\x3c/x\x3e//"!=d){h(500,null);g.finish();return}b=
b.substring(20);try{c=JSON.parse(b)}catch(k){h(500,null);g.finish();return}}else c=null;h(a,c);g.finish()}b=this.Ik+b;var r=g.xhr=new XMLHttpRequest,A=this;r.open(a,b,d);this.Hk&&(r.withCredentials=!0);"GET"!=a&&f&&r.setRequestHeader("X-Csrf-Token",f);this.Ig&&r.setRequestHeader("X-Canva-Analytics",this.Ig);this.cf&&r.setRequestHeader("X-Canva-Auth",this.cf);this.df&&r.setRequestHeader("X-Canva-Authz",this.df);this.Ng&&r.setRequestHeader("X-Canva-Brand",this.Ng);this.Og&&r.setRequestHeader("X-Canva-Build-Name",
this.Og);this.Pg&&r.setRequestHeader("X-Canva-Build-Sha",this.Pg);null===c||void 0===c?a=null:(r.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8"),a=JSON.stringify(c));d?(r.onreadystatechange=m,r.send(a)):(r.send(a),k())};function Cg(a){this.message=a||"HTTP error encountered";this.response=a;this.Pk=null}p(Cg,Error);
function Bg(a,b){switch(b){case 400:return new Dg(a);case 403:return new Eg(a);case 404:return new Fg(a);case 409:return new Gg(a);case 418:return new Hg;case 429:return new Ig(a);case 500:return new Jg(a);default:return new Kg(a)}}function X(a){Cg.apply(this,arguments)}p(X,Cg);function Lg(a){Cg.apply(this,arguments)}p(Lg,Cg);function Dg(a){X.apply(this,arguments)}p(Dg,X);function Eg(a){X.apply(this,arguments)}p(Eg,X);function Fg(a){X.apply(this,arguments)}p(Fg,X);
function Gg(a){X.apply(this,arguments)}p(Gg,X);function Ig(a){X.apply(this,arguments)}p(Ig,X);function Jg(a){Lg.apply(this,arguments)}p(Jg,Lg);function Hg(){X.call(this,"CSRF token expired")}p(Hg,X);function Kg(a){Cg.apply(this,arguments)}p(Kg,Cg);function Mg(a){this.o=a;this.path="/notifications"}function Ng(a,b){var c=b.Fa;return U(a.o,a.path+"/user?limit\x3d"+encodeURIComponent(String(b.limit))+(b.wg?"\x26unreadOnly\x3dtrue":"")+(c?"\x26continuation\x3d"+encodeURIComponent(c):"")).get(0).then(wa).then(If)}function Og(a,b){return V(a.o,a.path+"/user",Kf(b)).get(0).then(wa).then(Mf)};function Pg(a){this.l=a.l;this.Ka=[];this.mf=a.mf;this.te=a.te;this.button=a.nj;this.Fe=this.wb=null;this.Ge=a.Ge;this.ed=this.rd=this.ld=this.sg=null}e=Pg.prototype;e.trigger=Backbone.Events.trigger;e.on=Backbone.Events.on;e.off=Backbone.Events.off;function Qg(a){a.button.on("click",function(b){b.preventDefault();a.show();Ib(a.l,"notification_bell","homepage","sidebar","sidebar")})}
e.update=function(a){var b=this,c=new Gf({limit:10,wg:!a});this.ed&&this.ed.isPending()&&this.ed.cancel();return this.ed=Ng(this.te,c).then(function(c){Rg(b,c.events);b.ld=c.read||null;var f=Sg(b),g=10===f;b.rd=0===b.Ka.length?null:b.Ka[0].timestamp;c=c.throttle;var h=b.wb;!0===c?h=Math.min(2*b.wb,216E5):!1===c&&(h=Math.max(b.wb-1E3,6E4));null!==h&&h!=b.wb&&Tg(b,h);b.trigger("updateUnreadCount",f,g);a&&(b.sg=Date.now())}).catch(function(a){return 403===a[1]},function(){window.clearInterval(b.Fe)}).catch(P.CancellationError,
$.noop)};
e.show=function(){function a(){h.$(".button.retry").prop("disabled",!0);g.update(!0).then(d).catch(c)}function b(){a();Ib(g.l,"check_notifications","homepage","sidebar","notifications_popover")}function c(){if(h){var a=h;qg(a).html(lg({message:a.X.format("notificationPopOverErrorMessage"),fb:a.X.format("notificationPopOverRetryAfterErrorButtonLabel")}).toString());pg(a)}}function d(a){h&&(pg(h),rg(h,g.Ka,g.ld,!!a),Ug(g))}function f(){h=null;g.trigger("updateUnreadCount",0,!1);Vg(g)}var g=this,h=function(){var a=
g.mf();a.once("remove",f);a.on("retry",b);dg(a,g.Ge?g.Ge:g.button);return a}(),m=function(){var a=Sg(g);if(a=!(0<a&&0<g.Ka.length-a))a=g,a=6E4<(null==a.sg?Infinity:Date.now()-a.sg);return a}();d(m);m&&a();window.clearInterval(g.Fe)};function Vg(a){function b(){c.update(!1).catch($.noop)}var c=a;a.wb&&(a.Fe=window.setInterval(b,a.wb))}function Tg(a,b){b!==a.wb&&(window.clearInterval(a.Fe),a.wb=b,Vg(a))}function Sg(a){return a.Ka.filter(function(b){return b.timestamp>a.ld}).length}
function Ug(a){null!=a.rd&&a.rd!=a.ld&&Og(a.te,new Jf({read:a.rd})).then(function(){a.ld=a.rd})}function Rg(a,b){a.Ka=_.uniq(a.Ka.concat(b),!1,function(a){return a.identifier+a.type});a.Ka.sort(function(a,b){return b.timestamp-a.timestamp});10<a.Ka.length&&(a.Ka.length=10)};function Wg(a){this.o=a;this.path="/profile"}Wg.prototype.ha=P.method(function(a){return U(this.o,this.path+"/users/"+encodeURIComponent(a)).get(0).then(gb)});function Xg(a){return U(a.o,a.path+"/user/brands").spread(function(a){return a.brands.map(eb)})}Wg.prototype.K=function(a){return U(this.o,this.path+"/brands/"+encodeURIComponent(a)).get(0).then(eb)};P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.K())+"/invitations";return V(this.o,b,a).spread(jb)});
P.method(function(a){a=this.path+"/brands/"+encodeURIComponent(a.K())+"/invitations?"+(null!=a.va()?"\x26continuation\x3d"+encodeURIComponent(a.va()):"")+(null!=a.kc()?"\x26limit\x3d"+encodeURIComponent(a.kc()):"")+(a.countOnly?"\x26countOnly\x3d"+encodeURIComponent(a.countOnly):"");return U(this.o,a).spread(lb)});P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.K())+"/invitations?update\x3dtrue";return V(this.o,b,a).spread(vb)});
Wg.prototype.Bj=P.method(function(a){a=this.path+"/brands/"+encodeURIComponent(a.K())+"/members?"+(a.includeAvatars?"\x26includeAvatars\x3d"+encodeURIComponent(a.includeAvatars):"")+(a.includeEmails?"\x26includeEmails\x3d"+encodeURIComponent(a.includeEmails):"")+(a.countOnly?"\x26countOnly\x3d"+encodeURIComponent(a.countOnly):"")+(null!=a.va()?"\x26continuation\x3d"+encodeURIComponent(a.va()):"")+(null!=a.kc()?"\x26limit\x3d"+encodeURIComponent(a.kc()):"")+(null!=a.users?"\x26users\x3d"+encodeURIComponent(a.users.join(",")):
"");return U(this.o,a).spread(rb)});P.method(function(a){var b=this.path+"/brands/"+encodeURIComponent(a.K())+"/members";return V(this.o,b,a).spread(tb)});function Yg(a){this.If=a.If;this.Ia=a.Ia;this.yh=a.yh}Yg.prototype.create=function(a){return V(this.If,"/teams",{displayName:a}).spread(function(a){return eb(a.brand)})};function Zg(a){this.id=a.id;this.Ba=a.Ba;this.Sg=a.Sg;this.pe=a.pe;this.ua=a.ua;this.zh=a.zh;this.Ah=a.Ah;this.ka=a.ka}Zg.prototype.j=function(){return this.id};Zg.prototype.Kh=function(){return this.ua};function $g(a){return new Zg({id:B("id",a),Ba:B("owningBrand",a),Sg:z("cardBrand",a),pe:z("last4",a),ua:B("country",a),zh:x("expMonth",a),Ah:x("expYear",a),ka:G(ah,"billingAddress",a)})}function bh(a){this.N=a.N;this.Gg=a.Gg;this.lh=a.lh}
function ch(a){return new bh({N:F($g,"card",a),Gg:y("addedDate",a),lh:y("deletedDate",a)})}function dh(a){this.Jf=a.Jf;this.Kf=a.Kf;this.Lf=a.Lf;this.Eb=a.Eb;this.Lc=a.Lc;this.O=a.O;this.zc=a.zc}function eh(a){return{line1:O("line1",a.Jf),line2:O("line2",a.Kf),line3:O("line3",a.Lf),city:O("city",a.Eb),subdivision:O("subdivision",a.Lc),countryCode:K.required("countryCode",a.O),postcode:O("postcode",a.zc)}}
function ah(a){return new dh({Jf:B("line1",a),Kf:B("line2",a),Lf:B("line3",a),Eb:B("city",a),Lc:B("subdivision",a),O:z("countryCode",a),zc:B("postcode",a)})}function fh(a){this.id=a.id;this.i=a.i;this.sa=a.sa;this.Ki=a.Ki;this.ei=a.ei;this.Wc=a.Wc;this.mh=a.mh;this.Kg=a.Kg||[];this.yi=a.yi||[]}fh.prototype.j=function(){return this.id};fh.prototype.K=function(){return this.i};
function gh(a){return new fh({id:z("id",a),i:z("brand",a),sa:D("stripe",a),Ki:B("stripeKey",a),ei:x("marketplaceCreditBalance",a),Wc:G($g,"defaultCreditCard",a),mh:D("delinquent",a),Kg:H(ch,"archivedCards",a),yi:xa(Ra,"purchaseRoles",a)})}function hh(a){this.i=a.i;this.ka=a.ka;this.ng=a.ng;this.Gd=a.Gd;this.Ji=a.Ji;this.bg=a.bg}hh.prototype.K=function(){return this.i};
function ih(a){var b=O("brand",a.i),c=Fa(eh,"billingAddress",a.ka),d=O("stripeToken",a.ng),f=O("stripeCardId",a.Gd),g=O("stripeCustomerId",a.Ji);a=a.bg;a=!1!==a?Ea.required("replaceDefault",a):void 0;return{brand:b,billingAddress:c,stripeToken:d,stripeCardId:f,stripeCustomerId:g,replaceDefault:a}}function jh(a){this.Tc=a.Tc;this.Jg=a.Jg;this.bh=a.bh;this.dh=a.dh;this.ka=a.ka;this.Gd=a.Gd;this.Tg=a.Tg}jh.prototype.fe=function(){return this.Tc};
function kh(a){return{creditCard:K.required("creditCard",a.Tc),archiveCard:Ea.optional("archiveCard",a.Jg),confirmAddition:Ea.optional("confirmAddition",a.bh),confirmRemoval:Ea.optional("confirmRemoval",a.dh),billingAddress:Fa(eh,"billingAddress",a.ka),stripeCardId:O("stripeCardId",a.Gd),cardIssuerUpdate:Fa(lh,"cardIssuerUpdate",a.Tg)}}
function lh(a){return{last4:O("last4",a.pe),fingerprint:O("fingerprint",a.pl),expiryMonth:L.optional("expiryMonth",a.gc),expiryYear:L.optional("expiryYear",a.hc),brand:O("brand",a.i),date:N("date",a.date)}}function nh(a){this.media=a.media;this.version=a.version;this.title=a.title;this.i=a.i;this.sb=a.sb;this.Hj=a.Hj;this.tj=a.tj;this.Tk=a.Tk;this.ia=a.ia;this.Jj=a.Jj;this.Jk=a.Jk;this.Ij=a.Ij;this.document=a.document;this.xj=a.xj;this.user=a.user}e=nh.prototype;e.getVersion=function(){return this.version};
e.ob=function(){return this.title};e.K=function(){return this.i};e.getDocument=function(){return this.document};e.ha=function(){return this.user};function oh(a){this.id=a.id;this.vb=a.vb;this.i=a.i;this.status=a.status;this.Bd=a.Bd;this.Zi=a.Zi;this.xd=a.xd;this.pi=a.pi;this.oi=a.oi;this.Mg=a.Mg;this.xh=a.xh}oh.prototype.j=function(){return this.id};oh.prototype.K=function(){return this.i};
function ph(a){return new oh({id:z("id",a),vb:F(qh,"plan",a),i:z("brand",a),status:I(rh,"status",a),Bd:x("quantity",a),Zi:y("trialEnd",a),xd:y("paidUntil",a),pi:y("periodStart",a),oi:y("periodEnd",a),Mg:D("billed",a),xh:D("eligibleForMediaDiscounts",a)})}
function sh(a,b){switch(b){case "PENDING":return"PENDING";case "TRIALING":return"TRIALING";case "ACTIVE":return"ACTIVE";case "PAST_DUE":return"PAST_DUE";case "FAILED":return"FAILED";default:throw new TypeError('expected SubscriptionStatus for property "'+a+'", found: '+JSON.stringify(b));}}
function rh(a,b){switch(b){case "PENDING":return"PENDING";case "TRIALING":return"TRIALING";case "ACTIVE":return"ACTIVE";case "PAST_DUE":return"PAST_DUE";case "FAILED":return"FAILED";default:throw new TypeError('expected SubscriptionStatus for property "'+a+'", found: '+JSON.stringify(b));}}function th(a){this.id=a.id;this.displayName=a.displayName;this.bi=a.bi;this.ej=a.ej;this.ib=a.ib;this.Bh=a.Bh;this.ja=a.ja;this.Ea=a.Ea;this.ia=a.ia}th.prototype.j=function(){return this.id};th.prototype.Oa=function(){return this.displayName};
function qh(a){return new th({id:z("id",a),displayName:z("displayName",a),bi:D("legacy",a),ej:D("userLocked",a),ib:I(uh,"tier",a),Bh:B("featureBundle",a),ja:x("trialPeriodDays",a),Ea:I(vh,"billingInterval",a),ia:x("price",a)})}function vh(a,b){switch(b){case "MONTHLY":return"MONTHLY";case "YEARLY":return"YEARLY";default:throw new TypeError('expected BillingInterval for property "'+a+'", found: '+JSON.stringify(b));}}
function uh(a,b){switch(b){case "FREE":return"FREE";case "PAID":return"PAID";default:throw new TypeError('expected Tier for property "'+a+'", found: '+JSON.stringify(b));}}function wh(a){this.i=a.i;this.ih=a.ih;this.vb=a.vb;this.ja=a.ja;this.gh=a.gh;this.aj=a.aj;this.xd=a.xd;this.status=a.status;this.Bd=a.Bd;this.xi=a.xi}wh.prototype.K=function(){return this.i};
function xh(a){return{brand:K.required("brand",a.i),currentVersion:L.optional("currentVersion",a.ih),plan:O("plan",a.vb),trialPeriodDays:L.optional("trialPeriodDays",a.ja),coupon:O("coupon",a.gh),unbilled:Ea.optional("unbilled",a.aj),paidUntil:L.optional("paidUntil",a.xd),status:Ha(sh,a.status),quantity:L.optional("quantity",a.Bd),prorate:Ea.optional("prorate",a.xi)}}function yh(a){this.Ob=a.Ob}yh.prototype.getSubscription=function(){return this.Ob};
function zh(a){return new yh({Ob:F(ph,"subscription",a)})}function Ah(a){this.Ob=a.Ob}Ah.prototype.getSubscription=function(){return this.Ob};function Bh(a){return new Ah({Ob:F(ph,"subscription",a)})};function Ch(a){soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");var b=a.block;soy.asserts.assertType(null==a.J||a.J instanceof goog.soy.data.SanitizedContent||goog.isString(a.J),"classes",a.J,"null|string|undefined");var c=a.J;soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");var d=a.disabled;soy.asserts.assertType(null==
a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");var f=a.id;soy.asserts.assertType(null==a.name||a.name instanceof goog.soy.data.SanitizedContent||goog.isString(a.name),"name",a.name,"null|string|undefined");var g=a.name;a=goog.asserts.assertArray(a.options,"expected parameter 'options' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");d='\x3cspan class\x3d"select'+(b?" selectBlock":"")+(c?
" "+soy.$$escapeHtmlAttribute(c):"")+'"\x3e\x3cselect '+(d?" disabled":"")+(f?' id\x3d"'+soy.$$escapeHtmlAttribute(f)+'"':"")+(g?' name\x3d"'+soy.$$escapeHtmlAttribute(g)+'"':"")+"\x3e";b=a.length;for(c=0;c<b;c++){var h=a[c];soy.asserts.assertType(null==h.disabled||goog.isBoolean(h.disabled)||1===h.disabled||0===h.disabled,"disabled",h.disabled,"boolean|null|undefined");f=h.disabled;soy.asserts.assertType(null==h.selected||goog.isBoolean(h.selected)||1===h.selected||0===h.selected,"selected",h.selected,
"boolean|null|undefined");g=h.selected;soy.asserts.assertType(goog.isString(h.text)||h.text instanceof goog.soy.data.SanitizedContent,"text",h.text,"string|goog.soy.data.SanitizedContent");var m=h.text;soy.asserts.assertType(null==h.value||h.value instanceof goog.soy.data.SanitizedContent||goog.isString(h.value),"value",h.value,"null|string|undefined");h=h.value;f=soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3coption "+(f?" disabled":"")+(g?" selected":"")+(h||""==h?' value\x3d"'+soy.$$escapeHtmlAttribute(h)+
'"':"")+"\x3e"+soy.$$escapeHtml(m)+"\x3c/option\x3e");d+=f}return soydata.VERY_UNSAFE.ordainSanitizedHtml(d+"\x3c/select\x3e\x3c/span\x3e")};function Dh(a){a=a||{};soy.asserts.assertType(null==a.attributes||a.attributes instanceof soydata.SanitizedHtmlAttribute||a.attributes instanceof soydata.UnsanitizedText||goog.isString(a.attributes),"attributes",a.attributes,"?soydata.SanitizedHtmlAttribute|string|undefined");soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");soy.asserts.assertType(null==a.J||a.J instanceof goog.soy.data.SanitizedContent||goog.isString(a.J),
"classes",a.J,"null|string|undefined");soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");soy.asserts.assertType(null==a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");soy.asserts.assertType(null==a.name||a.name instanceof goog.soy.data.SanitizedContent||goog.isString(a.name),"name",a.name,"null|string|undefined");soy.asserts.assertType(null==
a.placeholder||a.placeholder instanceof goog.soy.data.SanitizedContent||goog.isString(a.placeholder),"placeholder",a.placeholder,"null|string|undefined");soy.asserts.assertType(null==a.tagName||a.tagName instanceof goog.soy.data.SanitizedContent||goog.isString(a.tagName),"tagName",a.tagName,"null|string|undefined");var b=a.tagName;soy.asserts.assertType(null==a.type||a.type instanceof goog.soy.data.SanitizedContent||goog.isString(a.type),"type",a.type,"null|string|undefined");soy.asserts.assertType(null==
a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");soy.asserts.assertType(null==a.value||a.value instanceof goog.soy.data.SanitizedContent||goog.isString(a.value),"value",a.value,"null|string|undefined");var c=a.value,b=null==b?"input":b;a=""+("textarea"==b?"\x3ctextarea "+Eh(a)+"\x3e"+(c?soy.$$escapeHtmlRcdata(c):"")+"\x3c/textarea\x3e":"\x3c"+soy.$$filterHtmlElementName(b)+" "+Eh(a)+"\x3e");return soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}
function Eh(a){a=a||{};soy.asserts.assertType(null==a.attributes||a.attributes instanceof soydata.SanitizedHtmlAttribute||a.attributes instanceof soydata.UnsanitizedText||goog.isString(a.attributes),"attributes",a.attributes,"?soydata.SanitizedHtmlAttribute|string|undefined");var b=a.attributes;soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");var c=a.block;soy.asserts.assertType(null==a.J||a.J instanceof goog.soy.data.SanitizedContent||
goog.isString(a.J),"classes",a.J,"null|string|undefined");var d=a.J;soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");var f=a.disabled;soy.asserts.assertType(null==a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");var g=a.id;soy.asserts.assertType(null==a.name||a.name instanceof goog.soy.data.SanitizedContent||goog.isString(a.name),"name",a.name,
"null|string|undefined");var h=a.name;soy.asserts.assertType(null==a.placeholder||a.placeholder instanceof goog.soy.data.SanitizedContent||goog.isString(a.placeholder),"placeholder",a.placeholder,"null|string|undefined");var m=a.placeholder;soy.asserts.assertType(null==a.tagName||a.tagName instanceof goog.soy.data.SanitizedContent||goog.isString(a.tagName),"tagName",a.tagName,"null|string|undefined");var k=a.tagName;soy.asserts.assertType(null==a.type||a.type instanceof goog.soy.data.SanitizedContent||
goog.isString(a.type),"type",a.type,"null|string|undefined");var r=a.type;soy.asserts.assertType(null==a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");var A=a.small;soy.asserts.assertType(null==a.value||a.value instanceof goog.soy.data.SanitizedContent||goog.isString(a.value),"value",a.value,"null|string|undefined");a=a.value;return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute((b?" "+soy.$$filterHtmlAttributes(b):"")+' class\x3d"textInput'+
(c?" textInputBlock":"")+(d?" "+soy.$$escapeHtmlAttribute(d):"")+(A?" textInputSmall":"")+'"'+(f?" disabled":"")+(g?' id\x3d"'+soy.$$escapeHtmlAttribute(g)+'"':"")+(h?' name\x3d"'+soy.$$escapeHtmlAttribute(h)+'"':"")+(m?' placeholder\x3d"'+soy.$$escapeHtmlAttribute(m)+'"':"")+("textarea"!=k?' type\x3d"'+soy.$$escapeHtmlAttribute(null==r?"text":r)+'"'+(a?' value\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':""):""))};function Fh(a){soy.asserts.assertType(goog.isString(a.La)||a.La instanceof goog.soy.data.SanitizedContent,"cardNumberPlaceholder",a.La,"string|goog.soy.data.SanitizedContent");var b=a.La;soy.asserts.assertType(goog.isString(a.Ma)||a.Ma instanceof goog.soy.data.SanitizedContent,"cvcPlaceholder",a.Ma,"string|goog.soy.data.SanitizedContent");var c=a.Ma;soy.asserts.assertType(goog.isString(a.Pa)||a.Pa instanceof goog.soy.data.SanitizedContent,"monthPlaceholder",a.Pa,"string|goog.soy.data.SanitizedContent");
var d=a.Pa;soy.asserts.assertType(goog.isString(a.Qa)||a.Qa instanceof goog.soy.data.SanitizedContent,"yearPlaceholder",a.Qa,"string|goog.soy.data.SanitizedContent");a=a.Qa;return soydata.VERY_UNSAFE.ordainSanitizedHtml(Dh({id:"ccNumber",name:"ccNumber",type:"text",placeholder:b,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{4}([ -]+[0-9]{1,4}){3,5} ?" maxlength\x3d"23" autocomplete\x3d"cc-number" required')})+"\x3cspan class\x3d'creditCardExpiry'\x3e"+
Dh({id:"expMonth",name:"expMonth",type:"text",placeholder:d,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[01]?[0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-month" required')})+Dh({id:"expYear",name:"expYear",type:"text",placeholder:a,attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-3][0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-year" required')})+"\x3c/span\x3e"+Dh({id:"cvc",name:"cvc",type:"text",placeholder:c,
attributes:soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{3,4}" maxlength\x3d"4" autocomplete\x3d"cc-csc" required')}))}
function Gh(a){soy.asserts.assertType(goog.isString(a.kb)||a.kb instanceof goog.soy.data.SanitizedContent,"zipCodePlaceholder",a.kb,"string|goog.soy.data.SanitizedContent");var b=a.kb,c=goog.asserts.assertArray(a.fh,"expected parameter 'countryOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");a=goog.asserts.assertArray(a.Li,"expected parameter 'subdivisionOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");
return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"creditCardAddressLine1"\x3e'+Ch({id:"country",options:c,disabled:1>=c.length})+'\x3c/div\x3e\x3cdiv class\x3d"creditCardAddressLine2 hidden"\x3e'+(a?Ch({id:"region",options:a}):"")+Dh({id:"zipcode",name:"zipcode",type:"text",placeholder:b})+"\x3c/div\x3e")};function Hh(a){switch(a){case "US":return new Map(Ih);case "AU":return new Map(Jh);case "MX":return new Map(Kh);case "CA":return new Map(Lh);case "BR":return new Map(Mh);default:return new Map}}
var Ih=new Map([["US-AK","Alaska"],["US-AL","Alabama"],["US-AR","Arkansas"],["US-AS","American Samoa"],["US-AZ","Arizona"],["US-CA","California"],["US-CO","Colorado"],["US-CT","Connecticut"],["US-DC","District of Columbia"],["US-DE","Delaware"],["US-FL","Florida"],["US-GA","Georgia"],["US-GU","Guam"],["US-HI","Hawaii"],["US-IA","Iowa"],["US-ID","Idaho"],["US-IL","Illinois"],["US-IN","Indiana"],["US-KS","Kansas"],["US-KY","Kentucky"],["US-LA","Louisiana"],["US-MA","Massachusetts"],["US-MD","Maryland"],
["US-ME","Maine"],["US-MI","Michigan"],["US-MN","Minnesota"],["US-MO","Missouri"],["US-MP","Northern Mariana Islands"],["US-MS","Mississippi"],["US-MT","Montana"],["US-NC","North Carolina"],["US-ND","North Dakota"],["US-NE","Nebraska"],["US-NH","New Hampshire"],["US-NJ","New Jersey"],["US-NM","New Mexico"],["US-NV","Nevada"],["US-NY","New York"],["US-OH","Ohio"],["US-OK","Oklahoma"],["US-OR","Oregon"],["US-PA","Pennsylvania"],["US-PR","Puerto Rico"],["US-RI","Rhode Island"],["US-SC","South Carolina"],
["US-SD","South Dakota"],["US-TN","Tennessee"],["US-TX","Texas"],["US-UM","United States Minor Outlying Islands"],["US-UT","Utah"],["US-VA","Virginia"],["US-VI","Virgin Islands, U.S."],["US-VT","Vermont"],["US-WA","Washington"],["US-WI","Wisconsin"],["US-WV","West Virginia"],["US-WY","Wyoming"]]),Jh=new Map([["AU-NSW","New South Wales"],["AU-QLD","Queensland"],["AU-SA","South Australia"],["AU-TAS","Tasmania"],["AU-VIC","Victoria"],["AU-WA","Western Australia"],["AU-ACT","Australian Capital Territory"],
["AU-NT","Northern Territory"]]),Kh=new Map([["MX-CMX","Ciudad de México"],["MX-AGU","Aguascalientes"],["MX-BCN","Baja California"],["MX-BCS","Baja California Sur"],["MX-CAM","Campeche"],["MX-COA","Coahuila"],["MX-COL","Colima"],["MX-CHP","Chiapas"],["MX-CHH","Chihuahua"],["MX-DUR","Durango"],["MX-GUA","Guanajuato"],["MX-GRO","Guerrero"],["MX-HID","Hidalgo"],["MX-JAL","Jalisco"],["MX-MEX","Estado de México"],["MX-MIC","Michoacán"],["MX-MOR","Morelos"],["MX-NAY","Nayarit"],["MX-NLE","Nuevo León"],
["MX-OAX","Oaxaca"],["MX-PUE","Puebla"],["MX-QUE","Querétaro"],["MX-ROO","Quintana Roo"],["MX-SLP","San Luis Potosí"],["MX-SIN","Sinaloa"],["MX-SON","Sonora"],["MX-TAB","Tabasco"],["MX-TAM","Tamaulipas"],["MX-TLA","Tlaxcala"],["MX-VER","Veracruz"],["MX-YUC","Yucatán"],["MX-ZAC","Zacatecas"]]),Lh=new Map([["CA-AB","Alberta"],["CA-BC","British Columbia"],["CA-MB","Manitoba"],["CA-NB","New Brunswick"],["CA-NL","Newfoundland and Labrador"],["CA-NB","New Brunswick"],["CA-NT","Northwest Territories"],["CA-NS",
"Nova Scotia"],["CA-NU","Nunavut"],["CA-ON","Ontario"],["CA-PE","Prince Edward Island"],["CA-QC","Quebec"],["CA-SK","Saskatchewan"],["CA-YT","Yukon"]]),Mh=new Map([["BR-AC","Acre"],["BR-AL","Alagoas"],["BR-AP","Amapá"],["BR-AM","Amazonas"],["BR-BA","Bahia"],["BR-CE","Ceará"],["BR-DF","Distrito Federal"],["BR-ES","Espírito Santo"],["BR-GO","Goiás"],["BR-MA","Maranhão"],["BR-MT","Mato Grosso"],["BR-MS","Mato Grosso do Sul"],["BR-MG","Minas Gerais"],["BR-PR","Paraná"],["BR-PB","Paraíba"],["BR-PA","Pará"],
["BR-PE","Pernambuco"],["BR-PI","Piauí"],["BR-RN","Rio Grande do Norte"],["BR-RS","Rio Grande do Sul"],["BR-RJ","Rio de Janeiro"],["BR-RO","Rondônia"],["BR-RR","Roraima"],["BR-SC","Santa Catarina"],["BR-SE","Sergipe"],["BR-SP","São Paulo"],["BR-TO","Tocantins"]]);function Nh(a,b){a=[].concat(ja(a.entries())).sort(function(a,b){return a[1].localeCompare(b[1])}).map(function(a){return{selected:a[0]===b.gg,text:a[1],value:a[0]}});return null!=b.qa?[].concat([{selected:!b.gg,text:b.qa,value:b.Vf}],ja(a)):a}
function Oh(a){var b=new Map([["AD","Andorra"],["AE","United Arab Emirates"],["AF","Afghanistan"],["AG","Antigua and Barbuda"],["AI","Anguilla"],["AL","Albania"],["AM","Armenia"],["AO","Angola"],["AQ","Antarctica"],["AR","Argentina"],["AS","American Samoa"],["AT","Austria"],["AU","Australia"],["AW","Aruba"],["AX","Åland Islands"],["AZ","Azerbaijan"],["BA","Bosnia and Herzegovina"],["BB","Barbados"],["BD","Bangladesh"],["BE","Belgium"],["BF","Burkina Faso"],["BG","Bulgaria"],["BH","Bahrain"],["BI",
"Burundi"],["BJ","Benin"],["BL","Saint Barthélemy"],["BM","Bermuda"],["BN","Brunei Darussalam"],["BO","Bolivia"],["BQ","Bonaire, Sint Eustatius and Saba"],["BR","Brazil"],["BS","Bahamas"],["BT","Bhutan"],["BV","Bouvet Island"],["BW","Botswana"],["BY","Belarus"],["BZ","Belize"],["CA","Canada"],["CC","Cocos (Keeling) Islands"],["CD","Congo, the Democratic Republic of the"],["CF","Central African Republic"],["CG","Congo"],["CH","Switzerland"],["CI","Côte d'Ivoire"],["CK","Cook Islands"],["CL","Chile"],
["CM","Cameroon"],["CN","China"],["CO","Colombia"],["CR","Costa Rica"],["CU","Cuba"],["CV","Cape Verde"],["CW","Curaçao"],["CX","Christmas Island"],["CY","Cyprus"],["CZ","Czech Republic"],["DE","Germany"],["DJ","Djibouti"],["DK","Denmark"],["DM","Dominica"],["DO","Dominican Republic"],["DZ","Algeria"],["EC","Ecuador"],["EE","Estonia"],["EG","Egypt"],["EH","Western Sahara"],["ER","Eritrea"],["ES","Spain"],["ET","Ethiopia"],["FI","Finland"],["FJ","Fiji"],["FK","Falkland Islands (Malvinas)"],["FM","Micronesia, Federated States of"],
["FO","Faroe Islands"],["FR","France"],["GA","Gabon"],["GB","United Kingdom"],["GD","Grenada"],["GE","Georgia"],["GF","French Guiana"],["GG","Guernsey"],["GH","Ghana"],["GI","Gibraltar"],["GL","Greenland"],["GM","Gambia"],["GN","Guinea"],["GP","Guadeloupe"],["GQ","Equatorial Guinea"],["GR","Greece"],["GS","South Georgia and the South Sandwich Islands"],["GT","Guatemala"],["GU","Guam"],["GW","Guinea-Bissau"],["GY","Guyana"],["HK","Hong Kong"],["HM","Heard Island and McDonald Islands"],["HN","Honduras"],
["HR","Croatia"],["HT","Haiti"],["HU","Hungary"],["ID","Indonesia"],["IE","Ireland"],["IL","Israel"],["IM","Isle of Man"],["IN","India"],["IO","British Indian Ocean Territory"],["IQ","Iraq"],["IR","Iran"],["IS","Iceland"],["IT","Italy"],["JE","Jersey"],["JM","Jamaica"],["JO","Jordan"],["JP","Japan"],["KE","Kenya"],["KG","Kyrgyzstan"],["KH","Cambodia"],["KI","Kiribati"],["KM","Comoros"],["KN","Saint Kitts and Nevis"],["KP","North Korea"],["KR","South Korea"],["KW","Kuwait"],["KY","Cayman Islands"],
["KZ","Kazakhstan"],["LA","Laos"],["LB","Lebanon"],["LC","Saint Lucia"],["LI","Liechtenstein"],["LK","Sri Lanka"],["LR","Liberia"],["LS","Lesotho"],["LT","Lithuania"],["LU","Luxembourg"],["LV","Latvia"],["LY","Libya"],["MA","Morocco"],["MC","Monaco"],["MD","Moldova"],["ME","Montenegro"],["MF","Saint Martin"],["MG","Madagascar"],["MH","Marshall Islands"],["MK","Macedonia"],["ML","Mali"],["MM","Myanmar"],["MN","Mongolia"],["MO","Macao"],["MP","Northern Mariana Islands"],["MQ","Martinique"],["MR","Mauritania"],
["MS","Montserrat"],["MT","Malta"],["MU","Mauritius"],["MV","Maldives"],["MW","Malawi"],["MX","Mexico"],["MY","Malaysia"],["MZ","Mozambique"],["NA","Namibia"],["NC","New Caledonia"],["NE","Niger"],["NF","Norfolk Island"],["NG","Nigeria"],["NI","Nicaragua"],["NL","Netherlands"],["NO","Norway"],["NP","Nepal"],["NR","Nauru"],["NU","Niue"],["NZ","New Zealand"],["OM","Oman"],["PA","Panama"],["PE","Peru"],["PF","French Polynesia"],["PG","Papua New Guinea"],["PH","Philippines"],["PK","Pakistan"],["PL","Poland"],
["PM","Saint Pierre and Miquelon"],["PN","Pitcairn"],["PR","Puerto Rico"],["PS","Palestinian Territory"],["PT","Portugal"],["PW","Palau"],["PY","Paraguay"],["QA","Qatar"],["RE","Réunion"],["RO","Romania"],["RS","Serbia"],["RU","Russia"],["RW","Rwanda"],["SA","Saudi Arabia"],["SB","Solomon Islands"],["SC","Seychelles"],["SD","Sudan"],["SE","Sweden"],["SG","Singapore"],["SH","Saint Helena, Ascension and Tristan da Cunha"],["SI","Slovenia"],["SJ","Svalbard and Jan Mayen"],["SK","Slovakia"],["SL","Sierra Leone"],
["SM","San Marino"],["SN","Senegal"],["SO","Somalia"],["SR","Suriname"],["SS","South Sudan"],["ST","Sao Tome and Principe"],["SV","El Salvador"],["SX","Sint Maarten"],["SY","Syria"],["SZ","Swaziland"],["TC","Turks and Caicos Islands"],["TD","Chad"],["TF","French Southern Territories"],["TG","Togo"],["TH","Thailand"],["TJ","Tajikistan"],["TK","Tokelau"],["TL","Timor-Leste"],["TM","Turkmenistan"],["TN","Tunisia"],["TO","Tonga"],["TR","Turkey"],["TT","Trinidad and Tobago"],["TV","Tuvalu"],["TW","Taiwan"],
["TZ","Tanzania"],["UA","Ukraine"],["UG","Uganda"],["UM","United States Minor Outlying Islands"],["US","United States"],["UY","Uruguay"],["UZ","Uzbekistan"],["VA","Holy See (Vatican City State)"],["VC","Saint Vincent and the Grenadines"],["VE","Venezuela"],["VG","Virgin Islands, British"],["VI","Virgin Islands, U.S."],["VN","Viet Nam"],["VU","Vanuatu"],["WF","Wallis and Futuna"],["WS","Samoa"],["YE","Yemen"],["YT","Mayotte"],["ZA","South Africa"],["ZM","Zambia"],["ZW","Zimbabwe"]]);a.uj&&(b=Array.from(b.entries()).filter(function(b){b=
n(b).next().value;return a.uj.has(b)}),b=new Map(b));return Nh(b,{qa:a.qa,Vf:"ZZ",gg:a.vl})}function Ph(a){var b=Hh(a.O);u(!a.fg||b.has(a.fg),'"{}" is not a valid subdivision code of the country "{}".',a.fg,a.O);return Nh(b,{qa:a.qa,Vf:a.Vf,gg:a.fg})};var Qh=new Lb("jv",!1);function Rh(a){Backbone.View.call(this,{className:"creditCardEditor"});this.dc=this.cc=!1;this.w=a.w;this.Qd=a.Qd;this.F=a.F?a.F:Nb()}p(Rh,Backbone.View);e=Rh.prototype;e.events=function(){return{"input #ccNumber":this.Mj,"keydown #expMonth":this.kk,"input #expMonth":this.jk,input:this.wd,"keydown input":this.ik,"focus input:not([readonly])":this.gk,"blur input":this.Kj,"change #country":this.Uj,"change #region":this.nk,"change #zipcode":this.vk}};
e.fe=function(){var a={id:this.$("#creditCardId").val()?this.$("#creditCardId").val().trim():"",Ua:this.$("#cvc").val().trim(),gc:this.$("#expMonth").val().trim(),hc:this.$("#expYear").val().trim(),ab:this.$("#ccNumber").val().trim(),ua:this.$("#country").val()?this.$("#country").val().trim():void 0,Bc:this.$("#region").val()?this.$("#region").val().trim():void 0,Nd:this.$("#zipcode").val()?this.$("#zipcode").val().trim():void 0};return a.Ua.length||a.gc.length||a.hc.length||a.ab.length||a.ua.length||
a.Bc.length||a.Nd.length?a:null};e.zb=function(a){this.$el.addClass("prefilled");this.$("#creditCardId").val(a.id);this.$("#ccNumber").val("").attr("placeholder","••••••••••••"+a.pe);this.$("#expMonth").val("").attr("placeholder","••");this.$("#expYear").val("").attr("placeholder","••");this.$("#cvc").val("").attr("placeholder","•••");a.ka&&(this.$("#country").val(a.ka.O).change(),this.$("#region").val(a.ka.Lc),this.$("#zipcode").val(a.ka.zc));this.dc=this.cc=!1;this.$("#ccNumber").removeAttr("autofocus")};
e.Me=function(a){this.$("input").prop("readonly",!a);this.$("select").attr("disabled",!a)};
e.render=function(){var a;a={Yb:this.w.Yb(),Tb:this.w.Tb(),La:this.w.La(),Pa:this.w.Pa(),Qa:this.w.Qa(),Ma:this.w.Ma(),kb:this.w.kb(),fh:Oh({qa:this.w.format("creditCardCountryPlaceholder")}),Li:Ph({qa:jc(this.w),O:"ZZ"}),Dd:this.F.get(Qh)};soy.asserts.assertType(goog.isString(a.Yb)||a.Yb instanceof goog.soy.data.SanitizedContent,"creditCardLabel",a.Yb,"string|goog.soy.data.SanitizedContent");var b=a.Yb;soy.asserts.assertType(goog.isString(a.Tb)||a.Tb instanceof goog.soy.data.SanitizedContent,"billingAddressLabel",
a.Tb,"string|goog.soy.data.SanitizedContent");var c=a.Tb;soy.asserts.assertType(goog.isString(a.La)||a.La instanceof goog.soy.data.SanitizedContent,"cardNumberPlaceholder",a.La,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(a.Ma)||a.Ma instanceof goog.soy.data.SanitizedContent,"cvcPlaceholder",a.Ma,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(a.Pa)||a.Pa instanceof goog.soy.data.SanitizedContent,"monthPlaceholder",a.Pa,"string|goog.soy.data.SanitizedContent");
soy.asserts.assertType(goog.isString(a.Qa)||a.Qa instanceof goog.soy.data.SanitizedContent,"yearPlaceholder",a.Qa,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(a.kb)||a.kb instanceof goog.soy.data.SanitizedContent,"zipCodePlaceholder",a.kb,"string|goog.soy.data.SanitizedContent");goog.asserts.assertArray(a.fh,"expected parameter 'countryOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");goog.asserts.assertArray(a.Li,
"expected parameter 'subdivisionOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");soy.asserts.assertType(goog.isBoolean(a.Dd)||1===a.Dd||0===a.Dd,"showBillingAddressFields",a.Dd,"boolean");var d=!!a.Dd;soy.asserts.assertType(null==a.Xd||a.Xd instanceof goog.soy.data.SanitizedContent||goog.isString(a.Xd),"creditCardId",a.Xd,"null|string|undefined");var f=a.Xd;a=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ch3 class\x3d"creditCardLabel"\x3e'+
soy.$$escapeHtml(b)+'\x3c/h3\x3e\x3cdiv class\x3d"creditCardEditView creditCardInput"\x3e\x3cinput type\x3d"hidden" id\x3d"creditCardId" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"/\x3e'+Fh(a)+"\x3c/div\x3e"+(d?'\x3ch3 class\x3d"billingAddressLabel"\x3e'+soy.$$escapeHtml(c)+'\x3c/h3\x3e\x3cdiv class\x3d"creditCardAddress"\x3e'+Gh(a)+"\x3c/div\x3e":""));this.$el.html(a.toString());Sh(this);return this};
function Sh(a){var b=0===a.$("input").filter(function(){return this.readOnly}).length,c=a.$("#ccNumber");a.Qd&&b?c.prop("autofocus",!0):c.removeAttr("autofocus")}e.wd=function(a){var b;b=$(a.target);var c=b.data("oldValue"),d=b.val();c!==d?(b.data("oldValue",d),b=!0):b=!1;b&&"country"!==a.target.id&&"region"!==a.target.id&&"zipcode"!==a.target.id&&(this.$el.removeClass("prefilled"),this.cc=!0,this.trigger("input"))};e.ik=function(a){13===a.keyCode&&(this.trigger("requestSubmit"),a.preventDefault())};
e.gk=function(a){this.$el.addClass("focused");"zipcode"!=a.target.id&&(this.$("#ccNumber").attr("placeholder",this.w.La()),this.$("#expMonth").attr("placeholder",this.w.Pa()),this.$("#expYear").attr("placeholder",this.w.Qa()),this.$("#cvc").attr("placeholder",this.w.Ma()))};e.Kj=function(){this.$el.removeClass("focused")};
e.Mj=function(a){if("IE"!=UAParser().browser.name){a=a.target;var b=a.selectionEnd,c=a.value.length;a.value=a.value.replace(/[^\d]/g,"").replace(/(.{4})/g,"$1 ").trim();var d=c!==a.value.length,c=" "===a.value.charAt(c-1);a.selectionEnd=b+(" "===a.value.charAt(b-1)&&c&&d?1:0)}};
e.Uj=function(a){a=Ph({qa:jc(this.w),O:a.target.value});1===a.length?(this.$el.find(".creditCardAddressLine2").hide(),this.$el.find("#country").removeClass("countrySharpBottomCorners"),this.$el.find("#country").addClass("countryRoundBottomCorners"),this.$el.find(".creditCardAddressLine2 select").removeAttr("value")):(this.$el.find(".creditCardAddressLine2").show(),this.$el.find("#country").removeClass("countryRoundBottomCorners"),this.$el.find("#country").addClass("countrySharpBottomCorners"),a=$(Ch({options:a,
id:"region"}).toString()),this.$el.find(".creditCardAddressLine2 select").replaceWith(a.children()[0]));this.$el.find(".creditCardAddressLine2 input").removeAttr("value");this.dc=!0};e.nk=function(){this.dc=!0};e.vk=function(){this.dc=!0};e.kk=function(a){var b=this.$("#expMonth"),c=b.val(),d=this.$("#expYear"),f=String.fromCharCode(a.which);""===c&&f.match(/[2-9]/)?(a.preventDefault(),b.val("0"+f),d.focus()):-1<[191,32,9].indexOf(a.which)&&(a.preventDefault(),1===c.length&&b.val("0"+c),d.focus())};
e.jk=function(){2===this.$("#expMonth").val().length&&this.$("#expYear").focus()};function Y(a){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.message=a}Y.prototype=Object.create(Error.prototype);Y.prototype.constructor=Y;
function Th(a){switch(a){case "card_declined":return new Uh;case "expired_card":return new Vh;case "incorrect_cvc":return new Wh;case "incorrect_number":return new Xh;case "invalid_cvc":return new Yh;case "invalid_expiry_month":return new Zh;case "invalid_expiry_year":return new $h;case "invalid_number":return new ai;case "missing":return new bi;case "processing_error":return new ci;default:return new di(a)}}function Uh(){Y.call(this,"credit card declined")}Uh.prototype=Object.create(Y.prototype);
Uh.prototype.constructor=Uh;function Vh(){Y.call(this,"credit card expired")}Vh.prototype=Object.create(Y.prototype);Vh.prototype.constructor=Vh;function Wh(){Y.call(this,"credit card cvc incorrect")}Wh.prototype=Object.create(Y.prototype);Wh.prototype.constructor=Wh;function Xh(){Y.call(this,"credit card number incorrect")}Xh.prototype=Object.create(Y.prototype);Xh.prototype.constructor=Xh;function Yh(){Y.call(this,"credit card cvc invalid")}Yh.prototype=Object.create(Y.prototype);
Yh.prototype.constructor=Yh;function Zh(){Y.call(this,"credit card expiry month invalid")}Zh.prototype=Object.create(Y.prototype);Zh.prototype.constructor=Zh;function $h(){Y.call(this,"credit card expiry year invalid")}$h.prototype=Object.create(Y.prototype);$h.prototype.constructor=$h;function ai(){Y.call(this,"credit card number invalid")}ai.prototype=Object.create(Y.prototype);ai.prototype.constructor=ai;function ei(){Y.call(this,"credit card country invalid")}ei.prototype=Object.create(Y.prototype);
ei.prototype.constructor=ei;function fi(){Y.call(this,"credit card region invalid")}fi.prototype=Object.create(Y.prototype);fi.prototype.constructor=fi;function gi(){Y.call(this,"credit card zipcode invalid")}gi.prototype=Object.create(Y.prototype);gi.prototype.constructor=gi;function bi(){Y.call(this,"credit card missing but required")}bi.prototype=Object.create(Y.prototype);bi.prototype.constructor=bi;function ci(){Y.call(this,"credit card processing error")}ci.prototype=Object.create(Y.prototype);
ci.prototype.constructor=ci;function di(a){Y.call(this,"unknown credit card processing error "+a);this.errorCode=a}di.prototype=Object.create(Y.prototype);di.prototype.constructor=di;function hi(){Y.call(this,"no credit card entered")}hi.prototype=Object.create(Y.prototype);hi.prototype.constructor=hi;function ii(a){nh.call(this,a)}ii.prototype=Object.create(nh.prototype);ii.prototype.constructor=ii;function ji(a){this.o=a}e=ji.prototype;e.je=function(a){throw Th(a.response.errorKey);};e.Qh=function(a){if(a.error)throw new Y(a.error.message);return a};e.oe=function(a){return a instanceof Cg&&"CreditCardInvalid"===a.response.errorType};e.xg=function(a){return V(this.o,"/billing/creditcards/"+a.Tc,kh(a)).catch(Ag).get(0).then(this.Qh).catch(this.oe,this.je)};
e.getSubscription=function(a){return U(this.o,a.i?"/billing/brands/"+a.i+"/subscription?excludeStandard\x3d"+(a.ol?"true":"false"):"/billing/subscriptions/"+a.id).catch(Ag).get(0).then(Bh)};function ki(){var a=window.stripeConfig;switch(a.impl){case "local":return new li;case "stripe":return new mi(a.publishableKey,window.Stripe||null);default:throw Error('unexpected stripe impl "'+a.impl+'"');}}function li(){}li.prototype.createToken=P.method(function(a){return JSON.stringify({stripeId:"card_ "+Math.random(),brand:"Visa",expMonth:a.zf,expYear:a.Af,last4:a.ab.slice(-4)})});function mi(a,b){(this.sa=b)&&this.sa.setPublishableKey(a)}
mi.prototype.createToken=function(a){return new P(function(b,c){if(!this.sa)throw Error("Stripe API is unavailable");a={cvc:a.Ua,exp_month:a.zf,exp_year:a.Af,number:a.ab};this.sa.createToken(a,function(a,f){if(f.error){var g;try{g=f.error.code||""}catch(h){g=""}c(Th(g))}else b(f.id)})}.bind(this))};var ni=new Lb("jv",!1),oi=["BR","CA","US"];function pi(a){this.Ab=a.Ab;this.i=a.i;this.N=a.N||void 0;this.bc=a.bc;this.sa=a.sa;this.view=a.view;this.listenTo(this.view,"input",this.wd);this.listenTo(this.view,"requestSubmit",function(){this.trigger("requestSubmit")});this.F=a.F?a.F:Nb();this.w=a.w}e=pi.prototype;e.listenTo=Backbone.Events.listenTo;e.off=Backbone.Events.off;e.on=Backbone.Events.on;e.once=Backbone.Events.once;e.stopListening=Backbone.Events.stopListening;e.trigger=Backbone.Events.trigger;
e.refresh=function(){this.view.render();this.view.Me(this.bc);this.N&&this.view.zb(this.N);return this};e.remove=function(){this.stopListening();this.view.remove()};e.zb=function(a){this.N=a;this.view.zb(a);return this};e.Me=function(a){this.bc=a;this.view.Me(a);return this};P.method(function(a){function b(a){return a.Wc}return!this.N||this.view.cc||a?(a=this.view.fe(),qi(a),this.Xk(a).then(b).tap(this.zb.bind(this))):this.N});e=pi.prototype;
e.Dj=P.method(function(a){if(this.N&&!this.view.cc&&!a&&!this.view.dc)return this.N;a=this.view.fe();if(this.view.dc&&!this.view.cc)return ri(this,a),this.Wk(a);qi(a);ri(this,a);return this.xg(a).tap(this.zb.bind(this))});e.wd=function(){this.N&&!this.view.fe()&&this.zb(this.N);this.trigger("input",this.view.cc)};
e.Xk=P.method(function(a){var b=this;return this.sa.createToken({Ua:a.Ua,zf:a.gc,Af:a.hc,ab:a.ab}).then(function(a){var d=b.Ab,f=b.i;return V(d.o,"/billing/brands/"+encodeURIComponent(f)+"/account",{brand:f,stripeToken:a}).catch(Ag).get(0).get("account").then(gh).catch(d.oe,d.je)})});
e.xg=P.method(function(a){var b=this;return this.sa.createToken({Ua:a.Ua,zf:a.gc,Af:a.hc,ab:a.ab,il:a.ua,jl:a.Bc,kl:a.Nd}).then(function(c){var d=b.Ab;return V(d.o,"/billing/creditcards",ih(new hh({i:b.i,ng:c,ka:a.ua?new dh({Lc:a.Bc,O:a.ua,zc:a.Nd}):void 0,bg:!0}))).catch(Ag).get(0).then(d.Qh).get("creditCard").then($g).catch(d.oe,d.je)})});e.Wk=P.method(function(a){return this.Ab.xg(new jh({Tc:a.id,ka:new dh({Lc:a.Bc,O:a.ua,zc:a.Nd})}))});
function qi(a){if(!a)throw new hi;if(!(a.Ua&&3<=a.Ua.length&&4>=a.Ua.length))throw new Yh;if(!function(){var b=a.gc&&parseInt(a.gc,10);return b&&1<=b&&12>=b}())throw new Zh;if(!a.hc||!parseInt(a.hc,10))throw new $h;if(!function(){var b=a.ab&&a.ab.replace(/[\s-]+/g,"");return b&&13<=b.length&&19>=b.length}())throw new ai;}
function ri(a,b){if(a.F.get(ni)&&(!b.ua||"ZZ"==b.ua))throw new ei;var c;if(c=a.F.get(ni))c=jc(a.w),c=!(-1<oi.indexOf(b.ua)?b.Bc&&b.Bc!=c:1);if(c)throw new fi;if(a.F.get(ni)&&-1<oi.indexOf(b.ua)&&!b.Nd)throw new gi;};function si(a,b){if(b instanceof Uh)return a.format("creditCardDeclined");if(b instanceof Vh)return a.format("creditCardExpired");if(b instanceof Wh)return a.format("creditCardCvcIncorrect");if(b instanceof Xh)return a.format("creditCardNumberIncorrect");if(b instanceof Yh)return a.format("creditCardCvcIncorrect");if(b instanceof Zh)return a.format("creditCardExpiryMonthIncorrect");if(b instanceof $h)return a.format("creditCardExpiryYearIncorrect");if(b instanceof ai)return a.format("creditCardNumberIncorrect");
if(b instanceof bi)return a.format("creditCardMissingButRequired");if(b instanceof ci)return a.format("creditCardProcessingError");if(b instanceof di)return a.format("creditCardUnknownProcessingError",b.errorCode);if(b instanceof hi)return a.format("creditCardNoCardEntered");if(b instanceof ei)return a.format("creditCardNoCountryEntered");if(b instanceof fi)return a.format("creditCardNoRegionEntered");if(b instanceof gi)return a.format("creditCardNoZipcodeEntered");if(b instanceof Y&&b.message)return b.message;
throw Error("unrecognized CreditCardError");};function ti(a){return("YEARLY"===a.Ea?1:12)*a.ia}function ui(){this.wi=window.pricingPlans};function vi(a){this.plan=a.vb;this.title=a.title;this.pricePerMonthText=a.xk;this.summaryText=a.Rk;this.billingCycleText=a.pj}
function wi(a,b){function c(a,c){if("MONTHLY"===c)return b.format("canvaForWorkUpgradePlanSummaryMonthlyPerUser",a);if("YEARLY"===c)return b.format("canvaForWorkUpgradePlanSummaryYearlyPerUser",a);throw Error("unrecognised BillingInterval");}var d=a.slice(0).sort(function(a,b){return ti(b)-ti(a)})[0];return a.map(function(a){var g;if("MONTHLY"===a.Ea)g=b.format("canvaForWorkUpgradePlanMonthly");else if("YEARLY"===a.Ea)g=b.format("canvaForWorkUpgradePlanYearly");else throw Error("unrecognised plan billing interval");
var h=c(Math.round(a.ia/("YEARLY"===a.Ea?12:1)*100)/100,"MONTHLY"),m;m="YEARLY"===a.Ea?b.format("canvaForWorkUpgradePlanPercentSaving",((ti(d)-ti(a))/ti(d)*100).toFixed(0)/100):c(ti(a),"YEARLY");return new vi({vb:a,title:g,xk:h,Rk:m,pj:"YEARLY"===a.Ea?b.format("canvaForWorkUpgradePlanBilledYearly",a.ia):""})})};function xi(){}xi=Backbone.View.extend({className:"priceOptions",tagName:"ul"});e=xi.prototype;e.initialize=function(a){this.Nb=a.Nb};e.events=function(){return{click:this.rj}};e.render=function(){this.$el.html(this.Nb.map(this.yk).join(""));return this};e.rj=function(a){a=$(a.target).closest("li");yi(this,a.index())};
function yi(a,b){a.$(".priceOption--selected").removeClass("priceOption--selected");0<=b&&b<a.Nb.length&&(a.$("li").eq(b).addClass("priceOption--selected"),a.$("li").eq(b).find("input").prop("checked",!0),a.trigger("selectPlan",a.Nb[b].plan))}e.eg=function(){function a(a){switch(a.Ea){case "MONTHLY":return a.ia;case "YEARLY":return ti(a);default:throw Error("unknown billing interval");}}var b=[].concat(this.Nb).sort(function(b,d){return a(b.plan)-a(d.plan)}),b=this.Nb.indexOf(b[0]);yi(this,b)};
e.yk=_.template('\x3cli class\x3d"priceOption"\x3e\x3cinput name\x3d"priceOptionPlan" type\x3d"radio"\x3e\x3cspan class\x3d"priceOptionTitle"\x3e\x3c%- title %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionPricePerMonth"\x3e\x3c%- pricePerMonthText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionSummary"\x3e\x3c%- summaryText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionBillingCycle"\x3e\x3c%- billingCycleText %\x3e\x3c/span\x3e\x3c/li\x3e');var zi=xi;function Ai(a){soy.asserts.assertType(goog.isString(a.Ub)||a.Ub instanceof goog.soy.data.SanitizedContent,"billingError",a.Ub,"string|goog.soy.data.SanitizedContent");var b=a.Ub;soy.asserts.assertType(goog.isString(a.Mc)||a.Mc instanceof goog.soy.data.SanitizedContent,"tryAgain",a.Mc,"string|goog.soy.data.SanitizedContent");a=a.Mc;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"teamBillingRetry"\x3e'+soy.$$escapeHtml(b)+'\x3cbr/\x3e\x3cbutton type\x3d"button" class\x3d"button teamBillingRetryButton"\x3e'+
soy.$$escapeHtml(a)+"\x3c/button\x3e\x3c/p\x3e")}
function Bi(a){soy.asserts.assertType(goog.isString(a.claim)||a.claim instanceof goog.soy.data.SanitizedContent,"claim",a.claim,"string|goog.soy.data.SanitizedContent");var b=a.claim;soy.asserts.assertType(goog.isString(a.Td)||a.Td instanceof goog.soy.data.SanitizedContent,"createTrialPeriodPoint1",a.Td,"string|goog.soy.data.SanitizedContent");var c=a.Td;soy.asserts.assertType(goog.isString(a.Ud)||a.Ud instanceof goog.soy.data.SanitizedContent,"createTrialPeriodPoint2",a.Ud,"string|goog.soy.data.SanitizedContent");
var d=a.Ud;soy.asserts.assertType(goog.isString(a.Vd)||a.Vd instanceof goog.soy.data.SanitizedContent,"createTrialPeriodPoint3",a.Vd,"string|goog.soy.data.SanitizedContent");var f=a.Vd;soy.asserts.assertType(goog.isString(a.Kc)||a.Kc instanceof goog.soy.data.SanitizedContent,"startTrial",a.Kc,"string|goog.soy.data.SanitizedContent");var g=a.Kc;soy.asserts.assertType(goog.isString(a.Dc)||a.Dc instanceof goog.soy.data.SanitizedContent,"revertCard",a.Dc,"string|goog.soy.data.SanitizedContent");var h=
a.Dc;soy.asserts.assertType(goog.isString(a.ec)||a.ec instanceof goog.soy.data.SanitizedContent,"encryption",a.ec,"string|goog.soy.data.SanitizedContent");var m=a.ec;soy.asserts.assertType(goog.isBoolean(a.compact)||1===a.compact||0===a.compact,"compact",a.compact,"boolean");var k=!!a.compact;soy.asserts.assertType(goog.isString(a.pc)||a.pc instanceof goog.soy.data.SanitizedContent,"itemsTitle",a.pc,"string|goog.soy.data.SanitizedContent");a=a.pc;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"teamBillingOptionsContainer"\x3e\x3cdiv class\x3d"teamBillingOptions"\x3e\x3cdiv class\x3d"teamBillingInformation"\x3e\x3ch2\x3e'+
soy.$$escapeHtml(b)+"\x3c/h2\x3e\x3cul\x3e\x3cli\x3e"+soy.$$escapeHtml(c)+"\x3c/li\x3e\x3cli\x3e"+soy.$$escapeHtml(d)+"\x3c/li\x3e\x3cli\x3e"+soy.$$escapeHtml(f)+'\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"teamBillingPriceOptions"\x3e\x3c/div\x3e\x3cform class\x3d"teamBillingForm"\x3e\x3cdiv class\x3d"teamBillingCreditCardContainer"\x3e\x3cdiv class\x3d"teamBillingTotalText"\x3e\x3c/div\x3e\x3cbutton type\x3d"button" class\x3d"button buttonBlock teamBillingCreditCardSubmit"\x3e\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e'+
soy.$$escapeHtml(g)+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"button buttonBlock buttonPlain teamBillingCreditCardRevert"\x3e'+soy.$$escapeHtml(h)+'\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e\x3cp class\x3d"teamBillingSecurityMessage"\x3e'+soy.$$escapeHtml(m)+"\x3c/p\x3e\x3c/div\x3e"+(k?"":'\x3cdiv class\x3d"teamBillingPromoItems"\x3e\x3ch4\x3e'+soy.$$escapeHtml(a)+"\x3c/h4\x3e\x3c/div\x3e"))};function Ci(){}Ci=Backbone.View.extend({tagName:"ul",className:"textIconList"});Ci.prototype.initialize=function(a){this.items=a.items};
Ci.prototype.render=function(){this.$el.html(this.items.map(function(a){soy.asserts.assertType(goog.isString(a.icon)||a.icon instanceof goog.soy.data.SanitizedContent,"icon",a.icon,"string|goog.soy.data.SanitizedContent");var b=a.icon;soy.asserts.assertType(goog.isString(a.title)||a.title instanceof goog.soy.data.SanitizedContent,"title",a.title,"string|goog.soy.data.SanitizedContent");var c=a.title;soy.asserts.assertType(goog.isBoolean(a.qb)||1===a.qb||0===a.qb,"isHtml",a.qb,"boolean");var d=!!a.qb;
soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml||a.content instanceof soydata.UnsanitizedText||goog.isString(a.content),"content",a.content,"soydata.SanitizedHtml");a=a.content;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"textIconItem"'+(b?'data-icon\x3d"'+soy.$$escapeHtmlAttribute(b)+'"':"")+"\x3e\x3ch3\x3e"+soy.$$escapeHtml(c)+"\x3c/h3\x3e"+(d?soy.$$escapeHtml(a):"\x3cp\x3e"+soy.$$escapeHtml(a)+"\x3c/p\x3e")).toString()}).join(""));return this};
Ci.vj=function(a){return new Ci({items:[{title:a.format("canvaForWorkUpgradeTeamBrandKitsTitle"),content:a.format("canvaForWorkUpgradeTeamBrandKitsDescription"),icon:"teamBrandKits",qb:!1},{title:a.format("canvaForWorkUpgradeMagicallyResizeTitle"),content:a.format("canvaForWorkUpgradeMagicallyResizeDescription"),icon:"magicResize",qb:!1},{title:a.format("canvaForWorkUpgradeLayoutCreatorsTitle"),content:a.format("canvaForWorkUpgradeLayoutCreatorsDescription"),icon:"layoutCreators",qb:!1},{title:a.format("canvaForWorkUpgradePhotoFoldersTitle"),
content:a.format("canvaForWorkUpgradePhotoFoldersDescription"),icon:"photoFolders",qb:!1}]})};var Di=Ci;function Ei(){}Ei=Backbone.View.extend({className:"teamBillingSignup"});e=Ei.prototype;e.events=function(){return{"click .teamBillingCreditCardRevert":this.trigger.bind(this,"revert"),"click .teamBillingCreditCardSubmit":this.trigger.bind(this,"submit"),"click .teamBillingRetryButton":this.trigger.bind(this,"retry")}};
e.initialize=function(a){this.compact=a.compact;this.Wd=a.Wd;this.zd=a.zd;this.listenTo(this.zd,"selectPlan",this.trigger.bind(this,"selectPlan"));this.zk=Di.vj($b(a.u));this.ja=a.ja;this.u=a.u;this.Ca=hc(a.u)};
e.render=function(){var a=moment().add(this.ja,"days").format("LL"),b;b=this.u;b.pg||(b.pg=new Cc(b.config));b=b.pg;this.$el.html(Bi({compact:this.compact,claim:this.Ca.Bg(this.ja),Td:b.format("teamUpgradeCreateTrialPeriodPoint1V"),Ud:b.format("teamUpgradeCreateTrialPeriodPoint2V",a),Vd:b.format("teamUpgradeCreateTrialPeriodPoint3V"),ec:this.Ca.ec(),pc:this.Ca.pc(),Dc:this.Ca.Dc(),Kc:this.Ca.Kc()}).toString());this.compact||this.zk.render().$el.appendTo(this.$(".teamBillingPromoItems"));this.zd.render().$el.appendTo(this.$(".teamBillingPriceOptions"));
this.Wd.render();this.$(".teamBillingCreditCardContainer").prepend(this.Wd.$el);return this};e.eg=function(){this.zd.eg()};function Fi(a,b){a.$(".teamBillingCreditCardSubmit").removeClass("buttonSpinner");alert(b)}e.Hc=function(a){a=void 0===a?"":a;this.$(".teamBillingTotalText").html(a)};function Gi(a,b){a=a.$(".teamBillingCreditCardRevert");b?a.show():a.hide()}e.Fc=function(a){this.$el.toggleClass("enabled",a)};var Hi=Ei;function Ii(a){this.l=a.l;this.Bb=a.Bb;this.Ia=a.Ia;this.i=a.i;this.qd=null;this.gi=!1;this.N=null;this.mb=a.mb;this.listenTo(this.mb,{input:this.Zj,requestSubmit:this.ji});this.Uc=a.Uc;this.Ec=null;this.Fd=a.Fd;this.$e=a.$e||null;this.u=a.u;this.view=a.view;this.listenTo(this.view,{selectPlan:this.Yk,retry:this.pk,revert:this.qk,submit:this.ji})}e=Ii.prototype;e.listenTo=Backbone.Events.listenTo;e.on=Backbone.Events.on;e.once=Backbone.Events.once;e.off=Backbone.Events.off;e.stopListening=Backbone.Events.stopListening;
e.trigger=Backbone.Events.trigger;function Ji(a,b){return ti(b)-ti(a)}e.appendTo=function(a){this.view.render();a.append(this.view.$el);this.view.eg();Gi(this.view,!1);this.mb.refresh()};e.remove=function(){this.stopListening();this.mb.remove();this.view.remove()};e.Fc=function(a){this.view.Fc(a)};
function Ki(a){var b=a.i.j();a.Fc(!1);(function(){return a.$e?P.resolve(a.$e):U(a.Bb.o,"/billing/brands/"+encodeURIComponent(b)+"/account").catch(Ag).get(0).then(wa).then(gh).catch(Fg,function(){return null})})().bind(a).then(function(a){a&&a.Wc&&(this.N=a.Wc,this.mb.Me(this.Uc).zb(this.N))}).catch(function(){var a=this.view;a.$el.html(Ai({Ub:a.Ca.Ub(),Mc:a.Ca.Mc()}).toString())}).finally(function(){this.Fc(!0)})}
function Li(a){var b=pb().Cg(a.i.j());a.Ia.Bj(b).bind(a).then(function(a){this.qd=a.getCount();this.Hc()}).catch(function(){this.gi=!0;this.Hc()})}
e.Hc=function(){oa(null!=this.Ec,"A plan must be selected");var a=hc(this.u);if(this.gi)a=this.view,a.$(".teamBillingTotalText").text(a.Ca.format("teamBillingSignupTotalPriceError"));else if(null!==this.qd)if(1===this.qd)this.view.Hc();else{var b=this.Ec.ia*this.qd;if("YEARLY"===this.Ec.Ea)b=a.format("teamBillingSignupPerYear",b);else if("MONTHLY"===this.Ec.Ea)b=a.format("teamBillingSignupPerMonth",b);else throw Error("unrecognised billing interval");a=a.format("teamBillingSignupTotalPrice",this.qd,
b);this.view.Hc(a)}};e.Zj=function(a){this.N&&Gi(this.view,a)};e.pk=function(){Ki(this)};e.qk=function(){this.N&&(this.mb.zb(this.N),Gi(this.view,!1))};
e.ji=function(){this.Fc(!1);this.view.$(".teamBillingCreditCardSubmit").toggleClass("buttonSpinner",!0);this.mb.Dj().bind(this).then(function(){if(!this.Fd){var a=this.Bb,b=new wh({i:this.i.j(),vb:this.Ec.id});qa(b.i,"brand required");return V(a.o,"/billing/brands/"+b.i+"/subscription",xh(b)).catch(Ag).get(0).then(zh).catch(a.oe,a.je)}}).then(function(a){this.trigger("signup",a)}).catch(Y,function(a){this.l.track("upgrade_onboarding_card_error",{message:a.message});a=si(bc(this.u),a);Fi(this.view,
a)}).catch(function(){Fi(this.view,"An error occured while trying to subscribe")}).finally(function(){this.Fc(!0)});this.l.track("upgrade_onboarding_card_submit")};e.Yk=function(a){this.Ec=a;this.Hc()};function Mi(){}Mi=Backbone.View.extend({className:"multipageDialog"});e=Mi.prototype;e.initialize=function(a){this.H=Qf;this.Yd=0;this.ae=a.ae||[];this.ta=void 0===a.ta||a.ta;this.ra=!!a.ra;this.uc=new Sf({H:this.H,style:Uf});this.Ha=a.Ha;this.Ha.forEach(function(a){this.listenTo(a,"next",this.Nk);this.listenTo(a,"back",this.Ok)},this)};e.events=function(){return{click:this.Qj,"click .dialogMaskCloseButton":this.hide}};
e.hide=function(){this.$el.addClass("multipageDialogDisappearing");this.uc.hide();this.H.setTimeout(function(){this.trigger("hide")}.bind(this),300)};e.Qj=function(a){$(a.target).is(".multipageDialogPage, .multipageDialogPageWrapper")&&this.ta&&this.hide()};
e.render=function(){var a=this;(function(){a.ae.forEach(function(b){a.$el.addClass(b)})})();(function(){a.Ha.forEach(function(a){a.$el.detach()});a.$el.empty()})();a.ra&&a.$el.append('\x3cbutton class\x3d"buttonLink dialogMaskCloseButton"\x3eClose\x3c/button\x3e');(function(){a.Ha.forEach(function(b){var c,d;c=$("\x3cdiv\x3e").addClass("multipageDialogPageWrapper");d=$("\x3cdiv\x3e").addClass("multipageDialogPage");c.append(d);d.append(b.render().$el);a.$el.append(c)})})();Ni(this,this.Yd);return this};
e.show=function(){this.$el.addClass("multipageDialogAppearing");this.uc.show(this.render().$el);this.H.setTimeout(function(){this.$el.removeClass("multipageDialogAppearing")}.bind(this),300)};e.Nk=function(){var a=this.Yd+1;a>=this.Ha.length?this.hide():Ni(this,a)};e.Ok=function(){var a=this.Yd-1;0>a?this.hide():Ni(this,a)};
function Ni(a,b){a.trigger("pageChange",a.Ha[b]);var c=a.$(".multipageDialogPageWrapper"),d=a.$(".multipageDialogPage");a.Yd=b;c.css("transform","translateY("+-100*b+"%)");d.removeClass("multipageDialogCurrentPage");d.eq(b).addClass("multipageDialogCurrentPage")}var Oi=Mi;function Pi(a){var b;soy.asserts.assertType(null==a.attributes||a.attributes instanceof soydata.SanitizedHtmlAttribute||a.attributes instanceof soydata.UnsanitizedText||goog.isString(a.attributes),"attributes",a.attributes,"?soydata.SanitizedHtmlAttribute|string|undefined");var c=a.attributes;soy.asserts.assertType(null==a.block||goog.isBoolean(a.block)||1===a.block||0===a.block,"block",a.block,"boolean|null|undefined");var d=a.block;soy.asserts.assertType(null==a.type||a.type instanceof goog.soy.data.SanitizedContent||
goog.isString(a.type),"type",a.type,"null|string|undefined");var f=a.type;soy.asserts.assertType(null==a.J||a.J instanceof goog.soy.data.SanitizedContent||goog.isString(a.J),"classes",a.J,"null|string|undefined");var g=a.J;soy.asserts.assertType(null==a.disabled||goog.isBoolean(a.disabled)||1===a.disabled||0===a.disabled,"disabled",a.disabled,"boolean|null|undefined");var h=a.disabled;soy.asserts.assertType(null==a.href||a.href instanceof goog.soy.data.SanitizedContent||goog.isString(a.href),"href",
a.href,"null|string|undefined");var m=a.href;soy.asserts.assertType(null==a.id||a.id instanceof goog.soy.data.SanitizedContent||goog.isString(a.id),"id",a.id,"null|string|undefined");var k=a.id;soy.asserts.assertType(null==a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");var r=a.small;soy.asserts.assertType(null==a.tagName||a.tagName instanceof goog.soy.data.SanitizedContent||goog.isString(a.tagName),"tagName",a.tagName,"null|string|undefined");
var A=a.tagName;soy.asserts.assertType(goog.isString(a.text)||a.text instanceof goog.soy.data.SanitizedContent,"text",a.text,"string|goog.soy.data.SanitizedContent");a=a.text;var C=null==(b=A)?"button":b,c=""+("\x3c"+soy.$$filterHtmlElementName(C)+" "+(c?" "+soy.$$filterHtmlAttributes(c):"")+' type\x3d"'+soy.$$escapeHtmlAttribute(null==(b=f)?"button":b)+'" class\x3d"button'+(d?" buttonBlock":"")+(g?" "+soy.$$escapeHtmlAttribute(g):"")+(h&&"a"==A?" disabled":"")+(r?" buttonSmall":"")+'"'+(m?' href\x3d"'+
soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(m))+'"':"")+(k?' id\x3d"'+soy.$$escapeHtmlAttribute(k)+'"':"")+(h&&"a"!=A?" disabled":"")+"\x3e"+soy.$$escapeHtml(a)+"\x3c/"+soy.$$filterHtmlElementName(C)+"\x3e");return soydata.VERY_UNSAFE.ordainSanitizedHtml(c)};function Qi(a){a=a||{};soy.asserts.assertType(null==a.G||a.G instanceof goog.soy.data.SanitizedContent||goog.isString(a.G),"cssClass",a.G,"null|string|undefined");var b=a.G;soy.asserts.assertType(null==a.xa||goog.isBoolean(a.xa)||1===a.xa||0===a.xa,"withStar",a.xa,"boolean|null|undefined");a=a.xa;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(b?'class\x3d"'+soy.$$escapeHtmlAttribute(b)+'"':"")+'  width\x3d"20" height\x3d"15" viewBox\x3d"0 0 20 15" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath class\x3d"folderIcon__folder" fill\x3d"#FFF" d\x3d"M15.5 3H0v8.5c0 .828.672 1.5 1.5 1.5h14c.828 0 1.5-.672 1.5-1.5v-7c0-.828-.672-1.5-1.5-1.5M2 2h7L7 0H0v2h1"/\x3e'+
(a?'\x3cpath class\x3d"folderIcon__star" d\x3d"M17.83 9.827l-.51-1.074c-.476-1-1.242-1.007-1.72 0l-.51 1.074-1.065.16c-1.094.167-1.356.935-.573 1.728l.795.807-.197 1.196c-.18 1.087.467 1.536 1.423 1.013l.987-.538.987.54c.964.527 1.6.073 1.422-1.014l-.198-1.196.795-.807c.778-.788.527-1.56-.572-1.727l-1.066-.16z" fill\x3d"#F3B600"/\x3e':"")+"\x3c/svg\x3e")}
function Ri(a){a=a||{};soy.asserts.assertType(null==a.G||a.G instanceof goog.soy.data.SanitizedContent||goog.isString(a.G),"cssClass",a.G,"null|string|undefined");var b=a.G;soy.asserts.assertType(null==a.xa||goog.isBoolean(a.xa)||1===a.xa||0===a.xa,"withStar",a.xa,"boolean|null|undefined");a=a.xa;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(b?'class\x3d"'+soy.$$escapeHtmlAttribute(b)+'"':"")+' width\x3d"18" height\x3d"15" viewBox\x3d"0 0 18 15" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath class\x3d"folderIcon__folder" d\x3d"M10.32 8.842c.127-.214.2-.466.2-.736V7.64c-.267-.33-.48-.713-.606-1.127-.027-.083-.04-.18-.115-.233-.742-.998-.093-1.186-.102-1.27 0-.418-.003-.837.002-1.254.016-.387.278-1.937 2.163-1.943h.01c1.885.006 2.147 1.556 2.163 1.943.006.417 0 .836.002 1.254-.01.084.64.272-.1 1.27-.076.053-.09.15-.117.233-.127.414-.34.796-.607 1.128v.466c0 .605.37 1.12.89 1.315.142.055 1.31.27 1.762.634.303.245.69.525 1.004 1.057.088.15.23 1.19.23 1.19 0 .387-.276.7-.65.7h-3.846l.092-.336s-.006-.782-.134-1.197c-.085-.33-.254-1.277-.674-1.614-.53-.422-.76-.68-1.57-1.01zm.408.735c-.523-.424-1.883-.674-2.05-.736-.6-.226-1.032-.825-1.032-1.528v-.54c.312-.386.558-.83.706-1.31.032-.097.048-.21.134-.272.86-1.16.106-1.378.117-1.475-.002-.486.004-.972-.003-1.457C8.582 1.808 8.277.008 6.087 0 3.883.007 3.58 1.807 3.56 2.258c-.006.485 0 .97-.002 1.457.01.097-.744.316.117 1.475.086.062.102.175.134.272.147.48.393.924.704 1.31v.54c0 .703-.43 1.302-1.032 1.53-.167.06-1.526.31-2.05.735-.35.284-.802.61-1.166 1.228C.163 10.98 0 12.187 0 12.187c0 .45.32.813.752.813h10.656c.433 0 .753-.363.753-.813 0 0-.163-1.208-.265-1.382-.172-.666-.815-.944-1.167-1.228z" fill\x3d"#FFF"/\x3e'+
(a?'\x3cpath class\x3d"folderIcon__star" d\x3d"M15.83 9.827l-.51-1.074c-.476-1-1.242-1.007-1.72 0l-.51 1.074-1.065.16c-1.094.167-1.356.935-.573 1.728l.795.807-.197 1.196c-.18 1.087.467 1.536 1.423 1.013l.987-.538.987.54c.964.527 1.6.073 1.422-1.014l-.198-1.196.795-.807c.778-.788.527-1.56-.572-1.727l-1.066-.16z" fill\x3d"#F3B600"/\x3e':"")+"\x3c/svg\x3e")};function Si(a){soy.asserts.assertType(a.Id instanceof soydata.SanitizedHtml||a.Id instanceof soydata.UnsanitizedText||goog.isString(a.Id),"titleHtml",a.Id,"soydata.SanitizedHtml");var b=a.Id;soy.asserts.assertType(goog.isString(a.tc)||a.tc instanceof goog.soy.data.SanitizedContent,"memberLabel",a.tc,"string|goog.soy.data.SanitizedContent");var c=a.tc;soy.asserts.assertType(goog.isString(a.ue)||a.ue instanceof goog.soy.data.SanitizedContent,"okButton",a.ue,"string|goog.soy.data.SanitizedContent");
a=a.ue;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3ch2\x3e"+soy.$$escapeHtml(b)+'\x3c/h2\x3e\x3cp class\x3d"upgradeDialogMember__label"\x3e'+soy.$$escapeHtml(c)+"\x3c/p\x3e"+Pi({J:"upgradeDialogMember__button",text:a}))}
function Ti(a){a=goog.asserts.assertArray(a.ya,"expected parameter 'benefitList' of type list\x3cstring\x3e.");var b="";if(0<a.length){for(var b=b+'\x3cul class\x3d"upgradeDialogFeaturePromo__benefitList"\x3e',c=a.length,d=0;d<c;d++){var f=a[d],g;g=g={G:"upgradeDialogFeaturePromoBenefit__icon"};soy.asserts.assertType(null==g.G||g.G instanceof goog.soy.data.SanitizedContent||goog.isString(g.G),"cssClass",g.G,"null|string|undefined");g=g.G;g=soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(g?'class\x3d"'+
soy.$$escapeHtmlAttribute(g)+'"':"")+' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 100"\x3e\x3ccircle cx\x3d"50" cy\x3d"50" r\x3d"50"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M69.5 25.8l-26 35.4L30.1 54c-3.3-2.1-5.6 2.9-3.8 4.6 1.8 1.7 18.2 16.6 18.2 16.6.5.4 1.2.4 1.7.1.2-.1.4-.3.5-.5 0 0 24.7-40.9 26.9-44.6 2.3-3.8-1.6-7.8-4.1-4.4z"/\x3e\x3c/svg\x3e');b+='\x3cli class\x3d"upgradeDialogFeaturePromoBenefit"\x3e'+g+'\x3cspan class\x3d"upgradeDialogFeaturePromoBenefit__text"\x3e'+
soy.$$escapeHtml(f)+"\x3c/span\x3e\x3c/li\x3e"}b+="\x3c/ul\x3e"}return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)}
function Ui(a){soy.asserts.assertType(goog.isString(a.se)||a.se instanceof goog.soy.data.SanitizedContent,"meganKelleyQuote",a.se,"string|goog.soy.data.SanitizedContent");var b=a.se;soy.asserts.assertType(goog.isString(a.re)||a.re instanceof goog.soy.data.SanitizedContent,"meganKelleyCite",a.re,"string|goog.soy.data.SanitizedContent");var c=a.re;soy.asserts.assertType(goog.isString(a.$d)||a.$d instanceof goog.soy.data.SanitizedContent,"donnaMoritzQuote",a.$d,"string|goog.soy.data.SanitizedContent");
var d=a.$d;soy.asserts.assertType(goog.isString(a.Zd)||a.Zd instanceof goog.soy.data.SanitizedContent,"donnaMoritzCite",a.Zd,"string|goog.soy.data.SanitizedContent");var f=a.Zd;soy.asserts.assertType(goog.isString(a.Te)||a.Te instanceof goog.soy.data.SanitizedContent,"travisBernardQuote",a.Te,"string|goog.soy.data.SanitizedContent");var g=a.Te;soy.asserts.assertType(goog.isString(a.Se)||a.Se instanceof goog.soy.data.SanitizedContent,"travisBernardCite",a.Se,"string|goog.soy.data.SanitizedContent");
a=a.Se;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"upgradeDialogQuotes"\x3e\x3cblockquote\x3e'+soy.$$escapeHtml(b)+"\x3ccite\x3e"+soy.$$escapeHtml(c)+"\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e"+soy.$$escapeHtml(d)+"\x3ccite\x3e"+soy.$$escapeHtml(f)+"\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e"+soy.$$escapeHtml(g)+"\x3ccite\x3e"+soy.$$escapeHtml(a)+"\x3c/cite\x3e\x3c/blockquote\x3e\x3c/div\x3e")}
function Vi(a){a=goog.asserts.assertArray(a.na,"expected parameter 'features' of type list\x3c[enabled: bool, name: string]\x3e.");var b="";if(0<a.length){for(var b=b+'\x3cul class\x3d"upgradeDialogPlanCompare__features"\x3e',c=a.length,d=0;d<c;d++)var f=a[d],b=b+('\x3cli class\x3d"upgradeDialogPlanCompare__feature"\x3e'+(f.enabled?'\x3cspan class\x3d"upgradeDialogPlanCompare__featureText"\x3e'+soy.$$escapeHtml(f.name)+"\x3c/span\x3e":'\x3cspan class\x3d"upgradeDialogPlanCompare__featureText--disabled"\x3e'+
soy.$$escapeHtml(f.name)+"\x3c/span\x3e")+"\x3c/li\x3e");b+="\x3c/ul\x3e"}return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)};function Wi(){}Wi=Backbone.View.extend({className:"promotion"});Wi.prototype.initialize=function(a){this.model=a.model};Wi.prototype.events=function(){var a=this;return{"click .upgradeDialogFeaturePromo__button":function(){a.trigger("next")}}};
Wi.prototype.render=function(){var a=this.model;soy.asserts.assertType(a.Aa instanceof soydata.SanitizedHtml||a.Aa instanceof soydata.UnsanitizedText||goog.isString(a.Aa),"headingHtml",a.Aa,"soydata.SanitizedHtml");var b=a.Aa;soy.asserts.assertType(goog.isString(a.aa)||a.aa instanceof goog.soy.data.SanitizedContent,"imageUrl",a.aa,"string|goog.soy.data.SanitizedContent");var c=a.aa;soy.asserts.assertType(goog.isString(a.Z)||a.Z instanceof goog.soy.data.SanitizedContent,"buttonLabel",a.Z,"string|goog.soy.data.SanitizedContent");
var d=a.Z;soy.asserts.assertType(null==a.body||a.body instanceof goog.soy.data.SanitizedContent||goog.isString(a.body),"body",a.body,"null|string|undefined");var f=a.body;soy.asserts.assertType(null==a.ne||a.ne instanceof goog.soy.data.SanitizedContent||goog.isString(a.ne),"imageAlt",a.ne,"null|string|undefined");var g=a.ne;soy.asserts.assertType(null==a.ya||goog.isArray(a.ya),"benefitList",a.ya,"?Array\x3cstring\x3e|undefined");var h=a.ya,a=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"upgradeDialogFeaturePromo promoBody"\x3e\x3cdiv class\x3d"upgradeDialogFeaturePromo__content"\x3e\x3ch2 class\x3d"upgradeDialogFeaturePromo__heading"\x3e'+
soy.$$escapeHtml(b)+"\x3c/h2\x3e"+(f?'\x3cp class\x3d"upgradeDialogFeaturePromo__body"\x3e'+soy.$$escapeHtml(f)+"\x3c/p\x3e":"")+(h?Ti(a):"")+'\x3cdiv class\x3d"upgradeDialogFeaturePromo__footer"\x3e'+Pi({J:"upgradeDialogFeaturePromo__button",text:d})+'\x3c/div\x3e\x3c/div\x3e\x3cimg class\x3d"upgradeDialogFeaturePromo__image" src\x3d'+soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeMediaUri(c))+" "+(g?"alt\x3d"+soy.$$escapeHtmlAttributeNospace(g):"")+" /\x3e\x3c/div\x3e").toString();this.$el.html(a);
return this};var Xi=Wi;function Yi(a){Backbone.View.call(this,{className:"upgradeDialogMember"});this.g=a.g}p(Yi,Backbone.View);Yi.prototype.events=function(){return{"click .upgradeDialogMember__button":this.trigger.bind(this,"next")}};Yi.prototype.render=function(){this.$el.html(Si({Id:soydata.VERY_UNSAFE.ordainSanitizedHtml(this.g.format("canvaForWorkUpgradeMemberTitleHtml")),tc:this.g.tc(),ue:this.g.format("canvaForWorkUpgradeMemberOkButton")}).toString());return this};function Zi(a){var b=this;Backbone.View.call(this,{className:"promotion",events:{"click .upgradeDialogPlanCompare__infoButton":function(a){return $i(b,a)}}});this.W=a.W;this.model=a.model}p(Zi,Backbone.View);function $i(a,b){var c=parseInt(b.currentTarget.dataset.plantype,10);(b=a.model.gf.find(function(a){return a.Mb===c}))||(b=a.model.gf[0]);a.trigger("next")}
Zi.prototype.render=function(){var a=this.model;soy.asserts.assertType(a.hd instanceof soydata.SanitizedHtml||a.hd instanceof soydata.UnsanitizedText||goog.isString(a.hd),"headerHtml",a.hd,"soydata.SanitizedHtml");var b=a.hd,c=goog.asserts.assertArray(a.gf,"expected parameter 'bundles' of type list\x3c[buttonClass: string, buttonLabel: string, features: list\x3c[enabled: bool, name: string]\x3e, heading: string, imageUrl: string, planType: float|int, preferred: bool, price: string]\x3e.");soy.asserts.assertType(goog.isString(a.bb)||
a.bb instanceof goog.soy.data.SanitizedContent,"perUserMonthText",a.bb,"string|goog.soy.data.SanitizedContent");var d=a.bb;soy.asserts.assertType(goog.isString(a.Xa)||a.Xa instanceof goog.soy.data.SanitizedContent,"footerText",a.Xa,"string|goog.soy.data.SanitizedContent");for(var a=a.Xa,f='\x3cdiv class\x3d"upgradeDialogPlanCompare promoBody"\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__heading"\x3e'+soy.$$escapeHtml(b)+'\x3c/div\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__bundles"\x3e',b=c.length,
g=0;g<b;g++){var h;h=soy.$$assignDefaults({bb:d,Xa:a},c[g]);soy.asserts.assertType(goog.isBoolean(h.Ac)||1===h.Ac||0===h.Ac,"preferred",h.Ac,"boolean");var m=!!h.Ac;soy.asserts.assertType(goog.isString(h.heading)||h.heading instanceof goog.soy.data.SanitizedContent,"heading",h.heading,"string|goog.soy.data.SanitizedContent");var k=h.heading;soy.asserts.assertType(goog.isString(h.bb)||h.bb instanceof goog.soy.data.SanitizedContent,"perUserMonthText",h.bb,"string|goog.soy.data.SanitizedContent");var r=
h.bb;soy.asserts.assertType(goog.isString(h.ia)||h.ia instanceof goog.soy.data.SanitizedContent,"price",h.ia,"string|goog.soy.data.SanitizedContent");var A=h.ia;soy.asserts.assertType(goog.isString(h.aa)||h.aa instanceof goog.soy.data.SanitizedContent,"imageUrl",h.aa,"string|goog.soy.data.SanitizedContent");var C=h.aa;goog.asserts.assertArray(h.na,"expected parameter 'features' of type list\x3c[enabled: bool, name: string]\x3e.");soy.asserts.assertType(goog.isString(h.Z)||h.Z instanceof goog.soy.data.SanitizedContent,
"buttonLabel",h.Z,"string|goog.soy.data.SanitizedContent");var W=h.Z;soy.asserts.assertType(goog.isString(h.Rc)||h.Rc instanceof goog.soy.data.SanitizedContent,"buttonClass",h.Rc,"string|goog.soy.data.SanitizedContent");var ba=h.Rc;soy.asserts.assertType(goog.isString(h.Xa)||h.Xa instanceof goog.soy.data.SanitizedContent,"footerText",h.Xa,"string|goog.soy.data.SanitizedContent");var ca=h.Xa;soy.asserts.assertType(goog.isNumber(h.Mb),"planType",h.Mb,"number");var Ca=h.Mb;h=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"upgradeDialogPlanCompare__bundleInfo"\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__header '+
(m?"upgradeDialogPlanCompare__header--preferred":"")+'"\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__headerTop"\x3e\x3cimg class\x3d"upgradeDialogPlanCompare__image" src\x3d'+soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeMediaUri(C))+' /\x3e\x3ch3 class\x3d"upgradeDialogPlanCompare__headerText"\x3e'+soy.$$escapeHtml(k)+'\x3c/h3\x3e\x3cspan class\x3d"upgradeDialogPlanCompare__price"\x3e\x3csup class\x3d"upgradeDialogPlanCompare__priceSymbol"\x3e$\x3c/sup\x3e'+soy.$$escapeHtml(A)+'\x3c/span\x3e\x3cspan class\x3d"upgradeDialogPlanCompare__disclaimer"\x3e'+
soy.$$escapeHtml(r)+'\x3csup class\x3d"upgradeDialogPlanCompare__disclaimerAsterisk"\x3e*\x3c/sup\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__headerBottom'+(m?"--preferred":"")+'"\x3e\x3c/div\x3e\x3cdiv upgradeDialogPlanCompare__bundles\x3e'+Vi(h)+'\x3c/div\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__infoButton" data-plantype\x3d"'+soy.$$escapeHtmlAttribute(Ca)+'"\x3e'+Pi({J:ba,text:W})+'\x3c/div\x3e\x3cdiv class\x3d"upgradeDialogPlanCompare__footer"\x3e*'+
soy.$$escapeHtml(ca)+"\x3c/div\x3e\x3c/div\x3e");f+=h}c=soydata.VERY_UNSAFE.ordainSanitizedHtml(f+"\x3c/div\x3e\x3c/div\x3e").toString();this.$el.html(c);return this};function aj(a,b){return Q(Q(Q(new Kb("upgrade_cta_clicked"),"section","homepage"),"subsection",a),"location",b)}function bj(a,b,c){return Q(Q(Q(Q(Q(new Kb("upgrade_dialog_cta_clicked"),"section",a),"subsection","upgrade_dialog"),"location","bottom"),"feature",b),"planType",c)}function cj(a,b,c){return Q(Q(Q(Q(new Kb("upgrade_dialog_loaded"),"section",a),"subsection","upgrade_dialog"),"can_upgrade",b),"feature",c)};function dj(){}function ej(){var a=v(dj,window.clientInfo),b;b=v(fj,a.brandInfo);b.brand=eb(b.brand);b.subscription&&(b.subscription=ph(b.subscription));b=Object.freeze(b);a.brandInfo=b;b=v(gj,a.user);b.avatar&&(b.avatar=Za(b.avatar));b=Object.freeze(b);a.user=b;return Object.freeze(a)}function fj(){}fj.prototype.K=function(){return this.brand};fj.prototype.getSubscription=function(){return this.subscription||null};function gj(){}e=gj.prototype;e.j=function(){return this.id};e.Ih=function(){return this.avatar};
e.he=function(){return this.username};e.Oa=function(){return this.displayName};e.Gf=function(){return this.roles};e.Ff=function(){return this.personalBrand};e.Lh=function(){return this.locale};e.Kh=function(){return this.country};e.Ui=function(){return gb({id:this.j(),username:this.he(),personalBrand:this.Ff(),displayName:this.Oa(),avatar:Xa(this.Ih()),roles:this.Gf(),countryCode:this.Kh(),locale:this.Lh()})};function hj(a){this.W=a.W;this.ma=null;this.ja=a.ja||0;this.ta=void 0===a.ta||a.ta;this.Vb=void 0===a.Vb||a.Vb;this.ra=void 0===a.ra||a.ra;this.l=a.l;this.zj=_.once(function(){Ki(a.W);Li(a.W)});this.W.once("signup",this.uk.bind(this));this.g=a.Sc;this.Sa=a.Sa;this.yd=a.yd;this.cb=a.cb;this.Mb=a.Jb}e=hj.prototype;e.listenTo=Backbone.Events.listenTo;e.listenToOnce=Backbone.Events.listenToOnce;e.on=Backbone.Events.on;e.once=Backbone.Events.once;e.off=Backbone.Events.off;e.stopListening=Backbone.Events.stopListening;
e.trigger=Backbone.Events.trigger;e.remove=function(){this.ma&&this.ma.remove()};
e.show=function(a){var b=this;if(this.Sa){var c=ij(this,this.W,a||7);c.on("next",function(){var c=b.Mb,c=/\/design\//.test(location.pathname)?bj("editor",a,c):bj("homepage",a,c);Jb(b.l,c)});var d=new Backbone.View({className:"upgradeDialogSignup"});this.ma=new Oi({ae:["upgradeDialog"],ta:this.ta,ra:this.ra,Ha:[c,d]});this.ma.on("hide",function(){b.ma.remove();b.ma=null;b.W.remove();b.trigger("hide")});this.zj();this.ma.show();jj(this);this.W.appendTo(d.$el);d.$el.append(Ui({se:this.g.format("canvaForWorkUpgradeQuoteMeganKelleyContent"),
re:this.g.format("canvaForWorkUpgradeQuoteMeganKelleyCite"),$d:this.g.format("canvaForWorkUpgradeQuoteDonnaMoritzContent"),Zd:this.g.format("canvaForWorkUpgradeQuoteDonnaMoritzCite"),Te:this.g.format("canvaForWorkUpgradeQuoteTravisBernardContent"),Se:this.g.format("canvaForWorkUpgradeQuoteTravisBernardCite")}).toString())}else kj(this)};
function kj(a){var b=new Yi({g:a.g});a.ma=new Oi({ae:["upgradeDialog"],ta:a.ta,ra:a.ra,Ha:[b]});a.ma.on("hide",function(){a.ma.remove();a.ma=null;a.trigger("hide")});a.ma.show();jj(a)}e.uk=function(){this.Vb&&this.ma&&this.ma.remove();this.trigger("signup")};function jj(a){if(/\/design\//.test(location.pathname)){if(a.l){var b=a.l;a=a.Sa;a=cj("editor",a.Sa,a.feature);Jb(b,a)}}else a.l&&(b=a.l,a=a.Sa,a=cj("homepage",a.Sa,a.feature),Jb(b,a))}
function ij(a,b,c){var d=a.g.format("canvaForWorkFeatureUpgradeButtonLabel");switch(c){case 5:return new Xi({W:b,model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeUnlimitedFoldersHeadingHtml"),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_folders.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});case 2:return new Xi({W:b,model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeResizeHeadingHtml"),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_resize.png",ya:[qc(a.g),pc(a.g),mc(a.g),oc(a.g)]}});case 4:return new Xi({W:b,
model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeTemplatesHeadingHtml"),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_templates.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});case 3:return new Xi({W:b,model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeTransparentBackgroundsHeadingHtml"),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_transparent_bg.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});case 6:return new Xi({W:b,model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeCollaborateHeadingHtml"),
body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_teams.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});case 8:return new Xi({W:b,model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeExclusiveMediaHeadingHtml"),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_exclusive_media.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});case 9:return new Xi({W:b,model:{Z:d,Aa:qc(a.g),body:lc(a.g),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_exclusive_media.png",ya:[pc(a.g),mc(a.g),nc(a.g),oc(a.g)]}});case 10:case 11:return new Zi({W:b,
model:{hd:10===c?a.g.format("canvaForWorkBundleHeaderFreeImage"):a.g.format("canvaForWorkBundleHeaderUpgrade"),bb:a.g.format("canvaForWorkBundlePerUserMonth"),gf:[{heading:a.g.format("canvaForWorkBundleImagesProHeading"),Z:yc(a.g),Rc:"upgradeDialogPlanCompare__imagesProButton",Mb:1,cb:a.cb.get(1),Ac:!1,ia:"4.95",aa:"https://static.canva.com/static/images/icon_image_bundle.svg",na:[{name:sc(a.g),enabled:!0},{name:rc(a.g),enabled:!0},{name:tc(a.g),enabled:!0},{name:uc(a.g),enabled:!1},{name:vc(a.g),enabled:!1},{name:wc(a.g),
enabled:!1},{name:xc(a.g),enabled:!1}]},{heading:a.g.format("canvaForWorkBundleC4WHeading"),Z:yc(a.g),Rc:"upgradeDialogPlanCompare__C4WButton",Mb:0,cb:a.cb.get(0),Ac:!0,ia:"9.95",aa:"https://static.canva.com/static/images/icon_c4w_bundle_crown.svg",na:[{name:sc(a.g),enabled:!0},{name:rc(a.g),enabled:!0},{name:tc(a.g),enabled:!0},{name:uc(a.g),enabled:!0},{name:vc(a.g),enabled:!0},{name:wc(a.g),enabled:!0},{name:xc(a.g),enabled:!0}]}],Xa:a.g.format("canvaForWorkBundleFootNote")}});case 0:case 1:case 7:return new Xi({W:b,
model:{Z:d,Aa:a.g.Hb("canvaForWorkFeatureUpgradeGeneralHeadingHtml"),body:a.g.format("canvaForWorkFeatureUpgradeIncreaseProductivity"),aa:"https://static.canva.com/static/images/upgrade_dialog_feature_general.png",ya:[qc(a.g),pc(a.g),nc(a.g),oc(a.g)]}});default:throw Error("Not a recognised feature: "+c);}};function lj(){this.wa=[255,0,255];this.le=[300,100,50]}function mj(a,b,c,d){a.wa=[b,c,d];b/=255;c/=255;d/=255;var f=Math.max(b,c,d),g=Math.min(b,c,d),h;if(f==g)h=g=0;else{var m=f-g,g=m/f;switch(f){case b:h=(c-d)/m+(c<d?6:0);break;case c:h=(d-b)/m+2;break;case d:h=(b-c)/m+4}h/=6}a.le=[360*h,100*g,100*f];return a}
function nj(a){var b=new lj;if(!/^#?[0-9a-f]{1,6}$/i.test(a))throw new SyntaxError('Invalid hexadecimal color: "'+a+'"');"#"==a.charAt(0)&&(a=a.slice(1));var c=Math.ceil(a.length/3);return mj(b,oj(a,0*c,c),oj(a,1*c,c),oj(a,2*c,c))}e=lj.prototype;e.tg=function(){return"#"+(256+this.wa[0]).toString(16).slice(-2)+(256+this.wa[1]).toString(16).slice(-2)+(256+this.wa[2]).toString(16).slice(-2)};e.clone=function(){var a=new lj;a.wa=this.wa;a.le=this.le;return a};
e.Jh=function(){return Math.round(Math.sqrt(.241*this.wa[0]*this.wa[0]+.691*this.wa[1]*this.wa[1]+.068*this.wa[2]*this.wa[2]))};e.equals=function(a){return null!=a&&a.serialize()===this.serialize()};
function pj(a){var b=String(a);if("#"===b.slice(0,1))return nj(b);if("hsl("===b.slice(0,4)){a=new lj;var c=/^hsl\((\d*(?:\.\d+)?),\s*(\d*(?:\.\d+)?)%,\s*(\d*(?:\.\d+)?)%\)$/.exec(b);if(!c)throw new SyntaxError('Invalid HSL color: "'+b+'"');var d,b=+c[2];d=+c[3];b/=100;d/=100;var f=b*(.5>d?d:1-d),g=d+f;d=[+c[1],100*(0<d?2*f/g:b),100*g];b=d[0];c=d[1];d=d[2];a.le=[b,c,d];f=b/60;b=c/100;c=d/100;d=Math.floor(f);var h=f-d,f=c*(1-b),g=c*(1-h*b),b=c*(1-(1-h)*b);d%=6;a.wa=[Math.round(255*[c,g,f,f,b,c][d]),
Math.round(255*[b,c,c,g,f,f][d]),Math.round(255*[f,f,b,c,c,g][d])];return a}if("rgb("===b.slice(0,4)){a=new lj;c=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(b);if(!c)throw new SyntaxError('Invalid RGB color: "'+b+'"');return mj(a,+c[1],+c[2],+c[3])}if(6>=b.length)return nj(b);throw Error("could not parse color: "+a);}function oj(a,b,c){var d=parseInt(a.charAt(b),16)|0;return 16*d+(1==c?d:parseInt(a.charAt(b+1),16)|0)}e.serialize=lj.prototype.tg;e.toString=lj.prototype.tg;function qj(a){u(0<a.size,"invalid avatar size {}",a.size);Backbone.View.call(this,{className:"avatar"});this.Sb=a.Sb||null;this.Kb=a.Kb||null;this.Cb=a.Cb||null;this.size=a.size;this.Za=!!a.Za;this.eb=!!a.eb;this.jb=!!a.jb;this.Va=!!a.Va}p(qj,Backbone.View);
qj.prototype.render=function(){var a=this.Sb&&this.Kb,b=!!this.Kb;this.$el.css({width:this.size+"px",height:this.size+"px",lineHeight:this.size/2+"px"});this.Sb&&this.$el.css("backgroundImage","url("+this.Sb+")");a?(this.$el.addClass("avatar--composite"),this.$el.css("fontSize",this.size/4+"px")):b&&(this.$el.addClass("avatar--brand"),this.$el.css("fontSize",this.size/2+"px"));this.Kb&&this.$el.attr("data-letter",this.Kb);this.Cb&&(this.$el.css("backgroundColor",this.Cb.tg()),208<this.Cb.Jh()&&this.$el.addClass("avatar--light"));
this.$el.toggleClass("avatar--whiteBorder",this.jb);this.$el.toggleClass("avatar--darkBorder",this.Va);this.$el.toggleClass("avatar--glow",this.Za);this.$el.toggleClass("avatar--pointer",this.eb);return this};function rj(a){return(a.Oa()||"Brand").toUpperCase().trim().replace(/^THE\s+/,"").charAt(0)}function sj(a){a=a.brandColor;return pj(a?"#"+a:"#b0b0b0")}
function tj(a,b){a=a.avatar.sizes;oa(0<a.size,"avatar bundle is empty");var c=b*(window.devicePixelRatio||1);return _.chain([].concat(ja(a.values()))).sortBy(function(a){return Math.abs(a.size-c)}).sortBy(function(a){return a.size<c}).first().value().pa()}function uj(a){var b=tj(a.user,a.size);a=new qj({Sb:b,size:a.size,Za:a.Za,eb:a.eb,jb:a.jb,Va:a.Va});a.render();return a}
function vj(a){if(a.i.personal)return uj(a);var b=tj(a.user,a.size),c=rj(a.i),d=sj(a.i);a=new qj({Sb:b,Kb:c,Cb:d,size:a.size,Za:a.Za,eb:a.eb,jb:a.jb,Va:a.Va});a.render();return a};function wj(){}wj=Backbone.View.extend({tagName:"li",className:"brand"});wj.prototype.initialize=function(a){var b;if(a.la.i.personal)b=uj({user:a.user,size:36});else{b={i:a.la.i,size:36};var c=rj(b.i),d=sj(b.i);b=new qj({Kb:c,Cb:d,size:b.size,Za:b.Za,eb:b.eb,jb:b.jb,Va:b.Va});b.render()}this.ef=b;this.la=a.la;this.v=a.v};
wj.prototype.render=function(){this.$el.html(this.template({personal:this.la.i.personal,personalLabel:this.v.format("userMenuPersonalBrandLabel"),displayName:this.la.i.Oa(),url:this.la.url}));this.$(".left").append(this.ef.$el);return this};wj.prototype.template=_.template('\x3ca href\x3d"\x3c%- url %\x3e"\x3e\x3cdiv class\x3d"left"\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3c% if (personal) { %\x3e\x3c%- personalLabel %\x3e\x3c% } else { %\x3e\x3c%- displayName %\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/a\x3e');
var xj=wj;function yj(){}yj=Backbone.View.extend({className:"actions",tagName:"ul"});yj.prototype.initialize=function(a){this.v=a.v;this.Ic=!!a.Ic};yj.prototype.render=function(){this.$el.toggleClass("singleAction",!this.Ic);this.$el.html(this.template({showUpgradeButton:this.Ic,upgrade:this.v.Bg(),signOut:this.v.signOut()}));return this};yj.prototype.events=function(){return{"click #upgrade":this.trigger.bind(this,"upgrade")}};yj.prototype.template=_.template('\x3c% if (showUpgradeButton) { %\x3e\x3ca class\x3d"button buttonSmall" id\x3d"upgrade"\x3e\x3c%- upgrade %\x3e\x3c/a\x3e\x3c% } %\x3e\x3ca class\x3d"button buttonLink" href\x3d"/logout"\x3e\x3c%- signOut %\x3e\x3c/a\x3e');
var zj=yj;function Aj(a){Backbone.View.call(this,{className:"active brand"});this.v=a.v;this.ef=vj({i:a.i,user:a.user,size:60,jb:!0});this.i=a.i;this.user=a.user;this.ub=!!a.ub}p(Aj,Backbone.View);
Aj.prototype.render=function(){var a=this.el,b;b=this.i.Oa()||this.v.yc();var c=this.user.Oa(),d="/"+this.user.he(),f=this.v.Mk(),g=this.v.bl(),h=this.ub;soy.asserts.assertType(null==d||d instanceof goog.soy.data.SanitizedContent||goog.isString(d),"profilePageUrl",d,"null|string|undefined");soy.asserts.assertType(null==c||c instanceof goog.soy.data.SanitizedContent||goog.isString(c),"displayName",c,"null|string|undefined");soy.asserts.assertType(null==b||b instanceof goog.soy.data.SanitizedContent||
goog.isString(b),"brandName",b,"null|string|undefined");soy.asserts.assertType(goog.isString(f)||f instanceof goog.soy.data.SanitizedContent,"settings",f,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(g)||g instanceof goog.soy.data.SanitizedContent,"viewProfile",g,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isBoolean(h)||1===h||0===h,"openInNewTab",h,"boolean");h=!!h;b=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"activeUser"\x3e\x3cdiv class\x3d"userDisplayName"\x3e'+
soy.$$escapeHtml(c)+'\x3c/div\x3e\x3cdiv class\x3d"teamDisplayName"\x3e'+soy.$$escapeHtml(b)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"userMenuBrandActions"\x3e\x3ca href\x3d"/account"'+(h?' target\x3d"_blank"':"")+"\x3e"+soy.$$escapeHtml(f)+"\x3c/a\x3e"+(d?'\x3ca href\x3d"'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(d))+'"'+(h?' target\x3d"_blank"':"")+"\x3e"+soy.$$escapeHtml(g)+"\x3c/a\x3e":"")+"\x3c/div\x3e");a.innerHTML=b;this.$el.children().first().append(this.ef.$el);return this};function Bj(){}Bj=Backbone.View.extend({className:"brandListWrapper"});Bj.prototype.initialize=function(a){this.Db=a.Db;this.user=a.user;this.v=a.v};function Cj(a,b){if(!a.el.parentElement)throw Error("This element must be added to the DOM before display() can be called");b&&a.$el.addClass("animate");b=a.$el.find("ul").height();a.$el.height(b)}
Bj.prototype.render=function(){var a=$('\x3cul class\x3d"brandList"\x3e');this.$el.html(a);this.Db.forEach(function(b){(new xj({la:b,user:this.user,v:this.v})).render().$el.appendTo(a)}.bind(this));return this};var Dj=Bj;function Ej(){}Ej=T.extend({className:"userMenuContainer"});
Ej.prototype.initialize=function(a){this.Rd=a.Rd;this.ti=null;this.user=a.user;this.v=a.v;this.Od=a.Od;this.gb=a.gb;this.Fg=new Aj({v:a.v,i:this.Od.i,user:a.user,ub:a.ub});this.ff=this.Qc=null;var b=$("\x3cdiv\x3e\x3c/div\x3e");b.append(this.Fg.render().$el);var c=new zj({v:a.v,Ic:a.Ic});this.listenTo(c,{remove:this.remove,upgrade:this.trigger.bind(this,"upgrade")});this.gb&&(this.ff=$('\x3cspan class\x3d"brandListLoadingSpinner"\x3e'),b.append(this.ff));b.append(c.render().$el);T.prototype.initialize.call(this,
{content:b,position:["leftTop","top"],ba:a.ba})};Ej.prototype.show=function(){this.ti=this.Rd.now();return T.prototype.show.call(this)};Ej.prototype.Kk=function(a){if(!this.gb)throw Error("Cannot use setBrands when showBrands is set to false");var b=this,c=function(){return a.filter(function(a){return a.i.j()!==b.Od.i.j()})}();this.Qc&&this.Qc.remove();0<c.length&&(this.Qc=(new Dj({Db:c,user:b.user,v:this.v})).render(),this.Qc.$el.insertAfter(b.Fg.$el),Cj(this.Qc,100<this.Rd.now()-this.ti));this.ff.addClass("done")};
var Fj=Ej;function Gj(a){return a.F.get(Tb)?(window.open("https://about.canva.com/pricing","_blank"),!0):!1};function Hj(a){this.l=a.l;this.na=a.na;this.v=a.v;this.af=a.af;this.$a=this.Db=null;this.lb=a.lb;this.al=a.al||"user_menu";this.profiles=a.profiles;this.Oi=a.Oi;this.lg=a.lg;this.Fb=a.Fb;this.Hd=a.Hd;this.ba=a.ba;this.user=a.user;this.bf=a.bf;this.gb=void 0!==a.gb?a.gb:!0;this.ub=!!a.ub}e=Hj.prototype;e.init=function(){this.Fb.click(function(){this.Fb.toggleClass(this.Hd);this.Fb.hasClass(this.Hd)?Ij(this):this.$a.remove()}.bind(this))};e.listenTo=Backbone.Events.listenTo;e.off=Backbone.Events.off;
e.on=Backbone.Events.on;e.stopListening=Backbone.Events.stopListening;e.trigger=Backbone.Events.trigger;e.Oe=function(){if(Gj(this.na))Jb(this.l,aj("user_menu","bottom")),this.$a.remove();else if(this.lb){var a=this.lb();a.on("signup",function(){window.location.href=a.yd});Jb(this.l,aj("user_menu","bottom"));a.show();this.$a.remove()}};
function Ij(a){var b=function(){this.$a=new Fj({v:this.v,Od:f(this.af),Ic:this.bf,profiles:this.profiles,user:this.user,Rd:Of,gb:this.gb,ub:this.ub,ba:this.ba});this.gb&&c().bind(this.$a).then(this.$a.Kk);dg(this.$a,this.lg);this.listenTo(this.$a,{remove:g,hide:this.Fb.removeClass.bind(this.Fb,this.Hd),upgrade:this.Oe})}.bind(a),c=function(){return this.Db?P.resolve(this.Db):Xg(this.profiles).then(d)}.bind(a),d=function(a){return this.Db=a.map(f)}.bind(a),f=function(a){return{i:a,url:"/login/switch?brand\x3d"+
encodeURIComponent(a.j())}}.bind(a),g=function(){this.$a=null}.bind(a);b()}e.ig=function(a){this.user=a};function Jj(){}Jj=Backbone.View.extend({className:"sidebar"});Jj.prototype.initialize=function(a){this.H=a.H;this.Ib=a.Ib};Jj.prototype.events=function(){return{"click .sidebarMenuLink__exploreTemplates":this.trigger.bind(this,"click:exploreTemplates"),"click .sidebarUpgradeButton":this.trigger.bind(this,"click:upgrade"),"click .buttonNewDesign":this.trigger.bind(this,"click:newDesign")}};
Jj.prototype.Lk=function(a,b){var c=this.$(".notifications"),d=c.find(".notificationsBadge");a=Math.min(a,9);c.hasClass("hasNotifications")&&0===a&&(c.addClass("disappearing"),this.H.setTimeout(function(){c.removeClass("disappearing")},250));c.toggleClass("hasNotifications",0<a);c.toggleClass("hasMore",b);d.text(a)};var Kj=Jj;function Lj(a){this.l=a.l;this.na=a.na;this.td=a.td;this.We=a.We;this.view=a.view;this.lb=a.lb;this.Pe=a.Pe;this.Ve=a.Ve;this.Ia=a.Ia;this.la=a.la}e=Lj.prototype;e.listenTo=Backbone.Events.listenTo;e.stopListening=Backbone.Events.stopListening;
e.start=function(){var a=this;this.We.init();Qg(this.td);window.setTimeout(function(){var b=a.td;b.update(!1).catch($.noop);Tg(b,6E4)},400);this.listenTo(this.td,{updateUnreadCount:a.view.Lk.bind(a.view)});this.listenTo(this.view,{"click:upgrade":this.Oe,"click:exploreTemplates":this.Uk,"click:newDesign":this.Vk});this.Pe&&this.Oe(null,!0);null!==this.la.getSubscription()||this.la.K().personal||Mj(this)};
e.Oe=function(a,b){var c=this;if(!this.Pe&&Gj(this.na))Jb(this.l,aj("sidebar","bottom"));else{var d=this.lb();d.on({hide:function(){c.Ve&&(window.location.href="/?onboarding")},signup:function(){window.location.href=c.Ve?"/brand/onboarding/starter":d.yd}});b||Jb(this.l,aj("sidebar","bottom"));d.show()}};e.Uk=function(){Ib(this.l,"explore_templates","homepage","","sidebar")};e.Vk=function(){this.l.track("button_click",{type:"create_a_design",location:"sidebar"})};
function Mj(a){var b=a.la.brandInvitationsCount+a.la.brandMembersCount;if(b<=a.na.F.get(Rb)){var c=a.view;a=a.na.F.get(Rb);var d=c.$(".sidebar__pill--teamInvitationsCount");d.text(c.Ib.format("homeSideBarMembersInvited",b,a)).removeClass("sidebar__pill--hidden");b===a&&d.addClass("sidebar__pill--red")}}
e.ig=function(a){this.We.ig(a);var b=a.Oa();a=a.avatar;null!=b&&this.view.$(".userDisplayName").text(b).attr("title",b);null!=a&&(b=a.sizes.get("50").pa(),this.view.$(".avatar").css("background-image","url("+b+")"))};function Nj(a){wb.call(this,a)}p(Nj,wb);function Oj(a){yb.call(this,a);this.Da=null}p(Oj,yb);e=Oj.prototype;e.track=function(a,b){window.console.log("analytics:track",this.Da,a,zb(this,b));return P.resolve()};e.identify=function(a,b,c){this.Da=a;Bb(a,b)&&(Hb(a,b),window.console.log("analytics:identify",a,b,c));return P.resolve()};e.alias=function(a){window.console.log("analytics:alias",this.Da,a);this.Da=a};e.set=function(a){window.console.log("analytics:set",this.Da,a);return P.resolve()};
e.union=function(a){window.console.log("analytics:union",this.Da,a)};function Pj(a){wb.call(this,a);this.vg=a.vg}p(Pj,wb);function Qj(a,b){yb.call(this,a);this.H=b;this.readyState="PENDING";this.Ak=3E4;this.oc=this.me=null}p(Qj,yb);
function Rj(a){var b=Sj(),c=new Qj(a,Qf);Tj(c).then(function(){for(c.ready=!0;c.Be&&0<c.Be.length;)c.Be.shift()();c.Be=null}).catch(function(){});window.segmentAnalyticsLoaded||(window.segmentAnalyticsLoaded=!0,Tj(c).then(function(){var b={path:location.pathname,url:location.href};Sj().page(b,{integrations:{Leanplum:!1}});a.user||(b=window.Appcues||null)&&b.anonymous();b=(new UAParser).getResult();Cb(Fb(Fb(new Db,"Most recent browser",b.browser.name+" "+b.browser.version),"timezone",(new Date).getTimezoneOffset()/
-60))}).catch(function(){}),b.load(a.vg));return c}function Sj(){oa("undefined"!==typeof window.analytics,"SegmentAnalytics: window['analytics'] not available");return window.analytics}e=Qj.prototype;e.track=function(a,b){var c=this;return Tj(this).then(function(d){return new P(function(f){d.track(a,zb(c,b),{integrations:{Leanplum:!1}},f)})}).catch(function(){})};
e.identify=function(a,b,c){var d=this;return Tj(this).then(function(f){if(!Bb(a,b))return d.me||P.resolve();d.me=new P(function(g){Hb(a,b);f.identify(a,Uj(b),c,function(){d.me=null;g()})});return d.me}).catch(function(){})};e.alias=function(a){Tj(this).then(function(b){return b.alias(a)}).catch(function(){})};e.set=function(a){return Tj(this).then(function(b){return new P(function(c){return b.identify(Uj(a),c)})}).catch(function(){})};e.union=function(){};
function Uj(a){var b={};if(a&&Gb(a)){a=n(a);for(var c=a.next();!c.done;c=a.next()){var d=n(c.value),c=d.next().value,d=d.next().value;b[c]=d}}return b}
function Tj(a){var b=Sj();if(null!==a.oc)return a.oc;if("SUCCESS"===a.readyState)return P.resolve(b);if("FAILURE"===a.readyState)return P.reject(Error("Segment initialization failed"));a.oc=new P(function(c,d){var f=a.H.setTimeout(function(){a.readyState="FAILURE";a.oc=null;d(Error("Segment initialization failed"))},a.Ak);b.ready(function(){"FAILURE"!==a.readyState&&(a.H.clearTimeout(f),a.readyState="SUCCESS",a.oc=null,c(Sj()))})});return a.oc};function Vj(a){var b;Sj();if(a instanceof Nj)b=new Oj(a);else if(a instanceof Pj)b=Rj(a);else throw Error("Invalid analytics config");a.user&&b.identify(a.user,null);return b}function Wj(){var a=wa(window.analyticsConfig),b=z("impl",a);switch(b){case "console":return Vj(new Nj(xb(a)));case "segment":return b=xb(a),a=new Pj({Xc:b.Xc,Yc:b.Yc,user:b.user,i:b.i,Lb:b.Lb,Wb:b.Wb,ib:b.ib,vg:z("segmentWriteKey",a),O:b.O,Nc:b.Nc}),Vj(a);default:throw Error('No such analytics type: "'+b+'"');}};function Xj(){}Xj.prototype.log=function(a,b){b=void 0===b?{}:b;Rollbar.log(a,b.error,b.data)};function Yj(){}Yj.prototype.log=function(a,b){b=void 0===b?{}:b;var c=b.error;console[c instanceof Error?"error":"log"](a,c,b.data)};function Zj(a,b,c){this.o=a;this.vf=b;this.Fk=c;this.path="/documents"}function ak(a,b){var c="undefined"!==typeof Rollbar?new Xj:new Yj;a:switch(b=b.vf(),b){case "NONE":b="NONE";break a;case "LOG":b="LOG";break a;case "THROW":b="THROW";break a;default:throw Error("unknown DocumentDeserializationMode: "+b);}return new Zj(a,b,c)}e=Zj.prototype;
e.duplicate=function(a){return V(this.o,this.path+"?duplicate\x3d"+encodeURIComponent(a.id),a).get(0).tap(bk(this,"CreateDocumentResponseProto (duplicate)",cf)).then(jf)};e.delete=function(a){return V(this.o,this.path+"/"+encodeURIComponent(a)+"?delete",null).return()};e.move=function(a,b,c){return V(this.o,this.path+"/"+encodeURIComponent(a)+"?move",{owner:{user:b,brand:c}}).get(0).get("doc")};
e.getDocument=function(a){a=[this.path,null!=a.wj?"/"+encodeURIComponent(a.wj):"","?includePages\x3d"+encodeURIComponent(String(!!a.ql))].join("");return U(this.o,a).get(0).tap(bk(this,"GetDocumentResponseProto",ef)).then(mf)};e.search=function(a){return U(this.o,this.path+"/search?query\x3d"+encodeURIComponent(a.query)).get(0).tap(bk(this,"SearchDocumentsResponseProto",Sd)).then(of)};
function bk(a,b,c){return function(d){try{c(wa(d))}catch(f){switch(a.vf){case "THROW":throw f;case "LOG":a.Fk.log("Failed deserialization of "+b,{error:f})}}}};function ck(){}ck=Backbone.View.extend({});e=ck.prototype;e.events=function(){return{"keydown .sidebarSearchText":this.Tf,"input .sidebarSearchText":this.wd,"focus .sidebarSearchText":this.hk,"blur .sidebarSearchText":this.Lj}};e.initialize=function(a){this.qa=a.qa;this.$(".sidebarSearchText").attr("placeholder",this.qa);this.Ee=a.Ee};e.Bf=function(){var a=this.$(".sidebarSearchText").not(":focus").get(0);a&&(a.focus(),a.selectionStart=a.value.length)};
e.Zk=function(a){this.$(".sidebarSearchText").val(a);this.trigger("search",a)};function dk(a,b){a.$el.toggleClass("sidebarSearchActive",b)}function ek(a){switch(a){case 13:return"select";case 27:return"cancel";case 38:return"result:previous";case 40:return"result:next";case 9:return"highlightSearchResults"}return null}e.Lj=function(a){$(a.target).attr("placeholder",this.qa);this.trigger("blur")};
e.hk=function(a){$(a.target).one("mouseup",function(a){a.preventDefault()}).attr("placeholder","").select();dk(this,!0);this.trigger("focus")};e.Tf=function(a){var b=ek(a.which);b&&(this.trigger(b),a.preventDefault())};e.wd=function(a){this.trigger("search",$(a.target).val())};var fk=ck;function gk(a,b){this.H=a;this.Qi=b||null;this.Ze=this.Ie=null}gk.prototype.read=function(a){this.Ie||(hk++,ik.splice(hk,0,this));this.Ie=a;if(jk==kk||jk==lk)this.H.requestAnimationFrame(mk),jk=nk;return this};gk.prototype.write=function(a){this.Ze||(ok++,pk.splice(ok,0,this));this.Ze=a;jk==kk&&(this.H.requestAnimationFrame(mk),jk=nk);return this};var kk=0,nk=1,lk=3,jk=kk,ik=[],pk=[],hk=0,ok=0;
function mk(){var a,b;jk=2;ok=-1;for(a=0;a<ik.length;a++){hk=a;b=ik[a];var c=b.Ie;b.Ie=null;c&&c.call(b.Qi,b)}ik.length=0;hk=-1;jk=lk;for(a=0;a<pk.length;a++)ok=a,b=pk[a],c=b.Ze,b.Ze=null,c&&c.call(b.Qi,b);pk.length=0;ok=-1;jk!=nk&&(jk=kk)};function qk(a){var b=this,c=window.MutationObserver||window.WebKitMutationObserver;this.wc=null;this.gd={nodeinserted:[],noderemoved:[],characterdatamodified:[],attrmodified:[]};this.config=a?a:{attributes:!1,childList:!0,characterData:!0,subtree:!0};this.oh=new c(function(a){a.forEach(function(a){b.handle(a)})})}qk.prototype.normalize=function(a){return a.toLowerCase()};qk.prototype.on=function(a,b){a=this.normalize(a);this.gd.hasOwnProperty(a)||(this.gd[a]=[]);this.gd[a].push(b);return this};
qk.prototype.handle=function(a){function b(b){var f=c.normalize(b),g=new jQuery.Event(b);c.wc&&(g.target=a.target,g.currentTarget=c.wc.get(0),c.gd.hasOwnProperty(f)&&c.gd[f].forEach(function(a){a.call(c.wc,g)}))}var c=this;"childList"===a.type?(a.addedNodes&&0<a.addedNodes.length?b("nodeInserted"):a.removedNodes&&0<a.removedNodes.length&&b("nodeRemoved"),b("subtreeModified")):"attributes"===a.type?b("attrModified"):"characterData"===a.type&&b("characterDataModified")};
qk.prototype.observe=function(a){var b=$(a).get(0);if(this.wc)throw Error("Already observing an element");b&&(this.oh.observe(b,this.config),this.wc=$(a))};function rk(a,b){this.vh=this.uh=this.th=this.sh=this.Oc=this.mc=this.cg=this.dg=this.scrollHeight=this.scrollWidth=this.scrollTop=this.scrollLeft=0;this.Xe=this.ie=null;this.$i=!!b;this.zg=new gk(Qf,this);this.Ag=new gk(Qf,this);this.Qe=new qk({attributes:!0,attributeFilter:["class","style"],childList:!0,characterData:!1,subtree:!0});this.C=a;this.Ga=$("\x3cdiv\x3e").addClass("scrollThumb");this.Ja=$("\x3cdiv\x3e").addClass("scrollThumb");this.tb=this.tb.bind(this);this.Ce=this.Ce.bind(this);this.ze=
this.ze.bind(this);this.Ae=this.Ae.bind(this);this.xe=this.xe.bind(this);this.ye=this.ye.bind(this);this.ud=this.ud.bind(this);this.vd=this.vd.bind(this);this.ve=this.ve.bind(this);this.we=this.we.bind(this)}e=rk.prototype;e.trigger=Backbone.Events.trigger;e.on=Backbone.Events.on;e.off=Backbone.Events.off;
e.render=function(){this.C.addClass("scrollElement");$("\x3cdiv\x3e").addClass("scrollTrack hScrollTrack").append(this.Ga).insertAfter(this.C);$("\x3cdiv\x3e").addClass("scrollTrack vScrollTrack").append(this.Ja).insertAfter(this.C);sk(this);this.C.on("scroll",this.Ce);this.C.on("transitionend",this.tb);this.C.on("mouseenter",this.ze);this.C.on("mouseleave",this.Ae);this.Ga.on("mousedown",this.xe);this.Ja.on("mousedown",this.ye);this.Qe.on("attrModified",this.tb);this.Qe.on("subtreeModified",this.tb);
this.Qe.observe(this.C);$("\x3cspan\x3e").appendTo(this.C).remove();$(window).on("resize",this.tb);return this};e.remove=function(){var a=this.Qe;a.oh.disconnect();a.wc=null;this.C.off("scroll",this.Ce);this.C.off("transitionend",this.tb);this.C.off("mouseenter",this.ze);this.C.off("mouseleave",this.Ae);this.Ga.off("mousedown",this.xe);this.Ja.off("mousedown",this.ye);$(window).off("resize",this.tb);return this};
function sk(a){(new gk(Qf,a)).read(function(a){var c=this.C.prop("clientWidth"),d=this.C.prop("offsetWidth"),f=this.C.prop("clientHeight"),g=this.C.prop("offsetHeight");a.write(function(){d>c&&this.C.css("margin-right",c-d);g>f&&this.C.css("margin-bottom",f-g);this.zg.read(this.cj)})})}
e.cj=function(){var a=this.scrollWidth,b=this.scrollHeight,c=this.mc,d=this.Oc;this.scrollWidth=this.C.prop("scrollWidth");this.scrollHeight=this.C.prop("scrollHeight");this.dg=this.C.prop("clientWidth");this.cg=this.C.prop("clientHeight");this.mc=this.Ga.parent().outerWidth();this.Oc=this.Ja.parent().outerHeight();if(a!==this.scrollWidth||b!==this.scrollHeight||c!==this.mc||d!==this.Oc)this.scrollTop=this.scrollLeft=-1,this.zg.write(this.Ck),this.Ag.read(this.dj)};
e.Ck=function(){var a=Math.round(this.Oc*this.cg/this.scrollHeight);this.Ga.css("width",Math.round(this.mc*this.dg/this.scrollWidth)+"px");this.Ja.css("height",a+"px");var a=this.dg<this.scrollWidth,b=this.cg<this.scrollHeight,c=a!==this.ie,d=b!==this.Xe;c&&(this.ie=a,this.Ga.toggleClass("disabled",!a));d&&(this.Xe=b,this.Ja.toggleClass("disabled",!b));this.$i&&(c||d)&&this.trigger("change:scrollability",this.ie,this.Xe)};
e.dj=function(){var a=this.scrollLeft,b=this.scrollTop;this.scrollLeft=this.C.scrollLeft();this.scrollTop=this.C.scrollTop();if(a!==this.scrollLeft||b!==this.scrollTop)this.Ag.write(this.Dk),this.$i&&(this.ie||this.Xe)&&this.trigger("scroll",this.scrollLeft,this.scrollTop)};e.Dk=function(){var a=Math.round(this.Oc*this.scrollTop/this.scrollHeight);this.Ga.css("transform","translateX("+Math.round(this.mc*this.scrollLeft/this.scrollWidth)+"px)");this.Ja.css("transform","translateY("+a+"px)")};
e.tb=function(){this.zg.read(this.cj)};e.Ce=function(){this.Ag.read(this.dj)};e.ze=function(){this.Ga.addClass("ready");this.Ja.addClass("ready")};e.Ae=function(){this.Ga.removeClass("ready");this.Ja.removeClass("ready")};e.xe=function(a){0===a.button&&(this.sh=a.screenX,this.uh=this.scrollLeft,this.Ga.addClass("active"),$(document).on("mousemove",this.ud).on("mouseup",this.ve),a.preventDefault(),a.stopPropagation())};
e.ud=function(a){this.C.scrollLeft(this.uh+Math.round((a.screenX-this.sh)*this.scrollWidth/this.mc))};e.ve=function(a){this.ud(a);this.Ga.removeClass("active");$(document).off("mousemove",this.ud).off("mouseup",this.ve)};e.ye=function(a){0===a.button&&(this.th=a.screenY,this.vh=this.scrollTop,this.Ja.addClass("active"),$(document).on("mousemove",this.vd).on("mouseup",this.we),a.preventDefault(),a.stopPropagation())};
e.vd=function(a){this.C.scrollTop(this.vh+Math.round((a.screenY-this.th)*this.scrollHeight/this.Oc))};e.we=function(a){this.vd(a);this.Ja.removeClass("active");$(document).off("mousemove",this.vd).off("mouseup",this.we)};function tk(a,b,c){this.text=b||null;b=Yb(a);this.text&&this.text.toLocaleLowerCase()===b.Ue().toLocaleLowerCase()&&(this.text=null);this.$b=c||null;this.u=a}tk.prototype.on=Backbone.Events.on;tk.prototype.off=Backbone.Events.off;tk.prototype.trigger=Backbone.Events.trigger;function uk(){}uk=T.extend({className:"designSearchPopover"});uk.create=function(a){return new uk({position:"leftTop",u:a})};e=uk.prototype;e.initialize=function(a){T.prototype.initialize.call(this,a);this.u=a.u;this.Bi=[];this.yb=null};e.events=function(){return _.extend({},T.prototype.events.call(this),{"mouseenter .designSearchResult":this.lk,"click .designSearchResult":this.Sj,keydown:this.Tf})};
function vk(a,b){function c(a,c){var f=new tk(d.u,a.ob(),a.Ef()),k=a.j(),r=gg(a.j(),null),A=f.text||Yb(f.u).Ue();f.$b&&(null===f.text||""===f.text)&&(A=f.$b+" – "+A);return{id:k,href:r,title:A,thumbnail:a.ge().url,active:c===b.selectedIndex,designType:a.Ef()}}var d=a,f=function(a){return 0<a.length?a.map(c).map(d.Gj.bind(d)).join(""):d.yj({noResultsMessage:dc(d.u).format("designSearchNoResults")})}(b.xb);a.$(".content").addClass("scrollPane").html('\x3cul class\x3d"designSearchResultList"\x3e'+f+
"\x3c/ul\x3e");a.Bi=b.xb.map(function(a){return a.j()});Zf(a,Bc(dc(a.u),b.xb.length));a.$el.toggleClass("designSearchNoResults",0===b.xb.length);a.yb||(a.yb=new rk(a.$(".content")),a.yb.render(),a.on("remove",function(){this.yb.remove()}))}
function wk(a,b,c){var d=a.$(".designSearchResult").eq(b);a.$(".designSearchResultActive").removeClass("designSearchResultActive");if(0>b)return!1;d.addClass("designSearchResultActive").focus();if(!c){var f=a.$(".designSearchResultActive");c=f.offset();f=f.height();a=a.$(".content");var g=a.height(),h=a.scrollTop(),m=Math.floor(g/f);b*f<h?a.scrollTop(h-f):c&&c.top>g&&a.scrollTop(Math.max(0,(b-(m-1))*f))}return 0<d.length}
e.Sj=function(a){a=$(a.target).closest(".designSearchResult").index();0<=a&&this.trigger("select",this.Bi[a])};e.lk=function(a){this.trigger("result:hover",$(a.target).closest(".designSearchResult").index())};
e.Tf=function(a){38===a.which?(this.trigger("result:previous"),a.preventDefault()):40===a.which?(this.trigger("result:next"),a.preventDefault()):27===a.which?this.trigger("cancel"):37===a.which?(this.trigger("cancel"),a.preventDefault()):9===a.which?(this.trigger("updateSearchText"),a.preventDefault()):13!==a.which&&this.trigger("key:passthrough",a)};e.yj=_.template('\x3cli class\x3d"designSearchResultNone"\x3e\x3c%- noResultsMessage %\x3e\x3c/li\x3e');e.Gj=_.template('\x3ca class\x3d"designSearchResult\x3c% if (active) { %\x3e designSearchResultActive\x3c% } %\x3e" href\x3d"\x3c%- href %\x3e" target\x3d"_blank"\x3e\x3cdiv class\x3d"designSearchResultThumb" style\x3d"background-image:url(\x3c%- thumbnail %\x3e);"\x3e\x3c/div\x3e\x3cdiv class\x3d"designSearchResultDetail"\x3e\x3ch4 class\x3d"designSearchResultDetailTitle"\x3e\x3c%- title %\x3e\x3c/h4\x3e\x3cspan class\x3d"designSearchResultDetailSummary"\x3e\x3c%- designType %\x3e\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e');
var xk=uk;function yk(a){this.xf=a.xf;this.Qf=a.Qf;this.tf=void 0!==a.tf?a.tf:500;this.R=null;this.Le=[];this.selectedIndex=0;this.u=a.u;this.Y=a.Y;this.nf=a.nf;this.l=a.l;this.Cd="";this.listenTo(this.Y,{search:_.debounce(this.Gk,this.tf),select:this.Nf.bind(this,!0),cancel:this.Qg,focus:this.Nf.bind(this,!1),"result:next":this.Di,"result:previous":this.Ei,highlightSearchResults:this.Fj,blur:this.sk})}function zk(a,b){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return a+c}
var Ak=[{from:8,to:8,ke:function(a){return a.slice(0,-1)}},{from:32,to:32,ke:zk},{from:65,to:90,ke:zk},{from:48,to:57,ke:zk}];e=yk.prototype;e.listenTo=Backbone.Events.listenTo;e.stopListening=Backbone.Events.stopListening;e.stop=function(){this.stopListening(this.Y);this.R&&this.R.remove();return this};function Bk(a,b,c){a.selectedIndex=Math.max(0,Math.min(a.Le.length-1,b));a.R&&wk(a.R,a.selectedIndex,!!c)}e.Qg=function(){this.R?(this.R&&this.R.remove(),this.Y.Bf()):this.Y.$(".sidebarSearchText").blur()};
e.Nf=function(a,b){if(""!==this.Cd&&(b||0!==this.Le.length)){if(!this.R){b=Ck;var c;c=this.Y;c=c.Ee?P.resolve(c.Ee.animate({scrollTop:$(".sidebarSearch").parent().scrollTop()+$(".sidebarSearch").position().top},400).promise()):P.resolve();this.R=b(this,c)}this.R&&vk(this.R,{xb:this.Le,selectedIndex:this.selectedIndex});a&&(wk(this.R,0,!1)||this.Y.Bf());dk(this.Y,!0)}};e.Di=function(){Bk(this,this.selectedIndex+1)};e.Ei=function(){Bk(this,this.selectedIndex-1)};
e.Fj=function(){this.R&&wk(this.R,this.selectedIndex,!1)};
e.Gk=function(a){function b(a){f.Le=a;f.selectedIndex>=a.length?f.selectedIndex=a.length-1:0>f.selectedIndex&&(f.selectedIndex=0);f.Nf(!0,!0)}function c(a){return a.Nh()}function d(){f.Y.$el.toggleClass("sidebarSearchInProgress",!1)}var f=this;this.Cd=a;a.length>=this.Qf?(f.l.track("design_search",{query:.05>Math.random()?a:void 0}),f.Y.$el.toggleClass("sidebarSearchInProgress",!0),f.xf.search(new Qd({query:a+"*"})).then(c).then(b).finally(d)):""===a&&this.R&&this.R.remove()};
function Ck(a,b){var c=a.nf(a.u);a.listenTo(c,{remove:a.tk,cancel:a.Qg,"result:hover":function(a){Bk(this,a,!0)}.bind(a),"result:previous":a.Ei,"result:next":a.Di,updateSearchText:a.Y.Bf.bind(a.Y),"key:passthrough":a.mk});dg(c,a.Y.$el);b.then(c.Kd.bind(c));return c}e.mk=function(a){function b(b){return a.which>=b.from&&a.which<=b.to}var c;c=a.originalEvent;var d=c.altKey||c.metaKey?null:Ak.filter(b)[0];d&&(a.preventDefault(),c=d.ke(this.Cd,c),c!==this.Cd&&(this.Cd=c,this.Y.Zk(c)))};
e.tk=function(){this.stopListening(this.R);this.R=null;this.selectedIndex=0;dk(this.Y,this.Y.$(".sidebarSearchText").is(":focus"))};e.sk=function(){this.R||dk(this.Y,!1)};function Dk(){var a=window.location.pathname;return 0<="/ /shared-with-you /team-stream /trash /design-stream /create-a-design".split(" ").indexOf(a)||/^\/folder\/.+/.test(a)};function Ek(a){this.id=a.id||null;this.systemFolder=a.Sk;return this}Ek.prototype.j=function(){return this.id};Ek.prototype.fd=function(){if(this.systemFolder)return Object.freeze(v(Fk,this.systemFolder))};function Gk(a){return a.fd()?Object.freeze(v(Ek,{systemFolder:Object.freeze(v(Fk,{brand:a.K(),type:a.fd(),user:a.ha()}))})):Object.freeze(v(Ek,{id:a.j()}))}function Fk(){}Fk.prototype.K=function(){return this.brand};Fk.prototype.fa=function(){return this.type};Fk.prototype.ha=function(){return this.user};
function Hk(){}function Ik(a){return Object.freeze(v(Hk,a))}Hk.prototype.oa=function(){if(this.folder)return Z(this.folder)};Hk.prototype.Hh=function(){wa(this.accessSummary);return Jk(this.accessSummary)};
function Kk(a){a=void 0===a?{}:a;this.id=a.id||"";this.thumbnail=a.hb;this.systemFolder=a.Sk||null;this.acl=a.Ra;this.access=a.mj;this.name=a.name||null;this.description=a.description||null;this.brand=a.i||"";this.itemCount=a.rl||0;this.user=a.user||"";this.modifiedDate=a.ul||0;this.shared=a.Gc||!1;this.type=a.type||Lk;this.userSettings=a.zl||null}var Lk="DESIGN";function Z(a){return Object.freeze(v(Kk,a))}e=Kk.prototype;e.j=function(){return this.id};
e.ge=function(){if(this.thumbnail)return Object.freeze(v(Mk,this.thumbnail))};e.fd=function(){return this.systemFolder};e.cd=function(){if(this.acl)return Object.freeze(v(Nk,this.acl))};e.getName=function(){return this.name};e.K=function(){return this.brand};e.ha=function(){return this.user};e.fa=function(){return this.type};e.pb=function(){if(this.userSettings)return Object.freeze(v(Ok,this.userSettings))};e.hf=function(a){a=_.extend(_.pick(this,Object.keys(this)),a);return Z(a)};
Z({brand:"",id:"FACEBOOK",itemCount:0,modifiedDate:0,name:"Facebook",systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/upload_folder_facebook.png",width:200},user:""});Z({brand:"",id:"UPLOADED_MEDIA",itemCount:0,modifiedDate:0,name:null,systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/default_folder_thumbnail_grey_bg.png",width:200},user:""});
Z({brand:"",id:"UNLIMITED_USE",itemCount:0,modifiedDate:0,name:null,systemFolder:null,thumbnail:{height:200,url:"https://static.canva.com/static/images/purchased_folder_thumbnail.png",width:200},user:""});function Mk(){}Mk.prototype.pa=function(){return this.url};function Nk(a){a=void 0===a?{}:a;this.entries=a.entries}Nk.prototype.hf=function(a){a=_.extend(_.pick(this,Object.keys(this)),a);return Object.freeze(v(Nk,a))};
Nk.prototype.getEntries=function(){if(this.entries)return this.entries.filter(function(a){return!!a}).map(function(a){return Object.freeze(v(Pk,a))})};function Pk(a){a=void 0===a?{}:a;this.user=a.user;this.brand=a.i;this.access=a.mj}Pk.prototype.hf=function(a){a=_.extend(_.pick(this,Object.keys(this)),a);return Object.freeze(v(Pk,a))};Pk.prototype.K=function(){return this.brand};Pk.prototype.ha=function(){return this.user};function Qk(){}e=Qk.prototype;
e.ug=function(){var a=this;return Object.keys(a).map(function(b){if("object"!==typeof a[b])return b+"\x3d"+encodeURIComponent(a[b])}).filter(function(a){return!!a}).join("\x26")};function Rk(a,b){a.folder=b;return a}e.Dg=function(a){this.name=a;return this};function Sk(a){a.trash=!0;return a}e.Ye=function(a){this.userSettings=a;return this};e.oa=function(){if(this.folder)return Object.freeze(v(Ek,this.folder))};e.cd=function(){if(this.acl)return Object.freeze(v(Nk,this.acl))};e.getName=function(){return this.name};
e.pb=function(){if(this.userSettings)return Object.freeze(v(Ok,this.userSettings))};function Tk(a){this.fj=a.fj||[];this.ki=a.ki}function Jk(a){return new Tk({fj:H(hb,"users",a),ki:x("others",a)})}function Uk(){}function Vk(a){return Object.freeze(v(Uk,a))}Uk.prototype.va=function(){return this.continuation};Uk.prototype.oa=function(){if(this.folder)return Z(this.folder)};function Wk(){}function Xk(a){return Object.freeze(v(Wk,a))}Wk.prototype.oa=function(){if(this.folder)return Z(this.folder)};
Wk.prototype.Hh=function(){if(this.accessSummary)return Jk(this.accessSummary)};function Yk(){}function Zk(a){return Object.freeze(v(Yk,a))}Yk.prototype.dd=function(){if(this.folders)return this.folders.filter(function(a){return!!a}).map(function(a){return Z(a)})};Yk.prototype.va=function(){return this.continuation};function $k(){}e=$k.prototype;e.ug=function(){var a=this;return Object.keys(a).map(function(b){if("object"!==typeof a[b])return b+"\x3d"+encodeURIComponent(a[b])}).filter(function(a){return!!a}).join("\x26")};
e.hj=function(a){this.limit=a;return this};e.Cg=function(a){this.brand=a;return this};e.ij=function(a){this.user=a;return this};function al(){var a=new $k;a.folderTypes=[Lk];return a}e.gj=function(a){this.continuation=a;return this};e.Ye=function(){this.projections||(this.projections=[]);this.projections.push("USER_SETTINGS");return this};e.kc=function(){return this.limit};e.K=function(){return this.brand};e.ha=function(){return this.user};e.va=function(){return this.continuation};
function bl(a){return Object.keys(a).map(function(a){var c=this[a];if(Array.isArray(c))return a+"\x3d"+c.map(encodeURIComponent).join(",");if("object"!==typeof c)return a+"\x3d"+encodeURIComponent(c)},a).filter(Boolean).join("\x26")}function cl(){}function dl(a){return Object.freeze(v(cl,a))}cl.prototype.oa=function(){if(this.folder)return Z(this.folder)};function el(){}e=el.prototype;e.ug=function(){var a=this;return Object.keys(a).map(function(b){if("object"!==typeof a[b])return b+"\x3d"+encodeURIComponent(a[b])}).filter(function(a){return!!a}).join("\x26")};
e.Dg=function(a){this.name=a;return this};e.Cg=function(a){this.brand=a;return this};e.ij=function(a){this.user=a;return this};function fl(a){a.type=Lk;return a}e.Ye=function(a){this.userSettings=a;return this};e.getName=function(){return this.name};e.K=function(){return this.brand};e.ha=function(){return this.user};e.fa=function(){return this.type};e.pb=function(){return this.userSettings};function Ok(a){this.starred=a.Jc};function gl(a){this.o=a;this.url="/folders"}gl.prototype.Sd=P.method(function(a){return V(this.o,this.url+"/~",a).get(0).then(dl)});gl.prototype.be=P.method(function(a){a=this.url+"/~?"+bl(a);return U(this.o,a).get(0).then(Zk)});gl.prototype.oa=P.method(function(a){var b=bl(a);a=""+this.pa(a.oa())+(b?"?"+b:"");return U(this.o,a).get(0).then(Xk)});gl.prototype.pa=function(a){var b=a.fd();return b?[this.url,"~/system",b.ha(),b.fa()].join("/"):[this.url,a.j()].join("/")};
P.method(function(a){var b=this.pa(a.oa())+"?removeItems";return V(this.o,b,a).return()});P.method(function(a){a=this.pa(a.oa())+"?list\x26"+a.ug();return U(this.o,a).get(0).then(Vk)});P.method(function(a){var b=this.pa(a.from)+"?moveItems";return V(this.o,b,a).return()});gl.prototype.yg=P.method(function(a){var b;if(a.oa().fd())throw Error("System folders cannot be updated");b=this.url+"/"+a.oa().j();return V(this.o,b,a).get(0).then(Ik)});function hl(a,b){var c=a.pb()&&a.pb().starred,d=b.pb()&&b.pb().starred;return c^d?c?-1:1:(a.getName()||"").toLowerCase().localeCompare((b.getName()||"").toLowerCase())};function il(a){this.Na=a.Na;this.ad=a.ad;this.Zc=!1;new Map;this.nb=a.nb;this.Da=a.Da;this.Eh=a.Eh}e=il.prototype;e.listenTo=Backbone.Events.listenTo;e.off=Backbone.Events.off;e.on=Backbone.Events.on;e.stopListening=Backbone.Events.stopListening;e.trigger=Backbone.Events.trigger;var jl=new Lb("fi",!0);function kl(a){var b=new ll({bj:function(a,b){return a.hf(b)}}),c=new ll({bj:function(a,b){return Object.assign({},a,b)}});return new il({Na:b,ad:c,nb:a.nb,Eh:a.F.get(jl),Da:a.Da})}e=il.prototype;
e.fetch=function(){function a(a){var b;if(b=a instanceof Array)a=a[1],b=500<=a&&600>a;return b}var b=this;this.Zc||(this.Zc=!0,this.trigger("fetch:start"),this.be([]).bind(this).then(this.ck).catch(a,this.dk).catch(function(a){b.Sf();throw a;}))};e.be=function(a,b){var c=this,d=al().Ye().hj(100).ij(this.Da);b&&d.gj(b);return this.nb.be(d).then(function(b){var d=a.concat(b.dd()||[]);return(b=b.va())?c.be(d,b):P.resolve(d)})};e.dd=function(){return Object.freeze(this.Na.getAll().sort(hl))};e.oa=function(a){return this.Na.get(a)};
e.ck=function(a){var b=this;a.forEach(function(a){return b.Na.update(a.j(),a)});this.Zc=!1;this.trigger("fetch:success",this.dd())};e.Sf=function(){this.Zc=!1;this.trigger("fetch:fail",!1)};e.dk=function(){this.Zc=!1;this.trigger("fetch:fail",!0)};
e.create=function(a){var b=this;a=fl((new el).Dg(a));var c=_.uniqueId("CREATE_");this.nb.Sd(a).then(this.Vj.bind(this,c)).catch(function(a){return a instanceof Array&&a[0]&&"quota exceeded"==a[0].error},this.ii.bind(this,c,"quota exceeded")).catch(function(a){b.ii(c,a);throw a;});P.resolve().then(this.trigger.bind(this,"create:start",c));return c};e.Vj=function(a,b){b=b.oa();this.Na.add(b.j(),b);this.trigger("create:success",a,b)};e.ii=function(a,b){this.trigger("create:fail",a,b)};
e.delete=function(a){var b=this;u(this.Na.has(a.j()),"attempting to delete unknown folder");var c=Sk(Rk(new Qk,Gk(a)));this.nb.yg(c).bind(this).then(this.$j).catch(function(c){b.trigger("delete:fail",a);throw c;});this.trigger("delete:start",a)};e.$j=function(a){a=a.oa();var b=a.j();this.Na.delete(b);this.ad.has(b)&&this.ad.delete(b);this.trigger("delete:success",a)};e.Ej=function(a){var b=a.oa(),c=b.j();this.ad.update(c,{hl:a.Hh()});return this.Na.update(c,b)};
e.change=function(a,b,c){var d=this;u(this.Na.has(b.j()),"attempting to change unknown folder");var f=Rk(new Qk,Gk(b));if("name"===a)f.Dg(c);else if("description"===a)f.description=c;else if("acl"===a)f.acl=c;else if("userSettings"===a)f.Ye(c);else{if("metadata"===a)throw Error("not an actionable change");throw Error("unrecognised change type");}this.nb.yg(f).bind(this).then(this.Ej).then(this.Nj.bind(this,a,b,c)).catch(function(f){d.trigger("change:fail",a,b,c);throw f;});this.trigger("change:start",
a,b,c)};e.Nj=function(a,b,c,d){if("acl"===a){if(!d.cd())throw Error("returned folder does not have an ACL field");c=d.cd()}this.trigger("change:success",a,d,c)};function ll(a){this.map=new Map;this.$k=a.bj}e=ll.prototype;e.clear=function(){this.map.clear()};e.has=function(a){return this.map.has(a)};e.set=function(a,b){this.map.set(a,b);return b};e.add=function(a,b){u(!this.has(a),"Can not add {} - item is already being managed",a);return this.set(a,b)};
e.update=function(a,b){return this.has(a)?this.set(a,this.$k(this.map.get(a),b)):this.add(a,b)};e.delete=function(a){u(this.has(a),"Can not delete {} - item is not being managed",a);return this.map.delete(a)};e.get=function(a){u(this.has(a),"Can not get {} - item is not being managed",a);return this.map.get(a)};e.getAll=function(){return Array.from(this.map.values())};Object.defineProperties(ll.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this.map.size}}});function ml(a){soy.asserts.assertType(goog.isString(a.vc)||a.vc instanceof goog.soy.data.SanitizedContent,"newFolder",a.vc,"string|goog.soy.data.SanitizedContent");var b=a.vc;soy.asserts.assertType(goog.isString(a.lc)||a.lc instanceof goog.soy.data.SanitizedContent,"getMoreFolders",a.lc,"string|goog.soy.data.SanitizedContent");var c=a.lc;soy.asserts.assertType(goog.isString(a.jc)||a.jc instanceof goog.soy.data.SanitizedContent,"folderQuotaHint",a.jc,"string|goog.soy.data.SanitizedContent");var d=
a.jc;soy.asserts.assertType(goog.isBoolean(a.Ed)||1===a.Ed||0===a.Ed,"showQuota",a.Ed,"boolean");var f=!!a.Ed;soy.asserts.assertType(goog.isNumber(a.qf),"currentCount",a.qf,"number");var g=a.qf;soy.asserts.assertType(goog.isNumber(a.Mf),"maxCount",a.Mf,"number");a=a.Mf;var h=f&&g>=a,m='\x3cmenu class\x3d"sidebarMenu"\x3e\x3cli class\x3d"noTab noHover"\x3e\x3cbutton type\x3d"button" class\x3d"buttonSmall buttonCreateFolder buttonCreateFolder--'+soy.$$escapeHtmlAttribute(h?"getMore":"create")+'"\x3e',
k;k=k={G:"buttonCreateFolder__icon"};soy.asserts.assertType(null==k.G||k.G instanceof goog.soy.data.SanitizedContent||goog.isString(k.G),"cssClass",k.G,"null|string|undefined");k=k.G;k=soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg  "+(k?'class\x3d"'+soy.$$escapeHtmlAttribute(k)+'"':"")+' viewBox\x3d"0 0 17 17" width\x3d"17" height\x3d"17" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath d\x3d"M8.783 14.483c-3.385 0-6.14-2.754-6.14-6.14 0-3.384 2.755-6.138 6.14-6.138 3.384 0 6.138 2.754 6.138 6.14 0 3.384-2.753 6.138-6.137 6.138m0-14.167C4.35.316.755 3.91.755 8.344s3.594 8.028 8.028 8.028c4.433 0 8.027-3.595 8.027-8.028S13.216.316 8.783.316"/\x3e\x3cpath d\x3d"M13.066 8.344c0-.522-.422-.944-.944-.944H9.727V5.005c0-.522-.422-.944-.944-.944-.523 0-.945.423-.945.945V7.4H5.444c-.523 0-.945.422-.945.944 0 .26.105.497.276.668.17.17.407.276.668.276h2.394v2.395c0 .26.106.497.277.668.17.172.407.278.668.278.522 0 .944-.423.944-.945V9.288h2.395c.522 0 .944-.422.944-.944"/\x3e\x3c/svg\x3e');
b=""+(m+k+'\x3cspan class\x3d"buttonCreateFolder__title"\x3e'+soy.$$escapeHtml(h?c:b)+"\x3c/span\x3e\x3c/button\x3e"+(f?'\x3cspan class\x3d"designFolderList__quotaLabel sidebar__pill '+(g==a?"sidebar__pill--red":"")+'" title\x3d"'+soy.$$escapeHtmlAttribute(d)+'"\x3e'+soy.$$escapeHtml(g)+"/"+soy.$$escapeHtml(a)+"\x3c/span\x3e":"")+"\x3c/li\x3e\x3c/menu\x3e");return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)}
function nl(a){soy.asserts.assertType(goog.isString(a.qe)||a.qe instanceof goog.soy.data.SanitizedContent,"loadingText",a.qe,"string|goog.soy.data.SanitizedContent");return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"designFolderListMessage designFolderListLoading"\x3e'+soy.$$escapeHtml(a.qe)+"\x3c/div\x3e")}goog.DEBUG&&(nl.Fi="DesignFolderListTemplates.loading");
function ol(a){soy.asserts.assertType(goog.isString(a.fc)||a.fc instanceof goog.soy.data.SanitizedContent,"errorMessageHtml",a.fc,"string|goog.soy.data.SanitizedContent");return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"designFolderListMessage designFolderListError"\x3e\x3cp\x3e'+soy.$$escapeHtml(a.fc)+"\x3c/p\x3e\x3c/div\x3e")}goog.DEBUG&&(ol.Fi="DesignFolderListTemplates.error");
function pl(a){soy.asserts.assertType(goog.isString(a.Cc)||a.Cc instanceof goog.soy.data.SanitizedContent,"retry",a.Cc,"string|goog.soy.data.SanitizedContent");var b=a.Cc;soy.asserts.assertType(goog.isString(a.rc)||a.rc instanceof goog.soy.data.SanitizedContent,"loadFolders",a.rc,"string|goog.soy.data.SanitizedContent");a=a.rc;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"designFolderListMessage designFolderListRetry"\x3e\x3cp\x3e'+soy.$$escapeHtml(b)+"\x3c/p\x3e"+Pi({J:"buttonRetry",
text:a})+"\x3c/div\x3e")}goog.DEBUG&&(pl.Fi="DesignFolderListTemplates.retry");
function ql(a){soy.asserts.assertType(goog.isString(a.ce)||a.ce instanceof goog.soy.data.SanitizedContent,"folderId",a.ce,"string|goog.soy.data.SanitizedContent");var b=a.ce;soy.asserts.assertType(goog.isString(a.de)||a.de instanceof goog.soy.data.SanitizedContent,"folderName",a.de,"string|goog.soy.data.SanitizedContent");var c=a.de;soy.asserts.assertType(goog.isString(a.link)||a.link instanceof goog.soy.data.SanitizedContent,"link",a.link,"string|goog.soy.data.SanitizedContent");var d=a.link;soy.asserts.assertType(goog.isString(a.Wa)||
a.Wa instanceof goog.soy.data.SanitizedContent,"defaultName",a.Wa,"string|goog.soy.data.SanitizedContent");var f=a.Wa;soy.asserts.assertType(goog.isBoolean(a.Gc)||1===a.Gc||0===a.Gc,"shared",a.Gc,"boolean");var g=!!a.Gc;soy.asserts.assertType(goog.isBoolean(a.Jc)||1===a.Jc||0===a.Jc,"starred",a.Jc,"boolean");a=!!a.Jc;return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"sidebarMenuLink designFolder__link" href\x3d"'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(d))+'" title\x3d"'+soy.$$escapeHtmlAttribute(c)+
'" data-folder-id\x3d"'+soy.$$escapeHtmlAttribute(b)+'"\x3e'+(g?Ri({G:"designFolder__icon",xa:a}):Qi({G:"designFolder__icon",xa:a}))+'\x3cspan class\x3d"designFolder__title"\x3e'+soy.$$escapeHtml(c)+'\x3c/span\x3e\x3c/a\x3e\x3cinput type\x3d"text" placeholder\x3d"'+soy.$$escapeHtmlAttribute(f)+'" maxlength\x3d"255" value\x3d"'+soy.$$escapeHtmlAttribute(c)+'" /\x3e')};function rl(a){Backbone.View.call(this,{className:"designFolder",tagName:"li"});this.model=a.Cj;this.sd=!1;this.D=a.D}p(rl,Backbone.View);rl.prototype.events=function(){var a=this;return{"blur input":function(){a.sd&&(a.sd=!1,sl(a))},"focus input":function(){a.sd=!0},"keydown input":function(b){27===b.which&&a.$("input").blur()},"keypress input":function(b){13===b.which&&sl(a)}}};
rl.prototype.render=function(){var a=this.model.getName()||this.D.Wa(),b=this.model.j();this.$el.html(ql({ce:b,de:a,Wa:this.D.Wa(),link:"/folder/"+b,Gc:!!this.model.shared,Jc:!(!this.model.pb()||!this.model.pb().starred)}).toString());return this};function tl(a,b){a.sd=!1;a.$el.toggleClass("naming",b);b&&(a.$("input").select().focus(),a.sd=!0)}function ul(a,b){a.$el.toggleClass("selected",b)}function sl(a){var b=a.$("input").val().trim()||a.D.Wa();a.$("a").text(b);a.trigger("name",a.model,b)};function vl(a){Backbone.View.call(this,_.extend(a,{className:"designFolderList"}))}p(vl,Backbone.View);e=vl.prototype;e.events=function(){var a=this;return{"click .buttonCreateFolder--create":function(){a.trigger("add")},"click .buttonCreateFolder--getMore":function(){a.trigger("clickGetMoreFolders")},"click .buttonRetry":function(){a.trigger("retry")},"click .designFolder .designFolder__link":this.Rj,"click .designFolderList__quotaLabel":function(){return a.trigger("clickQuota")}}};
e.initialize=function(a){this.lf=a.lf;this.za={};this.D=a.D;this.sc=null!==a.sc?a.sc:-1};e.render=function(){Object.keys(this.za).forEach(function(a){var b=this.za[a];this.stopListening(b);b.remove();delete this.za[a]},this);this.$el.html(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cmenu class\x3d"sidebarMenu"\x3e\x3c/menu\x3e\x3cmenu class\x3d"designFolderListMenu sidebarMenu"\x3e\x3c/menu\x3e').toString());wl(this);return this};
function wl(a){var b=Object.keys(a.za).length;a.$("menu:first-child").replaceWith(ml({vc:a.D.vc(),lc:a.D.lc(),jc:a.D.jc(a.sc),Ed:-1!==a.sc,qf:b,Mf:a.sc}).toString())}e.yg=function(a,b){var c=xl(this,a);delete this.za[a.j()];this.za[b.j()]=c;c.model=b;c.render()};
function yl(a,b,c){var d=a.lf(b),f=a.$(".designFolderListMenu"),g=d.render().$el;c?g.prependTo(f):g.appendTo(f);a.za[b.j()]=d;a.listenTo(d,{create:function(b,c){return a.trigger("create",b,c)},name:function(b,c){return a.trigger("name",b,c)}});wl(a)}function zl(a){Object.keys(a.za).forEach(function(b){return Al(a,Z({id:b}))})}function Al(a,b){var c=xl(a,b);a.stopListening(c);c.remove();delete a.za[b.j()];wl(a)}
function Bl(a,b){Cl(a,{qg:nl,rg:{qe:a.D.format("designFolderListLoadingFolders")},Of:"designFolderListLoading",Cf:"loading",visible:b})}function Dl(a,b){Cl(a,{qg:ol,rg:{fc:soydata.VERY_UNSAFE.ordainSanitizedHtml(a.D.fc())},Of:"designFolderListError",Cf:"error",visible:b})}function El(a,b){Cl(a,{qg:pl,rg:{Cc:a.D.Cc(),rc:a.D.rc()},Of:"designFolderListRetry",Cf:"retry",visible:b})}e.select=function(a){a=xl(this,a);if(Fl(this)!==a){var b=Fl(this);b&&ul(b,!1);ul(a,!0)}};
function xl(a,b){if(a=a.za[b.j()])return a;throw Error("no view for folder: "+b.j());}function Fl(a){var b;_.values(a.za).some(function(a){if(a.$el.hasClass("selected"))return b=a,!0});return b||null}function Gl(a){return(a=Fl(a))&&a.model}function Cl(a,b){var c=a.$("."+b.Of);a.$el.toggleClass(b.Cf,b.visible);b.visible&&0===c.length?(b=b.qg(b.rg).toString(),a.$el.append(b)):b.visible||c.remove()}
e.Rj=function(a){a=$(a.currentTarget).attr("data-folder-id");a=this.za[a];if(Fl(this)!==a){var b=Fl(this);b&&ul(b,!1);ul(a,!0)}};function Hl(a){var b=this;this.pf=a.pf;this.Gb=a.Gb;this.listenTo(this.Gb,{"fetch:start":this.ek,"fetch:success":this.fk,"fetch:fail":this.Sf,"create:start":this.Xj,"create:success":this.Yj,"create:fail":this.Wj,"delete:start":this.ak,"delete:success":this.bk,"change:success":this.Pj});this.Jd={};this.D=a.D;this.l=a.l;this.view=a.view;this.listenTo(this.view,{add:this.oj,clickGetMoreFolders:this.qj,clickQuota:this.sj,name:function(a,d){return b.Sd(a,d)},retry:this.Gb.fetch})}e=Hl.prototype;
e.ek=function(){Dl(this.view,!1);El(this.view,!1);Bl(this.view,!0)};e.fk=function(a){var b=this;Bl(this.view,!1);var c=Fl(this.view);zl(this.view);a.forEach(function(a){return yl(b.view,a)});c&&this.view.select(c.model)};e.Sf=function(a){Bl(this.view,!1);a?El(this.view,!0):Dl(this.view,!0)};e.sj=function(){Ib(this.l,"quota_label","homepage","design_folder","design_folder_list");Il(this)};
function Il(a){var b=a.pf();a.listenTo(b,{signup:function(){return window.location=b.yd},hide:function(){return a.stopListening(b)}});b.show(5)}e.oj=function(){var a=Z({id:_.uniqueId("fake_"),name:this.D.Wa()});Ib(this.l,"create_folder","homepage","design_folder","design_folder_list");yl(this.view,a,!0);tl(xl(this.view,a),!0)};e.qj=function(){Jb(this.l,aj("sidebar","get_more_folders"));Il(this)};e.Sd=function(a,b){b=this.Gb.create(b);this.Jd[b]=a};
e.Xj=function(a){if(a=this.Jd[a])tl(xl(this.view,a),!1),xl(this.view,a).$el.toggleClass("disabled",!0)};e.Yj=function(a){var b=this;delete this.Jd[a];zl(this.view);this.Gb.dd().forEach(function(a){return yl(b.view,a)})};e.Wj=function(a,b){var c=this.Jd[a];c&&(delete this.Jd[a],a="quota exceeded"===b?this.D.format("designFolderListCreateFolderQuotaExceededError"):this.D.format("designFolderListCreateFolderError"),window.alert(a),Al(this.view,c))};
e.ak=function(a){xl(this.view,a).$el.toggleClass("hidden",!0)};e.bk=function(a){Al(this.view,a)};e.Pj=function(a,b){var c=this;"name"===a||"userSettings"===a?(b=Gl(this.view),zl(this.view),this.Gb.dd().forEach(function(a){return yl(c.view,a)}),b&&this.view.select(b)):"acl"===a&&(a=xl(this.view,b),a.model=b,a.render())};e.listenTo=Backbone.Events.listenTo;e.off=Backbone.Events.off;e.on=Backbone.Events.on;e.stopListening=Backbone.Events.stopListening;function Jl(a){Backbone.View.call(this,_.extend(a,{className:"tabPointer"}));this.hh=-1}p(Jl,Backbone.View);Jl.prototype.initialize=function(a){this.og=a.og;this.Ld=!!a.Ld;this.style=a.style||"arrow";this.$el.addClass(this.style).toggleClass("tabPointerVertical",this.Ld)};function Kl(a,b,c){c=void 0===c?!1:c;a=a.og.children("li");c||(a=a.not(".noTab"));return a.eq(b)}
Jl.prototype.update=function(a,b,c){c=void 0===c?!1:c;(b=0<=this.hh&&(void 0===b?!0:b))||this.$el.addClass("doNotTransition");if("arrow"===this.style){c=Kl(this,a,c);var d=c.offsetParent().offset(),f=c.position(),g=c.width(),h=c.height(),m=this.$el.offsetParent().offset(),k=d.top-m.top,d=d.left-m.left;c.length&&(this.Ld?this.$el.css("transform","translateY("+Math.round(f.top+k+(h-20)/2)+"px)"):this.$el.css("transform","translateX("+Math.round(f.left+d+(g-20)/2)+"px)"))}else if("rectangle"===this.style)c=
Kl(this,a,c),f=c.children("a"),g=parseInt(f.css("marginLeft"),10)?0:10,c.length&&(this.Ld?(h=Math.round(f.position().top),this.$el.css("transform","translate3d( -"+g+"px, "+h+"px, 0px)"),this.$el.css("height",f.height())):(h=Math.round(f.position().left-g),this.$el.css("transform","translateX("+h+"px)"),this.$el.css("height",f.height()-20)),this.$el.css("width",c.width()+g));else throw Error("unrecognised TabPointerStyle");b||(b=this.$el,0<b.length&&(b=window.getComputedStyle(b.get(0)))&&b.getPropertyValue("left"),
this.$el.removeClass("doNotTransition"));this.hh=a};function Ll(){}Ll=Backbone.View.extend({className:"sidebarViewportContainer"});Ll.prototype.initialize=function(a){this.yb=new rk(this.$(".sidebarViewport"),!0);this.listenTo(this.yb,{"change:scrollability":this.Oj,scroll:this.rk});this.Re=a.Re||null;this.Df=a.Df;this.yb.render()};Ll.prototype.remove=function(){this.yb.remove();Backbone.View.prototype.remove.call(this)};Ll.prototype.Oj=function(a,b){this.$el.toggleClass("sidebarScrollable",b);Ml(this)};
Ll.prototype.rk=function(){var a=this.$(".sidebarViewport").find("li.on,li.selected:not(.hidden)"),b=this.Df();if(0<a.length){var c=$(document.body).scrollTop()||$(document).scrollTop(),d=this.$(".sidebarViewport"),f=d.offset().top,c=d.scrollTop()-c,g=d.height(),h=a.offset().top-d.offset().top,d=a.height();if(a.hasClass("sidebarItemSticky")){if(h=parseInt(a.data("nonStickyItemOffsetTop"),10),h=isNaN(h)?a.get(0).offsetTop:h,a.hasClass("sidebarItemStickyTop")?c+f<h:a.hasClass("sidebarItemStickyBottom")&&
c+f+g>=h+d)this.$el.removeClass("sidebarItemListSticky sidebarItemListStickyTop sidebarItemListStickyBottom"),this.$(".sidebarMenuStickyTop").removeClass("sidebarMenuStickyTop"),this.$(".sidebarMenuStickyBottom").removeClass("sidebarMenuStickyBottom"),a.removeData("nonStickyItemOffsetTop").removeClass("sidebarItemSticky sidebarItemStickyTop sidebarItemStickyBottom").css("top","").css("bottom","")}else 0>=h?(c=$(document.body).scrollTop()||$(document).scrollTop(),a.data("nonStickyItemOffsetTop",a.offset().top+
this.$(".sidebarViewport").scrollTop()-c).addClass("sidebarItemSticky sidebarItemStickyTop").css("top",f-c),a.parent("menu").removeClass("sidebarMenuStickyBottom").addClass("sidebarMenuStickyTop"),this.$el.addClass("sidebarItemListSticky sidebarItemListStickyTop")):h+d>g&&(f=$(window).height()-(f+g),c=$(document.body).scrollTop()||$(document).scrollTop(),a.data("nonStickyItemOffsetTop",a.offset().top+this.$(".sidebarViewport").scrollTop()-c).addClass("sidebarItemSticky sidebarItemStickyBottom").css("bottom",
f+c),a.parent("menu").removeClass("sidebarMenuStickyTop").addClass("sidebarMenuStickyBottom"),this.$el.addClass("sidebarItemListSticky sidebarItemListStickyBottom"));this.Re&&this.Re.update(b,!1)}Ml(this)};function Ml(a){var b=a.$(".sidebarViewport"),c=parseInt(b.scrollTop(),10),d=b.height();a.$el.toggleClass("sidebarScrollableTop",0<c).toggleClass("sidebarScrollableBottom",c+d<b.prop("scrollHeight"))}var Nl=Ll;$(function(){function a(){var a=vj({user:ca,i:gd,size:40,Za:!1,Va:!0,eb:!0}),b=$("#wholePage \x3e .sidebar");a.$el.appendTo(b.find(".currentUser \x3e .avatars"));a=b[0];b=pa;b.Ib||(b.Ib=new kc(b.config));return new Kj({el:a,H:Qf,Ib:b.Ib})}function b(){var a=new Ob(Nb()),b=$(".currentUser .displayNames, .avatars"),c=$(".userDisplayName",b),d=new Yg({If:k,Ia:r,yh:a.F.get(Pb)}),g=pa;g.v||(g.v=new zc(g.config));return new Hj({l:m,na:a,v:g.v,profiles:r,Oi:d,af:gd,user:ca,lg:c,Fb:b,Hd:"displayNamesActivated",
bf:null==Ca.getSubscription(),lb:f})}function c(){var a=$("#showNotificationMenu"),b=a.find(".notificationsLabel");return new Pg({nj:a,l:m,mf:d,Ge:b,te:W})}function d(){var a=ca.j(),b=pa;b.Rf||(b.Rf=new Ac(b.config));return new vg({rf:a,X:b.Rf,position:["leftTop","top"]})}function f(){var a;a=Ol;a=new Map([[0,[qh(a.wi.paidMonthly),qh(a.wi.paidYearly)]]]);a={F:A,wl:ba,l:m,i:gd,cb:a,Jb:0,Qk:Pl,Bb:Ql,Ia:r,ta:!0,Vb:!1,Fd:!1,Sa:Rl,Uc:Sl,u:pa,na:C};var b={Ab:a.Bb,i:a.i.j(),sa:a.Qk,bc:!0,w:bc(a.u)},c=new Rh({Qd:!1!==
b.Qd,w:b.w,F:b.F}),b=new pi({Ab:b.Ab,i:b.i,N:b.N,bc:b.bc,sa:b.sa,F:b.F,w:b.w,view:c}),d=a.cb,f=d.has(a.Jb)&&d.get(a.Jb).length?d.get(a.Jb)[0].ja:30,g=a.l,h=a.Bb,k=a.Ia,W=a.i,ca=a.Uc,Ca=a.Fd,Eb=a.u,mh=a.u,d=d.get(a.Jb),d=wi(d.sort(Ji),$b(mh)),d=new zi({Nb:d}),c=new Hi({compact:!0,Wd:c,zd:d,u:mh,ja:f}),c=new Ii({l:g,Bb:h,Ia:k,i:W,mb:b,Uc:ca,Fd:Ca,u:Eb,view:c});return new hj({yd:"/brand/onboarding/upgrader",l:a.l,Vb:a.Vb,ta:a.ta,Sc:$b(a.u),ra:a.ra,ja:a.ja,W:c,Sa:a.Sa,cb:a.cb,Jb:a.Jb})}function g(){$("#sidebarFacebookSignupButton").click(function(){Ib(m,
"signup","logged_out_homepage","sidebar","user_profile",{auth_mode:"facebook"})});$("#sidebarEmailSignupButton").click(function(){Ib(m,"signup","logged_out_homepage","sidebar","user_profile",{auth_mode:"email"})})}function h(){var a=new gl(k),b=fc(pa),a=kl({nb:a,Da:ca.j(),F:A}),c=new vl({lf:function(a){return new rl({Cj:a,D:b})},D:b,sc:C.F.get(Sb)});(new Hl({l:m,pf:f,D:b,Gb:a,view:c})).view.render().$el.replaceAll($(".designFolderListPlaceholder")).addClass("sidebarSection");a.fetch();a=$("#primaryNavigation");
c=new Jl({og:a,Ld:!0});c.$el.toggleClass("tabPointerHidden",!0);c.$el.appendTo(".sidebarInner");var d=$("#primaryNavigation .on"),g;d.length&&(g=a.children().index(d),c.update(g,!0,!0),c.$el.toggleClass("tabPointerHidden",!1));new Nl({el:$("#wholePage").children(".sidebar").find(".sidebarViewportContainer"),Df:function(){return g||-1},Re:c})}$("body").toggleClass("highDpi",hg.lj);$(".mobileHeaderHamburger").on("click",function(){$("body").toggleClass("mobileMenuOn")});var m=Wj(),k=new xg(window.httpServiceConfig),
r=new Wg(k),A=Nb(),C=new Ob(A),W=new Mg(k),ba=ej(),ca=ba.user.Ui(),Ca=ba.brandInfo,gd=Ca.K(),pa;if(!window.cmsg)throw Error("window['cmsg'] isn't defined");pa=new Xb;var Ol=new ui,Pl=ki(),Ql=new ji(k),Tl=!(!window.homeConfig||!window.homeConfig.showUpgradeDialog),Ul=!(!window.homeConfig||!window.homeConfig.userCreated),Rl=!(!window.paymentAccountConfig||!window.paymentAccountConfig.canUpgrade),Sl=!(!window.paymentAccountConfig||!window.paymentAccountConfig.canEditCreditCard),Eb;(function(){$("menu .dropdown").on("mouseover",
function(){var a=$(this),b=Number(a.data("timer"));null!=b&&clearTimeout(b);b=setTimeout(function(){a.parent().find("li.hover").not(a).removeClass("hover").addClass("hoverOff");a.removeClass("hoverOff").addClass("hover")},0);a.data("timer",b);a.on("mouseout",function(){var b=Number(a.data("timer"));null!=b&&clearTimeout(b);b=setTimeout(function(){a.off("mouseout").removeClass("hover").addClass("hoverOff")},500);a.data("timer",b)})})})();"UAAAAAAAAAA"===ca.id?g():(Eb=new Lj({l:m,na:C,td:c(),We:b(),
view:a(),lb:f,Pe:Tl,Ve:Ul,Ia:r,la:Ca}),Eb.start());oa(null==window.layoutOnUserUpdated);window.layoutOnUserUpdated=function(a){a=gb(a);Eb.ig(a)};C.F.get(Qb)&&new yk({xf:ak(k,C),Qf:1,openWindow:window.open.bind(window),u:pa,Y:new fk({qa:dc(pa).format("designSearchSidebarPlaceholderText"),el:$(".sidebarSearch"),Ee:$(".sidebarSearch").parent()}),nf:xk.create,l:m});$(".designFolderListPlaceholder").length&&!Dk()&&h()});})();
